!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("jquery"));else if("function"==typeof define&&define.amd)define(["jquery"],e);else{var n="object"==typeof exports?e(require("jquery")):e(t.$);for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}("undefined"!=typeof self?self:this,function(__WEBPACK_EXTERNAL_MODULE_23__){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=25)}([function(t,e,n){"use strict";n.d(e,"a",function(){return v});var r=n(10),i=n(26),o=n(30),a=n(22),s=n(8),u=n(2),c=n(4),l=n(14),h=n(6),d=n(13),f=n(12),p=n(15),_=n(5);function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dataSources={},this._dataSourceCache={},this._dataProviders={},this._frames={},this._areas={},this._timelines={},this._ranges={},this._plotters={},this._themes={},this._titles={},this._frameMousePos={},this._dsChartStyle={},this._dragStarted=!1,this._oldX=0,this._fakeIndicators={},this._captureMouseWheelDirectly=!0,this._chart={},this._chart.defaultFrame=new i.a,this._drawingTool=t.DrawingTool.CrossCursor,this._beforeDrawingTool=this._drawingTool,this._language="zh-cn",this._mainCanvas=null,this._overlayCanvas=null,this._mainContext=null,this._overlayContext=null,t.created||(t.instance=this,t.created=!0),t.instance}return function(t,e,n){e&&g(t.prototype,e),n&&g(t,n)}(t,[{key:"redraw",value:function(t,e){(void 0===t||e)&&(t="All"),"All"!==t&&"MainCanvas"!==t||(e&&this.getFrame("frame0").setChanged(!0),this.layout(this._mainContext,"frame0",0,0,this._mainCanvas.width,this._mainCanvas.height),this.drawMain("frame0",this._mainContext)),"All"!==t&&"OverlayCanvas"!==t||(this._overlayContext.clearRect(0,0,this._overlayCanvas.width,this._overlayCanvas.height),this.drawOverlay("frame0",this._overlayContext))}},{key:"bindCanvas",value:function(t,e){"main"===t?(this._mainCanvas=e,this._mainContext=e.getContext("2d")):"overlay"===t&&(this._overlayCanvas=e,this._overlayContext=e.getContext("2d"),this._captureMouseWheelDirectly&&$(this._overlayCanvas).bind("mousewheel",r.a.mouseWheel))}},{key:"getCaptureMouseWheelDirectly",value:function(){return this._captureMouseWheelDirectly}},{key:"setCaptureMouseWheelDirectly",value:function(t){this._captureMouseWheelDirectly=t,t?$(this._overlayCanvas).bind("mousewheel",r.a.mouseWheel):$(this._overlayCanvas).unbind("mousewheel")}},{key:"getChart",value:function(t){return this._chart.defaultFrame}},{key:"init",value:function(){delete this._ranges["frame0.k0.indic1"],delete this._ranges["frame0.k0.indic1Range"],delete this._areas["frame0.k0.indic1"],delete this._areas["frame0.k0.indic1Range"],s.a.loadTemplate("frame0.k0",""),this.redraw("All",!0)}},{key:"setCurrentDrawingTool",value:function(e){this._drawingTool=t.DrawingTool[e],this.setRunningMode(this._drawingTool)}},{key:"getLanguage",value:function(){return this._language}},{key:"setLanguage",value:function(t){this._language=t}},{key:"setThemeName",value:function(t,e){var n;switch(void 0===e&&(e="Dark"),e){case"Light":n=new h.b;break;default:e="Dark",n=new h.a}this._themeName=e,this.setTheme(t,n),this.getFrame(t).setChanged(!0)}},{key:"getChartStyle",value:function(t){var e=this._dsChartStyle[t];return void 0===e?"CandleStick":e}},{key:"setChartStyle",value:function(t,e){if(this._dsChartStyle[t]!==e){var n,r,i=t+".main",a=i+".main",s=i+".main";switch(e){case"CandleStick":case"CandleStickHLC":case"OHLC":switch(void 0!==(n=this.getDataProvider(a))&&_.a.isInstance(n,l.b)||(n=new l.b(a),this.setDataProvider(a,n),n.updateData()),this.setMainIndicator(t,c.a.get().charts.mIndic),e){case"CandleStick":r=new d.f(s);break;case"CandleStickHLC":r=new d.e(s);break;case"OHLC":r=new d.C(s)}this.setPlotter(s,r),r=new d.B(i+".decoration"),this.setPlotter(r.getName(),r);break;case"Line":n=new l.a(a),this.setDataProvider(n.getName(),n),n.setIndicator(new o.g),this.removeMainIndicator(t),r=new d.w(s),this.setPlotter(s,r),this.removePlotter(i+".decoration")}this.getArea(r.getAreaName()).setChanged(!0),this._dsChartStyle[t]=e}}},{key:"setNormalMode",value:function(){this._drawingTool=this._beforeDrawingTool,$(".chart_dropdown_data").removeClass("chart_dropdown-hover"),$("#chart_toolpanel .chart_toolpanel_button").removeClass("selected"),$("#chart_CrossCursor").parent().addClass("selected"),this._drawingTool===t.DrawingTool.Cursor?(this.showCursor(),$("#mode a").removeClass("selected"),$("#chart_toolpanel .chart_toolpanel_button").removeClass("selected"),$("#chart_Cursor").parent().addClass("selected")):this.hideCursor()}},{key:"setRunningMode",value:function(e){var n=this.getDataSource("frame0.k0"),r=n.getCurrentToolObject();if(null!==r&&r.state!==f.n.state.AfterDraw&&n.delToolObject(),n.getToolObjectCount()>10)this.setNormalMode();else switch(this._drawingTool=e,e===t.DrawingTool.Cursor&&this.showCursor(),e){case t.DrawingTool.Cursor:this._beforeDrawingTool=e;break;case t.DrawingTool.ArrowLine:n.addToolObject(new f.a("frame0.k0"));break;case t.DrawingTool.BandLine:n.addToolObject(new f.b("frame0.k0"));break;case t.DrawingTool.BiParallelLine:n.addToolObject(new f.c("frame0.k0"));break;case t.DrawingTool.BiParallelRayLine:n.addToolObject(new f.d("frame0.k0"));break;case t.DrawingTool.CrossCursor:this._beforeDrawingTool=e;break;case t.DrawingTool.DrawFibFans:n.addToolObject(new f.e("frame0.k0"));break;case t.DrawingTool.DrawFibRetrace:n.addToolObject(new f.f("frame0.k0"));break;case t.DrawingTool.DrawLines:n.addToolObject(new f.m("frame0.k0"));break;case t.DrawingTool.HoriRayLine:n.addToolObject(new f.g("frame0.k0"));break;case t.DrawingTool.HoriSegLine:n.addToolObject(new f.h("frame0.k0"));break;case t.DrawingTool.HoriStraightLine:n.addToolObject(new f.i("frame0.k0"));break;case t.DrawingTool.PriceLine:n.addToolObject(new f.j("frame0.k0"));break;case t.DrawingTool.RayLine:n.addToolObject(new f.k("frame0.k0"));break;case t.DrawingTool.SegLine:n.addToolObject(new f.l("frame0.k0"));break;case t.DrawingTool.StraightLine:n.addToolObject(new f.m("frame0.k0"));break;case t.DrawingTool.TriParallelLine:n.addToolObject(new f.o("frame0.k0"));break;case t.DrawingTool.VertiStraightLine:n.addToolObject(new f.p("frame0.k0"))}}},{key:"getTitle",value:function(t){return this._titles[t]}},{key:"setTitle",value:function(t,e){this._titles[t]=e}},{key:"setCurrentDataSource",value:function(t,e){var n=this.getCachedDataSource(e);void 0!==n&&null!==n?this.setDataSource(t,n,!0):(n=new u.b(e),this.setDataSource(t,n,!0),this.setCachedDataSource(e,n))}},{key:"getDataSource",value:function(t){return this._dataSources[t]}},{key:"setDataSource",value:function(t,e,n){this._dataSources[t]=e,n&&this.updateData(t,null)}},{key:"getCachedDataSource",value:function(t){return this._dataSourceCache[t]}},{key:"setCachedDataSource",value:function(t,e){this._dataSourceCache[t]=e}},{key:"getDataProvider",value:function(t){return this._dataProviders[t]}},{key:"setDataProvider",value:function(t,e){this._dataProviders[t]=e}},{key:"removeDataProvider",value:function(t){delete this._dataProviders[t]}},{key:"getFrame",value:function(t){return this._frames[t]}},{key:"setFrame",value:function(t,e){this._frames[t]=e}},{key:"removeFrame",value:function(t){delete this._frames[t]}},{key:"getArea",value:function(t){return this._areas[t]}},{key:"setArea",value:function(t,e){this._areas[t]=e}},{key:"removeArea",value:function(t){delete this._areas[t]}},{key:"getTimeline",value:function(t){return this._timelines[t]}},{key:"setTimeline",value:function(t,e){this._timelines[t]=e}},{key:"removeTimeline",value:function(t){delete this._timelines[t]}},{key:"getRange",value:function(t){return this._ranges[t]}},{key:"setRange",value:function(t,e){this._ranges[t]=e}},{key:"removeRange",value:function(t){delete this._ranges[t]}},{key:"getPlotter",value:function(t){return this._plotters[t]}},{key:"setPlotter",value:function(t,e){this._plotters[t]=e}},{key:"removePlotter",value:function(t){delete this._plotters[t]}},{key:"getTheme",value:function(t){return this._themes[t]}},{key:"setTheme",value:function(t,e){this._themes[t]=e}},{key:"getFrameMousePos",value:function(t,e){void 0!==this._frameMousePos[t]?(e.x=this._frameMousePos[t].x,e.y=this._frameMousePos[t].y):(e.x=-1,e.y=-1)}},{key:"setFrameMousePos",value:function(t,e,n){this._frameMousePos[t]={x:e,y:n}}},{key:"drawArea",value:function(t,e,n){var r=e.getNameObject().getCompAt(2);if("timeline"===r){if(e.getHeight()<20)return}else if(e.getHeight()<30)return;if(!(e.getWidth()<30)){var i;r=e.getName();var o,a=n.length;for(o=0;o<a;o++)void 0!==(i=this._plotters[r+n[o]])&&i.Draw(t)}}},{key:"drawAreaMain",value:function(t,e){var n;n=this._dataSources[e.getDataSourceName()].getDataCount()<1?[".background"]:[".background",".grid",".main",".secondary"],this.drawArea(t,e,n),e.setChanged(!1)}},{key:"drawAreaOverlay",value:function(t,e){var n;n=this._dataSources[e.getDataSourceName()].getDataCount()<1?[".selection"]:[".decoration",".selection",".info",".tool"],this.drawArea(t,e,n)}},{key:"drawMain",value:function(t,e){var n;for(var r in this._areas)this._areas[r].getFrameName()!==t||_.a.isInstance(this._areas[r],p.b)||this.drawAreaMain(e,this._areas[r]);for(var i in this._timelines)(n=this._timelines[i]).getFrameName()===t&&n.setUpdated(!1);for(var o in this._ranges)(n=this._ranges[o]).getFrameName()===t&&n.setUpdated(!1);for(var a in this._areas)(n=this._areas[a]).getFrameName()===t&&n.setChanged(!1)}},{key:"drawOverlay",value:function(t,e){for(var n in this._areas){var r=this._areas[n];_.a.isInstance(r,p.b)&&r.getFrameName()===t&&r.drawGrid(e)}for(var i in this._areas){var o=this._areas[i];!1===_.a.isInstance(o,p.b)&&o.getFrameName()===t&&this.drawAreaOverlay(e,o)}}},{key:"updateData",value:function(t,e){var n=this.getDataSource(t);if(void 0!==n&&null!==n){if(void 0!==e&&null!==e){if(!n.update(e))return!1;if(n.getUpdateMode()===u.a.UpdateMode.DoNothing)return!0}else n.setUpdateMode(u.a.UpdateMode.Refresh);var r=this.getTimeline(t);if(void 0!==r&&null!==r&&r.update(),n.getDataCount()<1)return!0;var i,o,a=[".main",".secondary"];for(var s in this._areas)if(i=this._areas[s],!_.a.isInstance(i,p.b)&&i.getDataSourceName()===t){o=i.getName();for(var c=0;c<a.length;c++){var l=this.getDataProvider(o+a[c]);void 0!==l&&null!==l&&l.updateData()}}return!0}}},{key:"updateRange",value:function(t){if(!(this.getDataSource(t).getDataCount()<1)){var e,n,r=[".main",".secondary"];for(var i in this._areas)if(e=this._areas[i],!_.a.isInstance(e,p.b)&&e.getDataSourceName()===t){n=e.getName();for(var o=0;o<r.length;o++){var a=this.getDataProvider(n+r[o]);void 0!==a&&null!==a&&a.updateRange()}var s=this.getTimeline(t);if(void 0!==s&&s.getMaxItemCount()>0){var u=this.getRange(n);void 0!==u&&null!==u&&u.update()}}}}},{key:"layout",value:function(t,e,n,r,i,o){var a=this.getFrame(e);for(var s in a.measure(t,i-n,o-r),a.layout(n,r,i,o),this._timelines){var u=this._timelines[s];u.getFrameName()===e&&u.onLayout()}for(var c in this._dataSources)c.substring(0,e.length)===e&&this.updateRange(c)}},{key:"SelectRange",value:function(t,e){for(var n in this._ranges){this._ranges[n].getAreaName()===t.getName()?this._ranges[n].selectAt(e):this._ranges[n].unselect()}}},{key:"scale",value:function(t){if(null!==this._highlightedFrame){var e=this._highlightedFrame.getHighlightedArea();if(void 0!==this.getRange(e.getName())){var n=e.getDataSourceName(),r=this.getTimeline(n);null!==r&&(r.scale(t),this.updateRange(n))}}}},{key:"showCursor",value:function(t){void 0===t&&(t="default"),this._mainCanvas.style.cursor=t,this._overlayCanvas.style.cursor=t}},{key:"hideCursor",value:function(){this._mainCanvas.style.cursor="none",this._overlayCanvas.style.cursor="none"}},{key:"showCrossCursor",value:function(t,e,n){var r=this.getRange(t.getName());return!(void 0===r||(r.selectAt(n),void 0===(r=this.getTimeline(t.getDataSourceName()))||!r.selectAt(e)))}},{key:"hideCrossCursor",value:function(t){if(null!==t&&void 0!==t)for(var e in this._timelines){var n=this._timelines[e];n!==t&&n.unselect()}else for(var r in this._timelines)this._timelines[r].unselect();for(var i in this._ranges)this._ranges[i].unselect()}},{key:"clearHighlight",value:function(){null!==this._highlightedFrame&&void 0!==this._highlightedFrame&&(this._highlightedFrame.highlight(null),this._highlightedFrame=null)}},{key:"onToolMouseMove",value:function(t,e,n){var r=!1;for(var i in t+=".",this._dataSources)if(0===i.indexOf(t)){var o=this._dataSources[i];_.a.isInstance(o,u.b)&&o.toolManager.acceptMouseMoveEvent(e,n)&&(r=!0)}return r}},{key:"onToolMouseDown",value:function(t,e,n){var r=!1;for(var i in t+=".",this._dataSources)if(0===i.indexOf(t)){var o=this._dataSources[i];_.a.isInstance(o,u.b)&&o.toolManager.acceptMouseDownEvent(e,n)&&(r=!0)}return r}},{key:"onToolMouseUp",value:function(t,e,n){var r=!1;for(var i in t+=".",this._dataSources)if(0===i.indexOf(t)){var o=this._dataSources[i];_.a.isInstance(o,u.b)&&o.toolManager.acceptMouseUpEvent(e,n)&&(r=!0)}return r}},{key:"onToolMouseDrag",value:function(t,e,n){var r=!1;for(var i in t+=".",this._dataSources)if(0===i.indexOf(t)){var o=this._dataSources[i];_.a.isInstance(o,u.b)&&o.toolManager.acceptMouseDownMoveEvent(e,n)&&(r=!0)}return r}},{key:"onMouseMove",value:function(t,e,n,r){if(!Kline.instance.loading){var i=this.getFrame(t);if(void 0!==i)if(this.setFrameMousePos(t,e,n),this.hideCrossCursor(),this._highlightedFrame!==i&&this.clearHighlight(),null===this._capturingMouseArea||void 0===this._capturingMouseArea){var o,a,s=i.contains(e,n);if(null!==s)for(a=s.length-1;a>=0;a--)if(null!==(o=(o=s[a]).onMouseMove(e,n)))return void(_.a.isInstance(o,p.b)||(i.highlight(o),this._highlightedFrame=i))}else this._capturingMouseArea.onMouseMove(e,n)}}},{key:"onMouseLeave",value:function(t,e,n,r){void 0!==this.getFrame(t)&&(this.setFrameMousePos(t,e,n),this.hideCrossCursor(),this.clearHighlight(),null!==this._capturingMouseArea&&void 0!==this._capturingMouseArea&&(this._capturingMouseArea.onMouseLeave(e,n),this._capturingMouseArea=null),this._dragStarted=!1)}},{key:"onMouseDown",value:function(t,e,n){var r=this.getFrame(t);if(void 0!==r){var i,o,a=r.contains(e,n);if(null!==a)for(o=a.length-1;o>=0;o--)if(null!==(i=(i=a[o]).onMouseDown(e,n)))return void(this._capturingMouseArea=i)}}},{key:"onMouseUp",value:function(t,e,n){var i=this.getFrame(t);void 0!==i&&this._capturingMouseArea&&(null===this._capturingMouseArea.onMouseUp(e,n)&&!1===this._dragStarted&&(null!==this._selectedFrame&&void 0!==this._selectedFrame&&this._selectedFrame!==i&&this._selectedFrame.select(null),this._capturingMouseArea.isSelected()?(this._captureMouseWheelDirectly||$(this._overlayCanvas).unbind("mousewheel"),i.select(null),this._selectedFrame=null):(this._selectedFrame!==i&&(this._captureMouseWheelDirectly||$(this._overlayCanvas).bind("mousewheel",r.a.mouseWheel)),i.select(this._capturingMouseArea),this._selectedFrame=i)),this._capturingMouseArea=null,this._dragStarted=!1)}},{key:"deleteToolObject",value:function(){var t=this.getDataSource("frame0.k0");null!==t.getSelectToolObjcet()&&t.delSelectToolObject();var e=t.getCurrentToolObject();null!==e&&e.getState()!==f.n.state.AfterDraw&&t.delToolObject(),this.setNormalMode()}},{key:"unloadTemplate",value:function(t){if(void 0!==this.getFrame(t)){for(var e in this._dataSources)e.match(t+".")&&delete this._dataSources[e];for(var n in this._dataProviders)this._dataProviders[n].getFrameName()===t&&delete this._dataProviders[n];for(var r in delete this._frames[t],this._areas)this._areas[r].getFrameName()===t&&delete this._areas[r];for(var i in this._timelines)this._timelines[i].getFrameName()===t&&delete this._timelines[i];for(var o in this._ranges)this._ranges[o].getFrameName()===t&&delete this._ranges[o];for(var a in this._plotters)this._plotters[a].getFrameName()===t&&delete this._plotters[a];delete this._themes[t],delete this._frameMousePos[t]}}},{key:"createIndicatorAndRange",value:function(t,e,n){var r,i;switch(e){case"MA":r=new o.j,i=new a.c(t);break;case"EMA":r=new o.e,i=new a.c(t);break;case"VOLUME":r=new o.s,i=new a.e(t);break;case"MACD":r=new o.i,i=new a.f(t);break;case"DMI":r=new o.d,i=new a.b(t);break;case"DMA":r=new o.c,i=new a.d(t);break;case"TRIX":r=new o.r,i=new a.d(t);break;case"BRAR":r=new o.b,i=new a.d(t);break;case"VR":r=new o.t,i=new a.d(t);break;case"OBV":r=new o.l,i=new a.d(t);break;case"EMV":r=new o.f,i=new a.d(t);break;case"RSI":r=new o.o,i=new a.b(t);break;case"WR":r=new o.u,i=new a.b(t);break;case"SAR":r=new o.p,i=new a.c(t);break;case"KDJ":r=new o.h,i=new a.b(t);break;case"ROC":r=new o.n,i=new a.d(t);break;case"MTM":r=new o.k,i=new a.d(t);break;case"BOLL":r=new o.a,i=new a.d(t);break;case"PSY":r=new o.m,i=new a.d(t);break;case"StochRSI":r=new o.q,i=new a.b(t);break;default:return null}return n||r.setParameters(c.a.get().indics[e]),{indic:r,range:i}}},{key:"setMainIndicator",value:function(t,e){var n,r=t+".main",i=this.getDataProvider(r+".main");if(void 0===i||!_.a.isInstance(i,l.b))return!1;switch(e){case"MA":n=new o.j;break;case"EMA":n=new o.e;break;case"BOLL":n=new o.a;break;case"SAR":n=new o.p;break;default:return!1}n.setParameters(c.a.get().indics[e]);var a=r+".secondary",s=this.getDataProvider(a);void 0===s&&(s=new l.a(a),this.setDataProvider(s.getName(),s)),s.setIndicator(n);var u=this.getPlotter(a);return void 0===u&&(u=new d.w(a),this.setPlotter(u.getName(),u)),this.getArea(r).setChanged(!0),!0}},{key:"setIndicator",value:function(t,e){var n=this.getArea(t);if(null===n||void 0===n||"main"===n.getNameObject().getCompAt(2))return!1;var r=this.getDataProvider(t+".secondary");if(null===r||void 0===r||!_.a.isInstance(r,l.a))return!1;var i=this.createIndicatorAndRange(t,e);if(null===i||void 0===i)return!1;var a=i.indic,s=i.range;if(this.removeDataProvider(t+".main"),this.removePlotter(t+".main"),this.removeRange(t),this.removePlotter(t+"Range.decoration"),r.setIndicator(a),this.setRange(t,s),s.setPaddingTop(20),s.setPaddingBottom(4),s.setMinInterval(20),_.a.isInstance(a,o.s)){var u=new d.y(t+"Range.decoration");this.setPlotter(u.getName(),u)}else if(_.a.isInstance(a,o.a)||_.a.isInstance(a,o.p)){var c=new l.b(t+".main");this.setDataProvider(c.getName(),c),c.updateData();var h=new d.C(t+".main");this.setPlotter(h.getName(),h)}return!0}},{key:"removeMainIndicator",value:function(t){var e=t+".main",n=e+".secondary",r=this.getDataProvider(n);void 0!==r&&_.a.isInstance(r,l.a)&&(this.removeDataProvider(n),this.removePlotter(n),this.getArea(e).setChanged(!0))}},{key:"removeIndicator",value:function(t){var e=this.getArea(t);if(void 0!==e&&"main"!==e.getNameObject().getCompAt(2)){var n=this.getDataProvider(t+".secondary");if(void 0!==n&&_.a.isInstance(n,l.a)){var r=t+"Range",i=this.getArea(r);if(void 0!==i){var o=this.getArea(e.getDataSourceName()+".charts");if(void 0!==o){for(var a in o.removeArea(e),this.removeArea(t),o.removeArea(i),this.removeArea(r),this._dataProviders)this._dataProviders[a].getAreaName()===t&&this.removeDataProvider(a);for(var s in this._ranges)this._ranges[s].getAreaName()===t&&this.removeRange(s);for(var u in this._plotters)this._plotters[u].getAreaName()===t&&this.removePlotter(u);for(var c in this._plotters)this._plotters[c].getAreaName()===r&&this.removePlotter(c)}}}}}},{key:"getIndicatorParameters",value:function(t){var e=this._fakeIndicators[t];if(void 0===e){var n=this.createIndicatorAndRange("",t);if(null===n)return null;this._fakeIndicators[t]=e=n.indic}var r,i=[],o=e.getParameterCount();for(r=0;r<o;r++)i.push(e.getParameterAt(r));return i}},{key:"setIndicatorParameters",value:function(t,e){var n,r;for(n in this._dataProviders){var i=this._dataProviders[n];!1!==_.a.isInstance(i,l.a)&&((r=i.getIndicator()).getName()===t&&(r.setParameters(e),i.refresh(),this.getArea(i.getAreaName()).setChanged(!0)))}if(void 0===(r=this._fakeIndicators[t])){var o=this.createIndicatorAndRange("",t,!0);if(null===o)return;this._fakeIndicators[t]=r=o.indic}r.setParameters(e)}},{key:"getIndicatorAreaName",value:function(t,e){var n=this.getArea(t+".charts"),r=n.getAreaCount()>>1;return e<0||e>=r?"":n.getAreaAt(e<<1).getName()}}]),t}();v.DrawingTool={Cursor:0,CrossCursor:1,DrawLines:2,DrawFibRetrace:3,DrawFibFans:4,SegLine:5,StraightLine:6,ArrowLine:7,RayLine:8,HoriStraightLine:9,HoriRayLine:10,HoriSegLine:11,VertiStraightLine:12,PriceLine:13,BiParallelLine:14,BiParallelRayLine:15,TriParallelLine:16,BandLine:17},v.created=!1,v.instance=null},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(19);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e,this._nameObj=new r.a(e)}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"getFrameName",value:function(){return this._nameObj.getName(0)}},{key:"getDataSourceName",value:function(){return this._nameObj.getName(1)}},{key:"getAreaName",value:function(){return this._nameObj.getName(2)}},{key:"getName",value:function(){return this._nameObj.getName(-1)}},{key:"getNameObject",value:function(){return this._nameObj}},{key:"getRectCrossPt",value:function(t,e,n){var r={x:-1,y:-1},i={x:-1,y:-1},o=n.x-e.x,a=n.y-e.y;if(Math.abs(o)<2)return[r={x:e.x,y:t.top},i={x:n.x,y:t.bottom}];var s=a/o;return i.x=t.right,i.y=e.y+(t.right-e.x)*s,r.x=t.left,r.y=e.y+(t.left-e.x)*s,[r,i]}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return p});var r=n(1),i=n(27);n(3);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function c(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(t){return a(this,e),c(this,l(e).call(this,t))}return h(e,r["a"]),u(e,[{key:"getUpdateMode",value:function(){return this._updateMode}},{key:"setUpdateMode",value:function(t){this._updateMode=t}},{key:"getCacheSize",value:function(){return 0}},{key:"getDataCount",value:function(){return 0}},{key:"getDataAt",value:function(t){return this._dataItems[t]}}]),e}();f.UpdateMode={Prepend:-1,DoNothing:0,Refresh:1,Update:2,Append:3};var p=function(t){function e(t){var n;return a(this,e),(n=c(this,l(e).call(this,t)))._prependedCount=0,n._erasedCount=0,n._dataItems=[],n._decimalDigits=0,n.toolManager=new i.a(t),n}return h(e,f),u(e,[{key:"getCacheSize",value:function(){return this._dataItems.length}},{key:"getDataCount",value:function(){return this._dataItems.length}},{key:"getUpdatedCount",value:function(){return this._updatedCount}},{key:"getAppendedCount",value:function(){return this._appendedCount}},{key:"getPrependCount",value:function(){return this._prependedCount}},{key:"getErasedCount",value:function(){return this._erasedCount}},{key:"getDecimalDigits",value:function(){return this._decimalDigits}},{key:"calcDecimalDigits",value:function(t){var e=""+t,n=e.indexOf(".");return n<0?0:e.length-1-n}},{key:"getLastDate",value:function(){var t=this.getDataCount();return t<1?-1:this.getDataAt(t-1).date}},{key:"getFirstDate",value:function(){return this.getDataCount()<1?-1:this.getDataAt(0).date}},{key:"getDataAt",value:function(t){return this._dataItems[t]}},{key:"update",value:function(t){this._updatedCount=0,this._appendedCount=0,this._erasedCount=0,this._prependedCount=0;var e=this._dataItems.length;if(e>0){var n,r,i,o=e-1,a=this._dataItems[0],s=this._dataItems[o],u=t.length,c=[],l=a.date;if(l>=t[0][0]&&l<=t[u-1][0]){for(r=0;r<u;r++){for(n=t[r],i=1;i<=4;i++)h=this.calcDecimalDigits(n[i]),this._decimalDigits<h&&(this._decimalDigits=h);if(!(n[0]<l))break;c.push({date:n[0],open:n[1],high:n[2],low:n[3],close:n[4],volume:n[5]})}for(this.setUpdateMode(f.UpdateMode.Prepend),u=c.length,this._prependedCount+=u,r=0;r<u;r++)this._dataItems.unshift(c.pop());return!0}for(r=0;r<u;r++)if((n=t[r])[0]===s.date){if(s.open===n[1]&&s.high===n[2]&&s.low===n[3]&&s.close===n[4]&&s.volume===n[5])this.setUpdateMode(f.UpdateMode.DoNothing);else{for(this.setUpdateMode(f.UpdateMode.Update),i=1;i<=4;i++)h=this.calcDecimalDigits(n[i]),this._decimalDigits<h&&(this._decimalDigits=h);this._dataItems[o]={date:n[0],open:n[1],high:n[2],low:n[3],close:n[4],volume:n[5]},this._updatedCount++}if(++r<u)for(this.setUpdateMode(f.UpdateMode.Append);r<u;r++){for(n=t[r],i=1;i<=4;i++)h=this.calcDecimalDigits(n[i]),this._decimalDigits<h&&(this._decimalDigits=h);this._dataItems.push({date:n[0],open:n[1],high:n[2],low:n[3],close:n[4],volume:n[5]}),this._appendedCount++}return!0}}this.setUpdateMode(f.UpdateMode.Refresh),this._dataItems=[];var h,d,p,_,g=t.length;for(_=0;_<g;_++){for(p=t[_],d=1;d<=4;d++)h=this.calcDecimalDigits(p[d]),this._decimalDigits<h&&(this._decimalDigits=h);this._dataItems.push({date:p[0],open:p[1],high:p[2],low:p[3],close:p[4],volume:p[5]})}return!0}},{key:"select",value:function(t){this.toolManager.selecedObject=t}},{key:"unselect",value:function(){this.toolManager.selecedObject=-1}},{key:"addToolObject",value:function(t){this.toolManager.addToolObject(t)}},{key:"delToolObject",value:function(){this.toolManager.delCurrentObject()}},{key:"getToolObject",value:function(t){return this.toolManager.getToolObject(t)}},{key:"getToolObjectCount",value:function(){return this.toolManager.toolObjects.length}},{key:"getCurrentToolObject",value:function(){return this.toolManager.getCurrentObject()}},{key:"getSelectToolObjcet",value:function(){return this.toolManager.getSelectedObject()}},{key:"delSelectToolObject",value:function(){this.toolManager.delSelectedObject()}}]),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n(10),i=n(18),o=n(0),a=n(4),s=n(8),u=n(31),c=(n.n(u),n(47)),l=n.n(c),h=n(48),d=n(23),f=n.n(d);function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element="#kline_container",this.chartMgr=null,this.G_HTTP_REQUEST=null,this.timer=null,this.buttonDown=!1,this.init=!1,this.requestParam="",this.data={},this.width=1200,this.height=650,this.symbol="",this.symbolName="",this.range=null,this.url="",this.limit=1e3,this.type="poll",this.subscribePath="",this.sendPath="",this.stompClient=null,this.intervalTime=5e3,this.debug=!0,this.language="zh-cn",this.theme="dark",this.ranges=["1w","1d","1h","30m","15m","5m","1m","line"],this.showTrade=!0,this.tradeWidth=250,this.socketConnected=!1,this.enableSockjs=!0,this.reverseColor=!1,this.isSized=!1,this.paused=!1,this.subscribed=null,this.disableFirebase=!1,this.loading=!1,this.rollspeed=30,this.showToolbar=!0,this.showIndic=!0,this.rotate=0,this.periodMap={"01w":6048e5,"03d":2592e5,"01d":864e5,"12h":432e5,"06h":216e5,"04h":144e5,"02h":72e5,"01h":36e5,"30m":18e5,"15m":9e5,"05m":3e5,"03m":18e4,"01m":6e4,line:6e4},this.tagMapPeriod={"1w":"01w","3d":"03d","1d":"01d","12h":"12h","6h":"06h","4h":"04h","2h":"02h","1h":"01h","30m":"30m","15m":"15m","5m":"05m","3m":"03m","1m":"01m",line:"line"},Object.assign(this,e),t.created||(t.instance=this,t.created=!0),t.instance}return function(t,e,n){e&&p(t.prototype,e),n&&p(t,n)}(t,[{key:"draw",value:function(){t.trade=new i.a,t.chartMgr=new o.a;var e=f.a.parseHTML(l.a);for(var n in this.ranges){f()(e).find('[name="'+this.ranges[n]+'"]').each(function(t,e){f()(e).attr("style","display:inline-block")})}f()(this.element).html(e),setInterval(r.a.refreshFunction,this.intervalTime),"stomp"===this.type&&r.a.socketConnect(),this.disableFirebase||Object(h.a)(),this.registerMouseEvent(),o.a.instance.bindCanvas("main",document.getElementById("chart_mainCanvas")),o.a.instance.bindCanvas("overlay",document.getElementById("chart_overlayCanvas")),r.a.refreshTemplate(),r.a.onSize(this.width,this.height),r.a.readCookie(),this.setTheme(this.theme),this.setLanguage(this.language),f()(this.element).css({visibility:"visible"}),this.showIndic||this.switchIndic(!1),this.showToolbar||this.switchToolbar(this.showToolbar),this.isFullScreen||this.sizeKline(this.isFullScreen),0!==this.rotate&&this.switchRotate(this.rotate)}},{key:"resize",value:function(t,e){this.width=t,this.height=e,r.a.onSize(this.width,this.height)}},{key:"setSymbol",value:function(t,e){this.symbol=t,this.symbolName=e,r.a.switchSymbol(t),this.onSymbolChange(t,e)}},{key:"setTheme",value:function(t){this.theme=t,r.a.switchTheme(t)}},{key:"setLanguage",value:function(t){this.language=t,r.a.chartSwitchLanguage(t)}},{key:"setShowTrade",value:function(t){this.showTrade=t,t?f()(".trade_container").show():f()(".trade_container").hide(),r.a.onSize(this.width,this.height)}},{key:"toggleTrade",value:function(){this.showTrade?(this.showTrade=!1,f()(".trade_container").hide()):(this.showTrade=!0,f()(".trade_container").show()),r.a.onSize(this.width,this.height)}},{key:"setIntervalTime",value:function(t){this.intervalTime=t,this.debug&&console.log("DEBUG: interval time changed to "+t)}},{key:"pause",value:function(){this.debug&&console.log("DEBUG: kline paused"),this.paused=!0}},{key:"resend",value:function(){this.debug&&console.log("DEBUG: kline continue"),this.paused=!1,r.a.requestData(!0)}},{key:"connect",value:function(){"stomp"===this.type?r.a.socketConnect():this.debug&&console.log("DEBUG: this is for stomp type")}},{key:"disconnect",value:function(){"stomp"===this.type?(this.stompClient&&(this.stompClient.disconnect(),this.socketConnected=!1),this.debug&&console.log("DEBUG: socket disconnected")):this.debug&&console.log("DEBUG: this is for stomp type")}},{key:"switchIndic",value:function(t){t?(r.a.switchIndic("on"),f()("#chart_show_indicator").addClass("selected")):(r.a.switchIndic("off"),f()("#chart_show_indicator").removeClass("selected"))}},{key:"switchToolbar",value:function(t){t?f()("#chart_toolbar").removeClass("hide"):f()("#chart_toolbar").addClass("hide")}},{key:"sizeKline",value:function(e){t.instance.isSized=void 0===e?!t.instance.isSized:e,t.instance.isSized?(f()(t.instance.element).css({position:"fixed",left:"0",right:"0",top:"0",bottom:"0",width:"100%",height:"100%",zIndex:"10000"}),r.a.onSize(),f()("html,body").css({width:"100%",height:"100%",overflow:"hidden"})):(f()(t.instance.element).attr("style",""),f()("html,body").attr("style",""),r.a.onSize(t.instance.width,t.instance.height),f()(t.instance.element).css({visibility:"visible",height:t.instance.height+"px"}))}},{key:"switchRotate",value:function(t){var e=f()(this.element);switch(e.removeClass(["rotate90","rotate180","rotate270"]),t%4){case 1:this.rotate=1,e.addClass("rotate90");break;case 2:this.rotate=2,e.addClass("rotate180");break;case 3:this.rotate=3,e.addClass("rotate270");break;default:this.rotate=0}}},{key:"onResize",value:function(t,e){this.debug&&console.log("DEBUG: chart resized to width: "+t+" height: "+e)}},{key:"onLangChange",value:function(t){this.debug&&console.log("DEBUG: language changed to "+t)}},{key:"onSymbolChange",value:function(t,e){this.debug&&console.log("DEBUG: symbol changed to "+t+" "+e)}},{key:"onThemeChange",value:function(t){this.debug&&console.log("DEBUG: themes changed to : "+t)}},{key:"onRangeChange",value:function(t){this.debug&&console.log("DEBUG: range changed to "+t)}},{key:"created",value:function(){this.debug&&console.log("DEBUG: Kline Created "+range)}},{key:"onLoadHistory",value:function(){t.instance.debug&&console.log("DEBUG: Load History Data ");var e=t.instance.chartMgr.getDataSource("frame0.k0").getFirstDate();if(-1===e){var n=r.a.setHttpRequestParam(t.instance.symbol,t.instance.range,t.instance.limit,null);r.a.requestData(!0,n)}else{var i=r.a.setHttpRequestParam(t.instance.symbol,t.instance.range,t.instance.limit,e.toString(),"history");r.a.requestData(!0,i)}o.a.instance.redraw("All",!1)}},{key:"registerMouseEvent",value:function(){f()(document).ready(function(){function e(t){var e=t.targetTouches[0].pageX,n=t.targetTouches[0].pageY,r=e-t.targetTouches[1].pageX,i=n-t.targetTouches[1].pageY;return Math.sqrt(r*r+i*i)}f()(t.instance.element).attr("tabindex",1).keydown(function(e){var n=t.instance.rollspeed;if(39==e.keyCode){var r=o.a.instance;r.onMouseDown("frame0",0,0),r.onMouseMove("frame0",n,0,!0),r.onMouseUp("frame0",n,0),r.redraw("All",!1)}else if(37==e.keyCode){var i=o.a.instance;i.onMouseDown("frame0",n,0),i.onMouseMove("frame0",0,0,!0),i.onMouseUp("frame0",0,0),i.redraw("All",!1)}}),f()("#chart_overlayCanvas").bind("contextmenu",function(t){return t.cancelBubble=!0,t.returnValue=!1,t.preventDefault(),t.stopPropagation(),!1}),f()("#chart_overlayCanvas").bind("_LoadHistory",t.instance.onLoadHistory),f()(".chart_container .chart_dropdown .chart_dropdown_t").mouseover(function(){var t=f()(".chart_container"),e=f()(this),n=e.next(),r=t.offset().left,i=e.offset().left,o=t.width(),a=e.width(),s=(n.width()-a)/2<<0;i-s<r+4?s=i-r-4:s+=i+a+s>r+o-4?i+a+s-(r+o-4)+19:4,n.css({"margin-left":-s}),e.addClass("chart_dropdown-hover"),n.addClass("chart_dropdown-hover")}).mouseout(function(){f()(this).next().removeClass("chart_dropdown-hover"),f()(this).removeClass("chart_dropdown-hover")}).click(function(){var t=f()(this);t.hasClass("chart_dropdown-hover")?t.trigger("mouseout"):t.trigger("mouseover")}),f()(".chart_dropdown_data").mouseover(function(){f()(this).addClass("chart_dropdown-hover"),f()(this).prev().addClass("chart_dropdown-hover")}).mouseout(function(){f()(this).prev().removeClass("chart_dropdown-hover"),f()(this).removeClass("chart_dropdown-hover")}),f()("#chart_btn_parameter_settings").click(function(){f()("#chart_parameter_settings").addClass("clicked"),f()(".chart_dropdown_data").removeClass("chart_dropdown-hover"),f()("#chart_parameter_settings").find("th").each(function(){var t=f()(this).html(),e=0,n=a.a.get().indics[t];f()(this.nextElementSibling).find("input").each(function(){null!==n&&e<n.length&&f()(this).val(n[e]),e++})})}),f()("#close_settings").click(function(){f()("#chart_parameter_settings").removeClass("clicked")}),f()(".chart_container .chart_toolbar_tabgroup a").click(function(){r.a.switchPeriod(f()(this).parent().attr("name"))}),f()("#chart_toolbar_periods_vert ul a").click(function(){r.a.switchPeriod(f()(this).parent().attr("name"))}),f()(".market_chooser ul a").click(function(){r.a.switchSymbol(f()(this).attr("name"))}),f()("#chart_show_tools").click(function(){f()(this).hasClass("selected")?r.a.switchTools("off"):r.a.switchTools("on")}),f()("#chart_toolpanel .chart_toolpanel_button").click(function(){f()(".chart_dropdown_data").removeClass("chart_dropdown-hover"),f()("#chart_toolpanel .chart_toolpanel_button").removeClass("selected"),f()(this).addClass("selected");var e=f()(this).children().attr("name");t.instance.chartMgr.setRunningMode(o.a.DrawingTool[e])}),f()("#chart_show_indicator").click(function(){f()(this).hasClass("selected")?r.a.switchIndic("off"):r.a.switchIndic("on")}),f()("#chart_tabbar li a").click(function(){f()("#chart_tabbar li a").removeClass("selected"),f()(this).addClass("selected");var t=f()(this).attr("name");a.a.get().charts.indics[1]=t,a.a.save(),!1===s.b.displayVolume?o.a.instance.getChart().setIndicator(1,t):o.a.instance.getChart().setIndicator(2,t)}),f()("#chart_select_chart_style a").click(function(){f()("#chart_select_chart_style a").removeClass("selected"),f()(this).addClass("selected"),a.a.get().charts.chartStyle=f()(this)[0].innerHTML,a.a.save();var t=o.a.instance;t.setChartStyle("frame0.k0",f()(this).html()),t.redraw()}),f()("#chart_dropdown_themes li").click(function(){f()("#chart_dropdown_themes li a").removeClass("selected");var t=f()(this).attr("name");"chart_themes_dark"===t?r.a.switchTheme("dark"):"chart_themes_light"===t&&r.a.switchTheme("light")}),f()("#chart_select_main_indicator a").click(function(){f()("#chart_select_main_indicator a").removeClass("selected"),f()(this).addClass("selected");var t=f()(this).attr("name");a.a.get().charts.mIndic=t,a.a.save();var e=o.a.instance;e.setMainIndicator("frame0.k0",t)||e.removeMainIndicator("frame0.k0"),e.redraw()}),f()("#chart_toolbar_theme a").click(function(){f()("#chart_toolbar_theme a").removeClass("selected"),"dark"===f()(this).attr("name")?r.a.switchTheme("dark"):"light"===f()(this).attr("name")&&r.a.switchTheme("light")}),f()("#chart_select_theme li a").click(function(){f()("#chart_select_theme a").removeClass("selected"),"dark"===f()(this).attr("name")?r.a.switchTheme("dark"):"light"===f()(this).attr("name")&&r.a.switchTheme("light")}),f()("#chart_enable_tools li a").click(function(){f()("#chart_enable_tools a").removeClass("selected"),"on"===f()(this).attr("name")?r.a.switchTools("on"):"off"===f()(this).attr("name")&&r.a.switchTools("off")}),f()("#chart_enable_indicator li a").click(function(){f()("#chart_enable_indicator a").removeClass("selected"),"on"===f()(this).attr("name")?r.a.switchIndic("on"):"off"===f()(this).attr("name")&&r.a.switchIndic("off")}),f()("#chart_language_setting_div li a").click(function(){f()("#chart_language_setting_div a").removeClass("selected"),"zh-cn"===f()(this).attr("name")?r.a.chartSwitchLanguage("zh-cn"):"en-us"===f()(this).attr("name")?r.a.chartSwitchLanguage("en-us"):"zh-tw"===f()(this).attr("name")&&r.a.chartSwitchLanguage("zh-tw")}),f()(document).keyup(function(t){46===t.keyCode&&(o.a.instance.deleteToolObject(),o.a.instance.redraw("OverlayCanvas",!1))}),f()("#clearCanvas").click(function(){for(var t=o.a.instance.getDataSource("frame0.k0"),e=t.getToolObjectCount(),n=0;n<e;n++)t.delToolObject();o.a.instance.redraw("OverlayCanvas",!1)}),f()("#chart_overlayCanvas").on("touchstart",function(n){if(2==n.targetTouches.length)n.preventDefault(),t.instance.downC=e(n);else if(1==n.targetTouches.length){n.preventDefault(),t.instance.buttonDown=!0;var r=n.target.getBoundingClientRect(),i=n.touches[0].clientX-r.left,a=n.touches[0].clientY-r.top;o.a.instance.onMouseDown("frame0",i,a);var s=o.a.instance;s.onMouseMove("frame0",i,a,!1),s.redraw("OverlayCanvas",!1)}}).on("touchmove",function(n){if(2==n.targetTouches.length)n.preventDefault(),r.a.mouseWheel(n,(e(n)-t.instance.downC)/2e4);else if(1==n.targetTouches.length){n.preventDefault();var i=n.target.getBoundingClientRect(),a=n.touches[0].clientX-i.left,s=n.touches[0].clientY-i.top,u=o.a.instance;!0===t.instance.buttonDown?(u.onMouseMove("frame0",a,s,!0),u.redraw("All",!1)):(u.onMouseMove("frame0",a,s,!1),u.redraw("OverlayCanvas"))}}).on("touchend",function(e){e.preventDefault(),t.instance.buttonDown=!1;var n=e.target.getBoundingClientRect(),r=e.changedTouches[0].clientX-n.left,i=e.changedTouches[0].clientY-n.top,a=o.a.instance;a.onMouseUp("frame0",r,i),a.redraw("All")}).mousemove(function(e){var n=e.target.getBoundingClientRect(),r=e.clientX-n.left,i=e.clientY-n.top,a=o.a.instance;!0===t.instance.buttonDown?(a.onMouseMove("frame0",r,i,!0),a.redraw("All",!1)):(a.onMouseMove("frame0",r,i,!1),a.redraw("OverlayCanvas"))}).mouseleave(function(t){var e=t.target.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top,i=o.a.instance;i.onMouseLeave("frame0",n,r,!1),i.redraw("OverlayCanvas")}).mouseup(function(e){if(1===e.which){t.instance.buttonDown=!1;var n=e.target.getBoundingClientRect(),r=e.clientX-n.left,i=e.clientY-n.top,a=o.a.instance;a.onMouseUp("frame0",r,i),a.redraw("All")}}).mousedown(function(e){if(1!==e.which)return o.a.instance.deleteToolObject(),void o.a.instance.redraw("OverlayCanvas",!1);t.instance.buttonDown=!0;var n=e.target.getBoundingClientRect(),r=e.clientX-n.left,i=e.clientY-n.top;o.a.instance.onMouseDown("frame0",r,i)}),f()("#chart_parameter_settings :input").change(function(){var t=f()(this).attr("name"),e=0,n=[],r=o.a.instance;if(f()("#chart_parameter_settings :input").each(function(){if(f()(this).attr("name")===t){if(""!==f()(this).val()&&null!==f()(this).val()&&void 0!==f()(this).val()){var r=parseInt(f()(this).val());n.push(r)}e++}}),0!==n.length){r.setIndicatorParameters(t,n);var i=r.getIndicatorParameters(t),s=[];e=0,f()("#chart_parameter_settings :input").each(function(){f()(this).attr("name")===t&&(""!==f()(this).val()&&null!==f()(this).val()&&void 0!==f()(this).val()&&(f()(this).val(i[e].getValue()),s.push(i[e].getValue())),e++)}),a.a.get().indics[t]=s,a.a.save(),r.redraw("All",!1)}}),f()("#chart_parameter_settings button").click(function(){var t=f()(this).parents("tr").children("th").html(),e=0,n=o.a.instance.getIndicatorParameters(t),r=[];f()(this).parent().prev().children("input").each(function(){null!==n&&e<n.length&&(f()(this).val(n[e].getDefaultValue()),r.push(n[e].getDefaultValue())),e++}),o.a.instance.setIndicatorParameters(t,r),a.a.get().indics[t]=r,a.a.save(),o.a.instance.redraw("All",!1)}),f()("body").on("click","#sizeIcon",function(){t.instance.sizeKline()}),t.instance.created()})}}]),t}();_.created=!1,_.instance=null},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,null,[{key:"checkVersion",value:function(){if(t._data.ver<2){t._data.ver=2;var e=t._data.charts;e.period_weight={},e.period_weight.line=8,e.period_weight["1min"]=7,e.period_weight["5min"]=6,e.period_weight["15min"]=5,e.period_weight["30min"]=4,e.period_weight["1hour"]=3,e.period_weight["1day"]=2,e.period_weight["1week"]=1,e.period_weight["3min"]=0,e.period_weight["2hour"]=0,e.period_weight["4hour"]=0,e.period_weight["6hour"]=0,e.period_weight["12hour"]=0,e.period_weight["3day"]=0}t._data.ver<3&&(t._data.ver=3,t._data.charts.areaHeight=[])}},{key:"get",value:function(){return void 0===t._data&&(t.init(),t.load(),t.checkVersion()),t._data}},{key:"init",value:function(){for(var e={},n=["MA","EMA","VOLUME","MACD","KDJ","StochRSI","RSI","DMI","OBV","BOLL","DMA","TRIX","BRAR","VR","EMV","WR","ROC","MTM","PSY"],i=0;i<n.length;i++){var o=r.a.instance.createIndicatorAndRange("",n[i],!0);if(null!==o){e[n[i]]=[];for(var a=o.indic.getParameters(),s=0;s<a.length;s++)e[n[i]].push(a[s])}}var u={chartStyle:"CandleStick",mIndic:"MA",indics:["VOLUME","MACD"],indicsStatus:"open",period:"15m"};t._data={ver:1,charts:u,indics:e,theme:"Dark"},t.checkVersion()}},{key:"load",value:function(){if(!(document.cookie.length<=0)){var e=document.cookie.indexOf("chartSettings=");if(!(e<0)){e+="chartSettings=".length;var n=document.cookie.indexOf(";",e);n<0&&(n=document.cookie.length);var r=unescape(document.cookie.substring(e,n));t._data=JSON.parse(r)}}}},{key:"save",value:function(){var e=new Date;e.setDate(e.getDate()+2),document.cookie="chartSettings="+escape(JSON.stringify(t._data))+";expires="+e.toGMTString()}}]),t}()},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",function(){return i});var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,null,[{key:"fromFloat",value:function(t,e){for(var n=t.toFixed(e),r=n.length-1;r>=0;r--){if("."===n[r])return n.substring(0,r);if("0"!==n[r])return n.substring(0,r+1)}}},{key:"formatTime",value:function(t){return t<10?"0"+t.toString():t.toString()}},{key:"isInstance",value:function(t,e){return null!==t&&void 0!==t&&t instanceof e}}]),t}()},function(t,e,n){"use strict";n.d(e,"c",function(){return h}),n.d(e,"a",function(){return d}),n.d(e,"b",function(){return f});var r=n(3);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(){c(this,t),this.getFont=function(t){return this._fonts[t]}}return function(t,e,n){e&&l(t.prototype,e),n&&l(t,n)}(t,[{key:"getColor",value:function(t){return this._colors[t]}}]),t}();h.theme_color_id=0,h.theme_font_id=0,h.Color={Positive:h.theme_color_id++,Negative:h.theme_color_id++,PositiveDark:h.theme_color_id++,NegativeDark:h.theme_color_id++,Unchanged:h.theme_color_id++,Background:h.theme_color_id++,Cursor:h.theme_color_id++,RangeMark:h.theme_color_id++,Indicator0:h.theme_color_id++,Indicator1:h.theme_color_id++,Indicator2:h.theme_color_id++,Indicator3:h.theme_color_id++,Indicator4:h.theme_color_id++,Indicator5:h.theme_color_id++,Grid0:h.theme_color_id++,Grid1:h.theme_color_id++,Grid2:h.theme_color_id++,Grid3:h.theme_color_id++,Grid4:h.theme_color_id++,TextPositive:h.theme_color_id++,TextNegative:h.theme_color_id++,Text0:h.theme_color_id++,Text1:h.theme_color_id++,Text2:h.theme_color_id++,Text3:h.theme_color_id++,Text4:h.theme_color_id++,LineColorNormal:h.theme_color_id++,LineColorSelected:h.theme_color_id++,CircleColorFill:h.theme_color_id++,CircleColorStroke:h.theme_color_id++},h.Font={Default:h.theme_font_id++};var d=function(t){function e(){var t;return c(this,e),(t=o(this,a(e).call(this)))._colors=[],r.a.instance.reverseColor?(t._colors[h.Color.Positive]="#990e0e",t._colors[h.Color.Negative]="#19b34c",t._colors[h.Color.PositiveDark]="#3b0e08",t._colors[h.Color.NegativeDark]="#004718"):(t._colors[h.Color.Positive]="#19b34c",t._colors[h.Color.Negative]="#990e0e",t._colors[h.Color.PositiveDark]="#004718",t._colors[h.Color.NegativeDark]="#3b0e08"),t._colors[h.Color.Unchanged]="#fff",t._colors[h.Color.Background]="#0a0a0a",t._colors[h.Color.Cursor]="#aaa",t._colors[h.Color.RangeMark]="#f9ee30",t._colors[h.Color.Indicator0]="#ddd",t._colors[h.Color.Indicator1]="#f9ee30",t._colors[h.Color.Indicator2]="#f600ff",t._colors[h.Color.Indicator3]="#6bf",t._colors[h.Color.Indicator4]="#a5cf81",t._colors[h.Color.Indicator5]="#e18b89",t._colors[h.Color.Grid0]="#333",t._colors[h.Color.Grid1]="#444",t._colors[h.Color.Grid2]="#666",t._colors[h.Color.Grid3]="#888",t._colors[h.Color.Grid4]="#aaa",t._colors[h.Color.TextPositive]="#1bd357",t._colors[h.Color.TextNegative]="#ff6f5e",t._colors[h.Color.Text0]="#444",t._colors[h.Color.Text1]="#666",t._colors[h.Color.Text2]="#888",t._colors[h.Color.Text3]="#aaa",t._colors[h.Color.Text4]="#ccc",t._colors[h.Color.LineColorNormal]="#a6a6a6",t._colors[h.Color.LineColorSelected]="#ffffff",t._colors[h.Color.CircleColorFill]="#000000",t._colors[h.Color.CircleColorStroke]="#ffffff",t._fonts=[],t._fonts[h.Font.Default]="12px Tahoma",t}return s(e,h),e}(),f=function(t){function e(){var t;return c(this,e),(t=o(this,a(e).call(this)))._colors=[],r.a.instance.reverseColor?(t._colors[h.Color.Positive]="#db5542",t._colors[h.Color.Negative]="#53b37b",t._colors[h.Color.PositiveDark]="#ffadaa",t._colors[h.Color.NegativeDark]="#66d293"):(t._colors[h.Color.Positive]="#53b37b",t._colors[h.Color.Negative]="#db5542",t._colors[h.Color.PositiveDark]="#66d293",t._colors[h.Color.NegativeDark]="#ffadaa"),t._colors[h.Color.Unchanged]="#fff",t._colors[h.Color.Background]="#fff",t._colors[h.Color.Cursor]="#aaa",t._colors[h.Color.RangeMark]="#f27935",t._colors[h.Color.Indicator0]="#2fd2b2",t._colors[h.Color.Indicator1]="#ffb400",t._colors[h.Color.Indicator2]="#e849b9",t._colors[h.Color.Indicator3]="#1478c8",t._colors[h.Color.Grid0]="#eee",t._colors[h.Color.Grid1]="#afb1b3",t._colors[h.Color.Grid2]="#ccc",t._colors[h.Color.Grid3]="#bbb",t._colors[h.Color.Grid4]="#aaa",t._colors[h.Color.TextPositive]="#53b37b",t._colors[h.Color.TextNegative]="#db5542",t._colors[h.Color.Text0]="#ccc",t._colors[h.Color.Text1]="#aaa",t._colors[h.Color.Text2]="#888",t._colors[h.Color.Text3]="#666",t._colors[h.Color.Text4]="#444",t._colors[h.Color.LineColorNormal]="#8c8c8c",t._colors[h.Color.LineColorSelected]="#393c40",t._colors[h.Color.CircleColorFill]="#ffffff",t._colors[h.Color.CircleColorStroke]="#393c40",t._fonts=[],t._fonts[h.Font.Default]="12px Tahoma",t}return s(e,h),e}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"firebase",function(){return l});var r=n(16),i=(n.n(r),function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}),o="[DEFAULT]",a=[],s=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=Object(r.deepCopy)(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){a.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){a=a.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=o),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==o?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;Object(r.deepExtend)(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(a.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),a=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&u("app-deleted",{name:this.name_})},t}();function u(t,e){throw c.create(t,e)}s.prototype.name&&s.prototype.options||s.prototype.delete||console.log("dc");var c=new r.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),l=function t(){var e={},n={},a={},c={__esModule:!0,initializeApp:function(t,n){if(void 0===n&&(n={}),"object"!=typeof n||null===n){var r=n;n={name:r}}var a=n;void 0===a.name&&(a.name=o);var l=a.name;"string"==typeof l&&l||u("bad-app-name",{name:l+""}),i(e,l)&&u("duplicate-app",{name:l});var h=new s(t,a,c);return e[l]=h,d(h,"create"),h},app:l,apps:null,Promise:Promise,SDK_VERSION:"4.13.0",INTERNAL:{registerService:function(t,e,i,o,d){n[t]&&u("duplicate-service",{name:t}),n[t]=e,o&&(a[t]=o,h().forEach(function(t){o("create",t)}));var f=function(e){return void 0===e&&(e=l()),"function"!=typeof e[t]&&u("invalid-app-argument",{name:t}),e[t]()};return void 0!==i&&Object(r.deepExtend)(f,i),c[t]=f,s.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,d?e:[])},f},createFirebaseNamespace:t,extendNamespace:function(t){Object(r.deepExtend)(c,t)},createSubscribe:r.createSubscribe,ErrorFactory:r.ErrorFactory,removeApp:function(t){d(e[t],"delete"),delete e[t]},factories:n,useAsService:f,Promise:Promise,deepExtend:r.deepExtend}};function l(t){return i(e,t=t||o)||u("no-app",{name:t}),e[t]}function h(){return Object.keys(e).map(function(t){return e[t]})}function d(t,e){Object.keys(n).forEach(function(n){var r=f(t,n);null!==r&&a[r]&&a[r](e,t)})}function f(t,e){if("serverAuth"===e)return null;var n=e;return t.options,n}return Object(r.patchProperty)(c,"default",c),Object.defineProperty(c,"apps",{get:h}),Object(r.patchProperty)(l,"App",s),c}();e.default=l},function(t,e,n){"use strict";n.d(e,"b",function(){return w}),n.d(e,"a",function(){return E});var r=n(0),i=n(4),o=n(2),a=n(14),s=n(15),u=n(13),c=n(28),l=n(19),h=n(29),d=n(6),f=n(22);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t}var w=function(){function t(){m(this,t)}return b(t,null,[{key:"createCandlestickDataSource",value:function(t){return new o.b(t)}},{key:"createDataSource",value:function(t,e,n){var i=r.a.instance;null===i.getCachedDataSource(e)&&i.setCachedDataSource(e,n(e)),i.setCurrentDataSource(t,e),i.updateData(t,null)}},{key:"createTableComps",value:function(t){this.createMainChartComps(t),this.displayVolume&&this.createIndicatorChartComps(t,"VOLUME"),this.createTimelineComps(t)}},{key:"createMainChartComps",value:function(t){var e=r.a.instance,n=e.getArea(t+".charts"),i=t+".main",o=i+"Range",c=new s.e(i);e.setArea(i,c),n.addArea(c);var l=new s.f(o);e.setArea(o,l),n.addArea(l);var h=new a.b(i+".main");e.setDataProvider(h.getName(),h),e.setMainIndicator(t,"MA");var d=new f.a(i);e.setRange(d.getName(),d),d.setPaddingTop(28),d.setPaddingBottom(12);var p=new u.z(i+".background");e.setPlotter(p.getName(),p),p=new u.c(i+".grid"),e.setPlotter(p.getName(),p),p=new u.f(i+".main"),e.setPlotter(p.getName(),p),p=new u.B(i+".decoration"),e.setPlotter(p.getName(),p),p=new u.A(i+".info"),e.setPlotter(p.getName(),p),p=new u.G(i+".selection"),e.setPlotter(p.getName(),p),p=new u.b(i+".tool"),e.setPlotter(p.getName(),p),p=new u.D(i+"Range.background"),e.setPlotter(p.getName(),p),p=new u.d(i+"Range.grid"),e.setPlotter(p.getName(),p),p=new u.E(i+"Range.main"),e.setPlotter(p.getName(),p),p=new u.F(i+"Range.selection"),e.setPlotter(p.getName(),p),p=new u.x(i+"Range.decoration"),e.setPlotter(p.getName(),p)}},{key:"createIndicatorChartComps",value:function(t,e){var n=r.a.instance,o=n.getArea(t+".charts"),c=t+".indic"+o.getNextRowId(),l=c+"Range",h=new s.c(c);n.setArea(c,h),o.addArea(h);var d=o.getAreaCount()>>1,f=i.a.get().charts.areaHeight;if(f.length>d){var p,_;for(_=0;_<d;_++)(p=o.getAreaAt(_<<1)).setTop(0),p.setBottom(f[_]);h.setTop(0),h.setBottom(f[d])}var g=new s.d(l);n.setArea(l,g),o.addArea(g);var v=new a.a(c+".secondary");if(n.setDataProvider(v.getName(),v),!1!==n.setIndicator(c,e)){var m=new u.z(c+".background");n.setPlotter(m.getName(),m),m=new u.c(c+".grid"),n.setPlotter(m.getName(),m),m=new u.w(c+".secondary"),n.setPlotter(m.getName(),m),m=new u.v(c+".info"),n.setPlotter(m.getName(),m),m=new u.G(c+".selection"),n.setPlotter(m.getName(),m),m=new u.D(c+"Range.background"),n.setPlotter(m.getName(),m),m=new u.E(c+"Range.main"),n.setPlotter(m.getName(),m),m=new u.F(c+"Range.selection"),n.setPlotter(m.getName(),m)}else n.removeIndicator(c)}},{key:"createTimelineComps",value:function(t){var e,n=r.a.instance,i=new c.a(t);n.setTimeline(i.getName(),i),e=new u.H(t+".timeline.background"),n.setPlotter(e.getName(),e),e=new u.I(t+".timeline.main"),n.setPlotter(e.getName(),e),e=new u.J(t+".timeline.selection"),n.setPlotter(e.getName(),e)}},{key:"createLiveOrderComps",value:function(t){var e,n=r.a.instance;e=new u.a(t+".main.background"),n.setPlotter(e.getName(),e)}},{key:"createLiveTradeComps",value:function(t){var e,n=r.a.instance;e=new u.a(t+".main.background"),n.setPlotter(e.getName(),e)}}]),t}();w.displayVolume=!0;var E=function(t){function e(){return m(this,e),_(this,g(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,w),b(e,null,[{key:"loadTemplate",value:function(t,e){var n=r.a.instance,o=i.a.get(),a=new l.a(t).getCompAt(0);n.unloadTemplate(a),this.createDataSource(t,e,this.createCandlestickDataSource);var u=new h.a(a);n.setFrame(u.getName(),u),n.setArea(u.getName(),u),u.setGridColor(d.c.Color.Grid1);var c=new s.g(t+".timeline");n.setArea(c.getName(),c),u.addArea(c),c.setDockStyle(s.a.DockStyle.Bottom),c.Measuring.addHandler(c,C.onMeasuring);var f=new h.b(t+".charts");return n.setArea(f.getName(),f),f.setDockStyle(s.a.DockStyle.Fill),u.addArea(f),this.createTableComps(t),n.setThemeName(a,o.theme),n}}]),e}(),C=function(){function t(){m(this,t)}return b(t,null,[{key:"onMeasuring",value:function(t,e){var n=e.Width;e.Height;"timeline"===t.getNameObject().getCompAt(2)&&t.setMeasuredDimension(n,22)}}]),t}()},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Control});var __WEBPACK_IMPORTED_MODULE_0__kline__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_1__kline_trade__=__webpack_require__(18),__WEBPACK_IMPORTED_MODULE_2__chart_manager__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_3__chart_settings__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_4__templates__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_5__mevent__=__webpack_require__(21),__WEBPACK_IMPORTED_MODULE_6_jquery__=__webpack_require__(23),__WEBPACK_IMPORTED_MODULE_6_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_jquery__);function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var Control=function(){function Control(){_classCallCheck(this,Control)}return _createClass(Control,null,[{key:"refreshFunction",value:function(){Control.refreshCounter++;var t=__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getLanguage();if(Control.refreshCounter>3600){var e=Number(Control.refreshCounter/3600);"en-us"===t?__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_updated_time_text").html(e.toFixed(0)+"h"):"zh-tw"===t?__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_updated_time_text").html(e.toFixed(0)+"小時"):__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_updated_time_text").html(e.toFixed(0)+"小时")}else if(Control.refreshCounter>60&&Control.refreshCounter<=3600){var n=Number(Control.refreshCounter/60);"en-us"===t?__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_updated_time_text").html(n.toFixed(0)+"m"):"zh-tw"===t?__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_updated_time_text").html(n.toFixed(0)+"分鐘"):__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_updated_time_text").html(n.toFixed(0)+"分钟")}else Control.refreshCounter<=60&&("en-us"===t?__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_updated_time_text").html(Control.refreshCounter+"s"):__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_updated_time_text").html(Control.refreshCounter+"秒"))}},{key:"clearRefreshCounter",value:function(){window.clearInterval(Control.refreshHandler),Control.refreshCounter=0,"en-us"===__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getLanguage()?__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_updated_time_text").html(Control.refreshCounter+"s"):__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_updated_time_text").html(Control.refreshCounter+"秒"),Control.refreshHandler=setInterval(Control.refreshFunction,__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.intervalTime)}},{key:"requestData",value:function(t,e){Control.AbortRequest(),window.clearTimeout(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.timer),__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.paused||(!0===t&&__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_loading").addClass("activated"),"stomp"===__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.type&&__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient?Control.requestOverStomp(e):Control.requestOverHttp(e))}},{key:"parseRequestParam",value:function(t){return JSON.parse('{"'+decodeURI(t.replace(/&/g,'","').replace(/=/g,'":"'))+'"}')}},{key:"requestOverStomp",value:function(t){if(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.socketConnected){if(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient&&1===__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient.ws.readyState)return void 0===t&&(t=__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.requestParam),void __WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient.send(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.sendPath,{},JSON.stringify(Control.parseRequestParam(t)));__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.debug&&console.log("DEBUG: stomp client is not ready yet ..."),__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.timer=setTimeout(function(){Control.requestData(!0)},1e3)}else __WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.debug&&console.log("DEBUG: socket is not coonnected")}},{key:"requestOverHttp",value:function(t){__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.debug&&console.log("DEBUG: "+__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.requestParam),__WEBPACK_IMPORTED_MODULE_6_jquery___default()(document).ready(function(){void 0===t&&(t=__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.requestParam),__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.G_HTTP_REQUEST=__WEBPACK_IMPORTED_MODULE_6_jquery___default.a.ajax({type:"GET",url:__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.url,dataType:"json",data:t,timeout:3e4,created:Date.now(),beforeSend:function(){this.range=__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.range,this.symbol=__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.symbol},success:function(t){__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.G_HTTP_REQUEST&&Control.requestSuccessHandler(t)},error:function(t,e,n){__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.debug&&console.log(t),200===t.status&&4===t.readyState||(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.timer=setTimeout(function(){Control.requestData(!0)},__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.intervalTime))},complete:function(){__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.G_HTTP_REQUEST=null}})})}},{key:"requestSuccessHandler",value:function requestSuccessHandler(res){if(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.debug&&console.log(res),res&&res.success){__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.loading=!1,__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_loading").removeClass("activated");var chart=__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getChart();chart.setTitle(),__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.data=eval(res.data);var updateDataRes=__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.chartMgr.updateData("frame0.k0",__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.data.lines);__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.requestParam=Control.setHttpRequestParam(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.symbol,__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.range,null,__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.chartMgr.getDataSource("frame0.k0").getLastDate());var intervalTime=__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.intervalTime<__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.range?__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.intervalTime:__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.range;updateDataRes?(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.data.trades&&__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.data.trades.length>0&&(__WEBPACK_IMPORTED_MODULE_1__kline_trade__.a.instance.pushTrades(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.data.trades),__WEBPACK_IMPORTED_MODULE_1__kline_trade__.a.instance.klineTradeInit=!0),__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.data.depths&&__WEBPACK_IMPORTED_MODULE_1__kline_trade__.a.instance.updateDepth(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.data.depths),Control.clearRefreshCounter(),"poll"===__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.type&&(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.timer=setTimeout(Control.TwoSecondThread,intervalTime)),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.redraw("All",!1)):"poll"===__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.type&&(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.timer=setTimeout(Control.requestData,intervalTime))}else"poll"===__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.type&&(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.timer=setTimeout(function(){Control.requestData(!0)},__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.intervalTime))}},{key:"AbortRequest",value:function(){"stomp"===__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.type&&__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient||__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.G_HTTP_REQUEST&&4!==__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.G_HTTP_REQUEST.readyState&&__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.G_HTTP_REQUEST.abort()}},{key:"TwoSecondThread",value:function(){var t=__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.chartMgr.getDataSource("frame0.k0").getLastDate();__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.requestParam=-1===t?Control.setHttpRequestParam(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.symbol,__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.range,__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.limit,null):Control.setHttpRequestParam(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.symbol,__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.range,null,t.toString()),Control.requestData()}},{key:"readCookie",value:function(){__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.get(),__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.save();var t=__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.get();__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.setChartStyle("frame0.k0",t.charts.chartStyle);var e=t.charts.symbol;__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.init||(e=__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.symbol,__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.init=!0),__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.symbol=e,Control.switchSymbolSelected(e);var n=t.charts.period;Control.switchPeriod(n),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_period_"+n+"_v a").addClass("selected"),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_period_"+n+"_h a").addClass("selected"),"close"===t.charts.indicsStatus?Control.switchIndic("off"):"open"===t.charts.indicsStatus&&Control.switchIndic("on"),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_select_main_indicator").find("a").each(function(){__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).attr("name")===t.charts.mIndic&&__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).addClass("selected")}),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_select_chart_style").find("a").each(function(){__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this)[0].innerHTML===t.charts.chartStyle&&__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).addClass("selected")}),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getChart().setMainIndicator(t.charts.mIndic),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.setThemeName("frame0",t.theme),Control.switchTools("off"),"Dark"===t.theme?Control.switchTheme("dark"):"Light"===t.theme&&Control.switchTheme("light"),Control.chartSwitchLanguage(t.language||"zh-cn")}},{key:"setHttpRequestParam",value:function(t,e,n,r,i){var o="symbol="+t+"&range="+e;switch(void 0===i&&(i="realtime"),i){case"realtime":o+=null!==n?"&limit="+n:"&since="+r;break;case"history":o+="&limit="+n,o+="&before="+r;break;default:console.log("type参数指定错误")}return o+="&type="+i,0!==__WEBPACK_IMPORTED_MODULE_1__kline_trade__.a.instance.tradeDate.getTime()&&(o+="&prevTradeTime="+__WEBPACK_IMPORTED_MODULE_1__kline_trade__.a.instance.tradeDate.getTime()),o}},{key:"refreshTemplate",value:function(){__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.chartMgr=__WEBPACK_IMPORTED_MODULE_4__templates__.a.loadTemplate("frame0.k0",""),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.redraw("All",!0)}},{key:"chartSwitchLanguage",value:function(t){var e=t.replace(/-/,"_");__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_language_switch_tmp").find("span").each(function(){var t=__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).attr("name"),n=__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).attr(e);t="."+t,__WEBPACK_IMPORTED_MODULE_6_jquery___default()(t)[0]&&__WEBPACK_IMPORTED_MODULE_6_jquery___default()(t).each(function(){__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this)[0].innerHTML=n})}),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_language_setting_div li a[name='"+t+"']").addClass("selected"),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.setLanguage(t),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getChart().setTitle(),__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.get().language=t,__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.save(),__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.onLangChange(t)}},{key:"onSize",value:function(t,e){var n=t||window.innerWidth,r=__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.showTrade?n-__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.tradeWidth:n,i=e||window.innerHeight;__WEBPACK_IMPORTED_MODULE_6_jquery___default()(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.element).css({width:n+"px",height:i+"px"});var o=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_toolbar"),a=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_toolpanel"),s=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_canvasGroup"),u=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_tabbar"),c="inline"===a[0].style.display,l="block"===u[0].style.display,h={x:0,y:0};h.w=r,h.h=29;var d={x:0};d.y=h.h+1,d.w=c?32:0,d.h=i-d.y;var f={};f.w=c?r-(d.w+1):r,f.h=l?22:-1,f.x=r-f.w,f.y=i-(f.h+1);var p={};p.x=f.x,p.y=d.y,p.w=f.w,p.h=f.y-d.y,o.css({left:h.x+"px",top:h.y+"px",width:h.w+"px",height:h.h+"px"}),c&&a.css({left:d.x+"px",top:d.y+"px",width:d.w+"px",height:d.h+"px"}),s.css({left:p.x+"px",top:p.y+"px",height:p.h+"px"});var _=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_mainCanvas")[0],g=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_overlayCanvas")[0];_.width=p.w,_.height=p.h,g.width=p.w,g.height=p.h,l&&u.css({left:f.x+"px",top:f.y+"px",width:f.w+"px",height:f.h+"px"});var v=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_parameter_settings");v.css({left:r-v.width()>>1,top:i-v.height()>>1});var m=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_loading");m.css({left:r-m.width()>>1,top:i-m.height()>>2});var y=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_dom_elem_cache"),b=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_select_theme")[0],w=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_enable_tools")[0],E=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_enable_indicator")[0],C=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_toolbar_periods_vert"),A=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_toolbar_periods_horz")[0],P=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_show_indicator")[0],T=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_show_tools")[0],k=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_toolbar_theme")[0],I=__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_dropdown_settings"),S=C[0].offsetWidth,D=S+A.offsetWidth,O=D+P.offsetWidth+4,R=O+T.offsetWidth+4,M=R+k.offsetWidth,x=I.find(".chart_dropdown_t")[0].offsetWidth+150;S+=x,O+=x,R+=x,M+=x,r<(D+=x)?y.append(A):C.after(A),r<O?(y.append(P),E.style.display=""):(I.before(P),E.style.display="none"),r<R?(y.append(T),w.style.display=""):(I.before(T),w.style.display="none"),r<M?(y.append(k),b.style.display=""):(I.before(k),b.style.display="none"),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.redraw("All",!0),__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.onResize(n,i)}},{key:"mouseWheel",value:function(t,e){return __WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.scale(e>0?1:-1),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.redraw("All",!0),!1}},{key:"switchTheme",value:function(t){if(__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_toolbar_theme a").removeClass("selected"),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_select_theme a").removeClass("selected"),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_toolbar_theme").find("a").each(function(){__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).attr("name")===t&&__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).addClass("selected")}),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_select_theme a").each(function(){__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).attr("name")===t&&__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).addClass("selected")}),__WEBPACK_IMPORTED_MODULE_6_jquery___default()(".chart_container").attr("class","chart_container "+t),__WEBPACK_IMPORTED_MODULE_6_jquery___default()(".marketName_ a").attr("class",t),"dark"===t)__WEBPACK_IMPORTED_MODULE_6_jquery___default()(".trade_container").addClass("dark").removeClass("light"),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.setThemeName("frame0","Dark"),__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.get().theme="Dark",__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.save();else if("light"===t){__WEBPACK_IMPORTED_MODULE_6_jquery___default()(".trade_container").addClass("light").removeClass("dark"),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.setThemeName("frame0","Light"),__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.get().theme="Light",__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.save()}var e={command:"set current themes"};e.content=t,__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_output_interface_text").val(JSON.stringify(e)),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_output_interface_submit").submit(),(new __WEBPACK_IMPORTED_MODULE_5__mevent__.a).raise(t),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.redraw(),__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.onThemeChange(t)}},{key:"switchTools",value:function(t){__WEBPACK_IMPORTED_MODULE_6_jquery___default()(".chart_dropdown_data").removeClass("chart_dropdown-hover"),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_toolpanel .chart_toolpanel_button").removeClass("selected"),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_enable_tools a").removeClass("selected"),"on"===t?(__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_show_tools").addClass("selected"),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_enable_tools a").each(function(){"on"===__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).attr("name")&&__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).addClass("selected")}),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_toolpanel")[0].style.display="inline",__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance._drawingTool===__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.DrawingTool.Cursor?__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_Cursor").parent().addClass("selected"):__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance._drawingTool===__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.DrawingTool.CrossCursor&&__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_CrossCursor").parent().addClass("selected")):"off"===t&&(__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_show_tools").removeClass("selected"),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_enable_tools a").each(function(){"off"===__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).attr("name")&&__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).addClass("selected")}),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_toolpanel")[0].style.display="none",__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.setRunningMode(__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance._beforeDrawingTool),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.redraw("All",!0)),__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.isSized?Control.onSize():Control.onSize(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.width,__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.height)}},{key:"switchIndic",value:function(t){if(__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_enable_indicator a").removeClass("selected"),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_enable_indicator a[name='"+t+"']").addClass("selected"),"on"===t){__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_show_indicator").addClass("selected");var e=__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.get();e.charts.indicsStatus="open",__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.save();var n=e.charts.indics[1];__WEBPACK_IMPORTED_MODULE_4__templates__.b.displayVolume,__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getChart().setIndicator(2,n),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_tabbar").find("a").each(function(){__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).attr("name")===n&&__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).addClass("selected")}),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_tabbar")[0].style.display="block"}else if("off"===t){__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_show_indicator").removeClass("selected"),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getChart().setIndicator(2,"NONE"),__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.get().charts.indicsStatus="close",__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.save(),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_tabbar")[0].style.display="none",__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_tabbar a").removeClass("selected")}__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.isSized?Control.onSize():Control.onSize(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.width,__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.height)}},{key:"switchPeriod",value:function(t){if(__WEBPACK_IMPORTED_MODULE_6_jquery___default()(".chart_container .chart_toolbar_tabgroup a").removeClass("selected"),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_toolbar_periods_vert ul a").removeClass("selected"),__WEBPACK_IMPORTED_MODULE_6_jquery___default()(".chart_container .chart_toolbar_tabgroup a").each(function(){__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).parent().attr("name")===t&&__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).addClass("selected")}),__WEBPACK_IMPORTED_MODULE_6_jquery___default()("#chart_toolbar_periods_vert ul a").each(function(){__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).parent().attr("name")===t&&__WEBPACK_IMPORTED_MODULE_6_jquery___default()(this).addClass("selected")}),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.showCursor(),Control.calcPeriodWeight(t),"line"===t)return __WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getChart().strIsLine=!0,__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.setChartStyle("frame0.k0","Line"),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getChart().setCurrentPeriod("line"),__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.get().charts.period=t,void __WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.save();__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getChart().strIsLine=!1;var e=__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.tagMapPeriod[t];__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.setChartStyle("frame0.k0",__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.get().charts.chartStyle),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getChart().setCurrentPeriod(e),__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.get().charts.period=t,__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.save()}},{key:"reset",value:function(t){__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.symbol=t,__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.showTrade&&__WEBPACK_IMPORTED_MODULE_1__kline_trade__.a.instance.reset(t)}},{key:"switchSymbolSelected",value:function(t){Control.reset(t),__WEBPACK_IMPORTED_MODULE_6_jquery___default()(".market_chooser ul a").removeClass("selected"),__WEBPACK_IMPORTED_MODULE_6_jquery___default()(".market_chooser ul a[name='"+t+"']").addClass("selected"),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getChart()._symbol=t,__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.get().charts.symbol=t,__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.save()}},{key:"switchSymbol",value:function(t){"stomp"===__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.type&&1===__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient.ws.readyState&&(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.subscribed.unsubscribe(),__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.subscribed=__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient.subscribe(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.subscribePath+"/"+t+"/"+__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.range,Control.subscribeCallback)),Control.switchSymbolSelected(t),"line"===__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.get().charts.period?(__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getChart().strIsLine=!0,__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.setChartStyle("frame0.k0","Line")):(__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getChart().strIsLine=!1,__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.setChartStyle("frame0.k0",__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.get().charts.chartStyle)),__WEBPACK_IMPORTED_MODULE_2__chart_manager__.a.instance.getChart().setSymbol(t)}},{key:"calcPeriodWeight",value:function(t){var e=t;"line"!==t&&(e=__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.periodMap[__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.tagMapPeriod[t]]);var n=__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.get().charts.period_weight;for(var r in n)n[r]>n[e]&&(n[r]-=1);n[e]=8,__WEBPACK_IMPORTED_MODULE_3__chart_settings__.a.save()}},{key:"subscribeCallback",value:function(t){Control.requestSuccessHandler(JSON.parse(t.body))}},{key:"socketConnect",value:function(){if(!__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient||!__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.socketConnected){if(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.enableSockjs){var t=new SockJS(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.url);__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient=Stomp.over(t)}else __WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient=Stomp.client(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.url);__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.socketConnected=!0}1!==__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient.ws.readyState?(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.debug||(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient.debug=null),__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient.connect({},function(){__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient.subscribe("/user"+__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.subscribePath,Control.subscribeCallback),__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.subscribed=__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient.subscribe(__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.subscribePath+"/"+__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.symbol+"/"+__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.range,Control.subscribeCallback),Control.requestData(!0)},function(){__WEBPACK_IMPORTED_MODULE_0__kline__.a.instance.stompClient.disconnect(),console.log("DEBUG: reconnect in 5 seconds ..."),setTimeout(function(){Control.socketConnect()},5e3)})):console.log("DEBUG: already connected")}}]),Control}();Control.refreshCounter=0,Control.refreshHandler=null},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(0),i=n(1),o=n(2),a=n(5);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=c(this,l(e).call(this,t))).pos={index:-1,value:-1},n.state=e.state.Hide,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,i["a"]),function(t,e,n){e&&u(t.prototype,e),n&&u(t,n)}(e,[{key:"getChartObjects",value:function(){var t=r.a.instance,e=t.getDataSource("frame0.k0");if(null===e||!a.a.isInstance(e,o.b))return null;var n=t.getTimeline("frame0.k0");if(null===n)return null;var i=t.getRange("frame0.k0.main");return null===i?null:{pMgr:t,pCDS:e,pTimeline:n,pRange:i}}},{key:"setPosXY",value:function(t,e){var n=this.getChartObjects(),r=n.pTimeline.toIndex(t),i=n.pRange.toValue(e),o=this.snapValue(r,i);null!==o&&(i=o),this.setPosIV(r,i)}},{key:"setPosXYNoSnap",value:function(t,e){var n=this.getChartObjects(),r=n.pTimeline.toIndex(t),i=n.pRange.toValue(e);this.setPosIV(r,i)}},{key:"setPosIV",value:function(t,e){this.pos={index:t,value:e}}},{key:"getPosXY",value:function(){var t=this.getChartObjects();return{x:t.pTimeline.toItemCenter(this.pos.index),y:t.pRange.toY(this.pos.value)}}},{key:"getPosIV",value:function(){return{i:this.pos.index,v:this.pos.value}}},{key:"setState",value:function(t){this.state=t}},{key:"getState",value:function(){return this.state}},{key:"isSelected",value:function(t,n){var r=this.getPosXY();return!(t<r.x-4||t>r.x+4||n<r.y-4||n>r.y+4)&&(this.setState(e.state.Highlight),!0)}},{key:"snapValue",value:function(t,e){var n=this.getChartObjects(),r=null,i=Math.floor(n.pTimeline.getFirstIndex()),o=Math.floor(n.pTimeline.getLastIndex());if(t<i||t>o)return r;var a=n.pRange.toY(e),s=n.pCDS.getDataAt(t);if(null===s||void 0===s)return r;var u=null;u=t>0?n.pCDS.getDataAt(t-1):n.pCDS.getDataAt(t);var c=n.pMgr.getChartStyle(n.pCDS.getFrameName()),l=n.pRange.toY(s.open),h=n.pRange.toY(s.high),d=n.pRange.toY(s.low),f=n.pRange.toY(s.close);"CandleStickHLC"===c&&(l=n.pRange.toY(u.close));var p=Math.abs(l-a),_=Math.abs(h-a),g=Math.abs(d-a),v=Math.abs(f-a);return p<=_&&p<=g&&p<=v&&p<6&&(r=s.open),_<=p&&_<=g&&_<=v&&_<6&&(r=s.high),g<=p&&g<=_&&g<=v&&g<6&&(r=s.low),v<=p&&v<=_&&v<=g&&v<6&&(r=s.close),r}}]),e}();d.state={Hide:0,Show:1,Highlight:2}},function(t,e,n){"use strict";n.d(e,"n",function(){return y}),n.d(e,"b",function(){return E}),n.d(e,"c",function(){return C}),n.d(e,"d",function(){return A}),n.d(e,"e",function(){return P}),n.d(e,"f",function(){return T}),n.d(e,"g",function(){return k}),n.d(e,"h",function(){return I}),n.d(e,"i",function(){return S}),n.d(e,"k",function(){return D}),n.d(e,"l",function(){return O}),n.d(e,"m",function(){return R}),n.d(e,"o",function(){return M}),n.d(e,"p",function(){return x}),n.d(e,"j",function(){return N}),n.d(e,"a",function(){return L});var r=n(0),i=n(1),o=n(11),a=n(5),s=n(2),u=n(13);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function p(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?_(t):e}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=null,n.state=e.state.BeforeDraw,n.points=[],n.step=0,n}return v(e,i["a"]),f(e,[{key:"getChartObjects",value:function(){var t=r.a.instance,e=t.getDataSource("frame0.k0");if(null===e||!a.a.isInstance(e,s.b))return null;var n=t.getTimeline("frame0.k0");if(null===n)return null;var i=t.getArea("frame0.k0.main");if(null===i)return null;var o=t.getRange("frame0.k0.main");return null===o?null:{pMgr:t,pCDS:e,pTimeline:n,pArea:i,pRange:o}}},{key:"isValidMouseXY",value:function(t,e){var n=this.getChartObjects(),r=n.pArea.getLeft(),i=n.pArea.getTop(),o=n.pArea.getRight(),a=n.pArea.getBottom();return!(t<r||t>o||e<i||e>a)}},{key:"getPlotter",value:function(){return this.drawer}},{key:"setState",value:function(t){this.state=t}},{key:"getState",value:function(){return this.state}},{key:"addPoint",value:function(t){this.points.push(t)}},{key:"getPoint",value:function(t){return this.points[t]}},{key:"acceptMouseMoveEvent",value:function(t,n){return!1!==this.isValidMouseXY(t,n)&&(this.state===e.state.BeforeDraw?this.setBeforeDrawPos(t,n):this.state===e.state.Draw?this.setDrawPos(t,n):this.state===e.state.AfterDraw&&this.setAfterDrawPos(t,n),!0)}},{key:"acceptMouseDownEvent",value:function(t,n){return!1!==this.isValidMouseXY(t,n)&&(this.state===e.state.BeforeDraw?(this.setDrawPos(t,n),this.setState(e.state.Draw)):this.state===e.state.Draw?(this.setAfterDrawPos(t,n),0===this.step&&this.setState(e.state.AfterDraw)):this.state===e.state.AfterDraw&&(e.prototype.isSelected(t,n)?(this.setDrawPos(t,n),this.setState(e.state.Draw)):(this.oldx=t,this.oldy=n)),!0)}},{key:"acceptMouseDownMoveEvent",value:function(t,n){if(!1===this.isValidMouseXY(t,n))return!1;if(this.state===e.state.Draw)this.setDrawPos(t,n);else if(this.state===e.state.AfterDraw){var r=this.getChartObjects(),i=r.pTimeline.getItemWidth();r.pRange;if(Math.abs(t-this.oldx)<i&&0===Math.abs(n-this.oldy))return!0;var o=r.pTimeline.toIndex(this.oldx),a=r.pRange.toValue(this.oldy),s=r.pTimeline.toIndex(t),u=r.pRange.toValue(n);this.oldx=t,this.oldy=n;var c=s-o,l=u-a;for(var h in this.points)this.points[h].pos.index+=c,this.points[h].pos.value+=l}return!0}},{key:"acceptMouseUpEvent",value:function(t,n){return!1!==this.isValidMouseXY(t,n)&&(this.state===e.state.Draw&&(this.setAfterDrawPos(t,n),0===this.step&&this.setState(e.state.AfterDraw),!0))}},{key:"setBeforeDrawPos",value:function(t,e){for(var n in this.points)this.points[n].setPosXY(t,e),this.points[n].setState(o.a.state.Show)}},{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].getState()===o.a.state.Highlight&&this.points[n].setPosXY(t,e)}},{key:"setAfterDrawPos",value:function(t,e){for(var n in 0!==this.step&&(this.step-=1),this.points)this.points[n].setState(o.a.state.Hide);0===this.step&&this.getChartObjects().pMgr.setNormalMode()}},{key:"isSelected",value:function(t,e){var n=!1;for(var r in this.points)if(this.points[r].isSelected(t,e)){this.points[r].setState(o.a.state.Highlight),n=!0;break}return!0===n&&(this.select(),!0)}},{key:"select",value:function(){for(var t in this.points)this.points[t].getState()===o.a.state.Hide&&this.points[t].setState(o.a.state.Show)}},{key:"unselect",value:function(){for(var t in this.points)this.points[t].getState()!==o.a.state.Hide&&this.points[t].setState(o.a.state.Hide)}},{key:"calcDistance",value:function(t,e,n){var r=t.getPosXY().x,i=t.getPosXY().y,o=e.getPosXY().x,a=e.getPosXY().y,s=n.getPosXY().x,u=n.getPosXY().y,c=r-s,l=i-u,h=o-s,d=a-u;return Math.abs(c*d-l*h)/Math.sqrt(Math.pow(o-r,2)+Math.pow(a-i,2))}},{key:"calcGap",value:function(t,e,n){var r=t.sx,i=t.sy,o=t.ex,a=t.ey,s=r-e,u=i-n,c=o-e,l=a-n;return Math.abs(s*l-u*c)/Math.sqrt(Math.pow(o-r,2)+Math.pow(a-i,2))}},{key:"isWithRect",value:function(t,e,n){var r=t.getPosXY().x,i=t.getPosXY().y,o=e.getPosXY().x,a=e.getPosXY().y,s=n.getPosXY().x,u=n.getPosXY().y;return r>o?(r+=4,o-=4):(r-=4,o+=4),i>a?(i+=4,a-=4):(i-=4,a+=4),r<=s&&o>=s&&i<=u&&a>=u||(r>=s&&o<=s&&i<=u&&a>=u||(r<=s&&o>=s&&i>=u&&a<=u||r>=s&&o<=s&&i>=u&&a<=u))}}]),e}();y.state={BeforeDraw:0,Draw:1,AfterDraw:2};var b=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).addPoint(new o.a(t)),n.addPoint(new o.a(t)),n}return v(e,y),f(e,[{key:"setBeforeDrawPos",value:function(t,n){this.step=1,l(g(e.prototype),"setBeforeDrawPos",this).call(this,t,n),this.getPoint(0).setState(o.a.state.Show),this.getPoint(1).setState(o.a.state.Highlight)}}]),e}(),w=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).addPoint(new o.a(t)),n.addPoint(new o.a(t)),n.addPoint(new o.a(t)),n}return v(e,y),f(e,[{key:"setBeforeDrawPos",value:function(t,n){this.step=2,l(g(e.prototype),"setBeforeDrawPos",this).call(this,t,n),this.getPoint(0).setState(o.a.state.Show),this.getPoint(1).setState(o.a.state.Show),this.getPoint(2).setState(o.a.state.Highlight)}},{key:"setAfterDrawPos",value:function(t,e){if(0!==this.step&&(this.step-=1),0===this.step)for(var n in this.points)this.points[n].setState(o.a.state.Hide);else this.getPoint(0).setState(o.a.state.Show),this.getPoint(1).setState(o.a.state.Highlight),this.getPoint(2).setState(o.a.state.Show);0===this.step&&this.getChartObjects().pMgr.setNormalMode()}}]),e}(),E=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.h(t,_(_(n))),n}return v(e,b),f(e,[{key:"isSelected",value:function(t,n){if(!0===l(g(e.prototype),"isSelected",this).call(this,t,n))return!0;new o.a("frame0.k0").setPosXY(t,n);this.getPoint(0).getPosXY().x;for(var r=this.getPoint(0).getPosXY().y,i=(this.getPoint(1).getPosXY().x,this.getPoint(1).getPosXY().y),a=[100,87.5,75,62.5,50,37.5,25,12.5,0],s=0;s<a.length;s++){var u=r+(100-a[s])/100*(i-r);if(u<n+4&&u>n-4)return this.select(),!0}return!1}}]),e}(),C=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.i(t,_(_(n))),n}return v(e,w),f(e,[{key:"isSelected",value:function(t,n){if(!0===l(g(e.prototype),"isSelected",this).call(this,t,n))return!0;var r=this.getPoint(0).getPosXY().x,i=this.getPoint(0).getPosXY().y,o=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,s=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,c={sx:r,sy:i,ex:s,ey:u},h={sx:o,sy:a,ex:r-(r-o+(r-s)),ey:i-(i-a+(i-u))};return!(this.calcGap(c,t,n)>4&&this.calcGap(h,t,n)>4)}}]),e}(),A=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.j(t,_(_(n))),n}return v(e,w),f(e,[{key:"isSelected",value:function(t,n){if(!0===l(g(e.prototype),"isSelected",this).call(this,t,n))return!0;var r=this.getPoint(0).getPosXY().x,i=this.getPoint(0).getPosXY().y,o=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,s=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,c={sx:r,sy:i,ex:s,ey:u},h={sx:o,sy:a,ex:r-(r-o+(r-s)),ey:i-(i-a+(i-u))};return(c.ex>c.sx&&t>c.sx-4||c.ex<c.sx&&t<c.sx+4||h.ex>h.sx&&t>h.sx-4||h.ex<h.sx&&t<h.sx+4)&&(!(this.calcGap(c,t,n)>4&&this.calcGap(h,t,n)>4)&&(this.select(),!0))}}]),e}(),P=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.k(t,_(_(n))),n}return v(e,b),f(e,[{key:"isSelected",value:function(t,n){if(!0===l(g(e.prototype),"isSelected",this).call(this,t,n))return!0;var r=new o.a("frame0.k0");r.setPosXY(t,n);for(var i=this.getPoint(0).getPosXY().x,a=this.getPoint(0).getPosXY().y,s=this.getPoint(1).getPosXY().x,u=this.getPoint(1).getPosXY().y,c=this.getChartObjects(),h={left:c.pArea.getLeft(),top:c.pArea.getTop(),right:c.pArea.getRight(),bottom:c.pArea.getBottom()},d=[0,38.2,50,61.8],f=0;f<d.length;f++){var p={x:i,y:a},_={x:s,y:a+(100-d[f])/100*(u-a)},v=this.getRectCrossPt(h,p,_),m=Math.pow(v[0].x-i,2)+Math.pow(v[0].y-a,2)>Math.pow(v[0].x-s,2)+Math.pow(v[0].y-u,2)?{x:v[0].x,y:v[0].y}:{x:v[1].x,y:v[1].y};if(!(m.x>i&&t<i)&&!(m.x<i&&t>i)){var y=new o.a("frame0.k0");y.setPosXY(i,a);var b=new o.a("frame0.k0");if(b.setPosXY(m.x,m.y),!(this.calcDistance(y,b,r)>4))return this.select(),!0}}return!1}}]),e}(),T=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.l(t,_(_(n))),n}return v(e,b),f(e,[{key:"isSelected",value:function(t,n){if(!0===l(g(e.prototype),"isSelected",this).call(this,t,n))return!0;new o.a("frame0.k0").setPosXY(t,n);this.getPoint(0).getPosXY().x;for(var r=this.getPoint(0).getPosXY().y,i=(this.getPoint(1).getPosXY().x,this.getPoint(1).getPosXY().y),a=[100,78.6,61.8,50,38.2,23.6,0],s=0;s<a.length;s++){var u=r+(100-a[s])/100*(i-r);if(u<n+4&&u>n-4)return this.select(),!0}return!1}}]),e}(),k=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.m(t,_(_(n))),n}return v(e,b),f(e,[{key:"setDrawPos",value:function(t,e){if(this.points[0].getState()===o.a.state.Highlight)return this.points[0].setPosXY(t,e),void this.points[1].setPosXYNoSnap(this.points[1].getPosXY().x,this.points[0].getPosXY().y);this.points[1].getState()===o.a.state.Highlight&&(this.points[1].setPosXY(t,e),this.points[0].setPosXYNoSnap(this.points[0].getPosXY().x,this.points[1].getPosXY().y))}},{key:"isSelected",value:function(t,n){if(!0===l(g(e.prototype),"isSelected",this).call(this,t,n))return!0;new o.a("frame0.k0").setPosXY(t,n);var r=this.getPoint(0).getPosXY().y,i=this.getPoint(0).getPosXY().x,a=this.getPoint(1).getPosXY().x;return!(n>r+4||n<r-4)&&(!(a>i&&t<i-4)&&(!(a<i&&t>i+4)&&(this.select(),!0)))}}]),e}(),I=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.n(t,_(_(n))),n}return v(e,b),f(e,[{key:"setDrawPos",value:function(t,e){if(this.points[0].getState()===o.a.state.Highlight)return this.points[0].setPosXY(t,e),void this.points[1].setPosXYNoSnap(this.points[1].getPosXY().x,this.points[0].getPosXY().y);this.points[1].getState()===o.a.state.Highlight&&(this.points[1].setPosXY(t,e),this.points[0].setPosXYNoSnap(this.points[0].getPosXY().x,this.points[1].getPosXY().y))}},{key:"isSelected",value:function(t,n){if(!0===l(g(e.prototype),"isSelected",this).call(this,t,n))return!0;new o.a("frame0.k0").setPosXY(t,n);var r=this.getPoint(0).getPosXY().y,i=this.getPoint(0).getPosXY().x,a=this.getPoint(1).getPosXY().x;return!(n>r+4||n<r-4)&&(!(i>a&&(t>i+4||t<a-4))&&(!(i<a&&(t<i-4||t>a+4))&&(this.select(),!0)))}}]),e}(),S=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.o(t,_(_(n))),n}return v(e,b),f(e,[{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].setPosXY(t,e)}},{key:"isSelected",value:function(t,n){if(!0===l(g(e.prototype),"isSelected",this).call(this,t,n))return!0;new o.a("frame0.k0").setPosXY(t,n);var r=this.getPoint(0).getPosXY().y;return!(n>r+4||n<r-4)&&(this.select(),!0)}}]),e}(),D=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.q(t,_(_(n))),n}return v(e,b),f(e,[{key:"isSelected",value:function(t,n){if(!0===l(g(e.prototype),"isSelected",this).call(this,t,n))return!0;var r=new o.a("frame0.k0");r.setPosXY(t,n);var i=this.getPoint(0).getPosXY().x,a=this.getPoint(1).getPosXY().x;return!(a>i&&t<i-4)&&(!(a<i&&t>i+4)&&(this.calcDistance(this.getPoint(0),this.getPoint(1),r)<4&&(this.select(),!0)))}}]),e}(),O=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.r(t,_(_(n))),n}return v(e,b),f(e,[{key:"isSelected",value:function(t,n){if(!0===l(g(e.prototype),"isSelected",this).call(this,t,n))return!0;var r=new o.a("frame0.k0");return r.setPosXY(t,n),!1!==this.isWithRect(this.getPoint(0),this.getPoint(1),r)&&(this.calcDistance(this.getPoint(0),this.getPoint(1),r)<4&&(this.select(),!0))}}]),e}(),R=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.s(t,_(_(n))),n}return v(e,b),f(e,[{key:"isSelected",value:function(t,n){if(!0===l(g(e.prototype),"isSelected",this).call(this,t,n))return!0;var r=new o.a("frame0.k0");return r.setPosXY(t,n),this.calcDistance(this.getPoint(0),this.getPoint(1),r)<4&&(this.select(),!0)}}]),e}(),M=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.t(t,_(_(n))),n}return v(e,w),f(e,[{key:"isSelected",value:function(t,n){if(!0===l(g(e.prototype),"isSelected",this).call(this,t,n))return!0;this.getChartObjects();var r=this.getPoint(0).getPosXY().x,i=this.getPoint(0).getPosXY().y,o=this.getPoint(1).getPosXY().x,a=this.getPoint(1).getPosXY().y,s=this.getPoint(2).getPosXY().x,u=this.getPoint(2).getPosXY().y,c=r-(r-o+(r-s)),h=i-(i-a+(i-u)),d={sx:r,sy:i,ex:s,ey:u},f={sx:o,sy:a,ex:c,ey:h},p=o-r,_=a-i,v=c-s,m=h-u,y={sx:Math.abs(p-r),sy:Math.abs(_-i),ex:Math.abs(v-s),ey:Math.abs(m-u)};return!(this.calcGap(d,t,n)>4&&this.calcGap(f,t,n)>4&&this.calcGap(y,t,n)>4)&&(this.select(),!0)}}]),e}(),x=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.u(t,_(_(n))),n}return v(e,b),f(e,[{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].setPosXY(t,e)}},{key:"isSelected",value:function(t,n){if(!0===l(g(e.prototype),"isSelected",this).call(this,t,n))return!0;new o.a("frame0.k0").setPosXY(t,n);var r=this.getPoint(0).getPosXY().x;return!(t>r+4||t<r-4)&&(this.select(),!0)}}]),e}(),N=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.p(t,_(_(n))),n}return v(e,O),f(e,[{key:"setDrawPos",value:function(t,e){for(var n in this.points)this.points[n].setPosXY(t,e)}},{key:"isSelected",value:function(t,n){if(!0===l(g(e.prototype),"isSelected",this).call(this,t,n))return!0;new o.a("frame0.k0").setPosXY(t,n);var r=this.getPoint(0).getPosXY().x,i=this.getPoint(0).getPosXY().y;this.getPoint(1).getPosXY().x,this.getPoint(1).getPosXY().y;return!(t<r-4)&&(!(n>=i+4||n<=i-4)&&(this.select(),!0))}}]),e}(),L=function(t){function e(t){var n;return h(this,e),(n=p(this,g(e).call(this,t))).drawer=new u.g(t,_(_(n))),n}return v(e,O),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return E}),n.d(e,"z",function(){return C}),n.d(e,"D",function(){return A}),n.d(e,"H",function(){return P}),n.d(e,"c",function(){return T}),n.d(e,"f",function(){return k}),n.d(e,"e",function(){return I}),n.d(e,"C",function(){return S}),n.d(e,"A",function(){return D}),n.d(e,"w",function(){return O}),n.d(e,"v",function(){return R}),n.d(e,"B",function(){return M}),n.d(e,"I",function(){return x}),n.d(e,"E",function(){return N}),n.d(e,"d",function(){return L}),n.d(e,"y",function(){return U}),n.d(e,"x",function(){return j}),n.d(e,"G",function(){return B}),n.d(e,"J",function(){return F}),n.d(e,"F",function(){return W}),n.d(e,"s",function(){return G}),n.d(e,"r",function(){return K}),n.d(e,"q",function(){return Y}),n.d(e,"g",function(){return H}),n.d(e,"o",function(){return z}),n.d(e,"m",function(){return q}),n.d(e,"n",function(){return X}),n.d(e,"u",function(){return Q}),n.d(e,"p",function(){return Z}),n.d(e,"i",function(){return $}),n.d(e,"j",function(){return tt}),n.d(e,"t",function(){return et}),n.d(e,"l",function(){return rt}),n.d(e,"h",function(){return it}),n.d(e,"k",function(){return ot}),n.d(e,"b",function(){return at});var r=n(3),i=n(1),o=n(0),a=n(5),s=n(11),u=n(20),c=n(6),l=n(14),h=n(2),d=n(12);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&_(t.prototype,e),n&&_(t,n),t}function v(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var w=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,i["a"]),g(e,null,[{key:"drawLine",value:function(t,e,n,r,i){t.beginPath(),t.moveTo(.5+(e<<0),.5+(n<<0)),t.lineTo(.5+(r<<0),.5+(i<<0)),t.stroke()}},{key:"drawLines",value:function(t,n){var r,i=n.length;for(t.beginPath(),t.moveTo(n[0].x,n[0].y),r=1;r<i;r++)t.lineTo(n[r].x,n[r].y);if(e.isChrome)for(t.moveTo(n[0].x,n[0].y),r=1;r<i;r++)t.lineTo(n[r].x,n[r].y);t.stroke()}},{key:"drawDashedLine",value:function(t,e,n,r,i,o,a){o<2&&(o=2);var s=r-e,u=i-n;if(t.beginPath(),0===u){for(var c=s/o+.5<<0,l=0;l<c;l++)t.rect(e,n,a,1),e+=o;t.fill()}else{for(var h=Math.sqrt(s*s+u*u)/o+.5<<0,d=(s/=h)*a/o,f=(u/=h)*a/o,p=0;p<h;p++)t.moveTo(e+.5,n+.5),t.lineTo(e+.5+d,n+.5+f),e+=s,n+=u;t.stroke()}}},{key:"createHorzDashedLine",value:function(t,e,n,r,i,o){i<2&&(i=2);for(var a=(n-e)/i+.5<<0,s=0;s<a;s++)t.rect(e,r,o,1),e+=i}},{key:"createRectangles",value:function(t,e){t.beginPath();var n,r,i=e.length;for(r=0;r<i;r++)n=e[r],t.rect(n.x,n.y,n.w,n.h)}},{key:"createPolygon",value:function(t,e){t.beginPath(),t.moveTo(e[0].x+.5,e[0].y+.5);var n,r=e.length;for(n=1;n<r;n++)t.lineTo(e[n].x+.5,e[n].y+.5);t.closePath()}},{key:"drawString",value:function(t,e,n){var r=t.measureText(e).width;return!(n.w<r)&&(t.fillText(e,n.x,n.y),n.x+=r,n.w-=r,!0)}}]),e}();w.isChrome=null!==navigator.userAgent.toLowerCase().match(/chrome/);var E=function(t){function e(t){var n;return p(this,e),(n=v(this,m(e).call(this,t)))._color=c.c.Color.Background,n}return y(e,w),g(e,[{key:"getColor",value:function(){return this._color}},{key:"setColor",value:function(t){this._color=t}},{key:"Draw",value:function(t){var e=o.a.instance,n=e.getArea(this.getAreaName()),r=e.getTheme(this.getFrameName());t.fillStyle=r.getColor(this._color),t.fillRect(n.getLeft(),n.getTop(),n.getWidth(),n.getHeight())}}]),e}(),C=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,E),g(e,[{key:"Draw",value:function(t){var e=o.a.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getRange(this.getAreaName()),a=e.getTheme(this.getFrameName()),s=n.getRect();if(!n.isChanged()&&!r.isUpdated()&&!i.isUpdated()){var u=r.getFirstIndex(),c=r.getLastIndex()-2,l=Math.max(u,c);s.X=r.toColumnLeft(l),s.Width=n.getRight()-s.X}t.fillStyle=a.getColor(this._color),t.fillRect(s.X,s.Y,s.Width,s.Height)}}]),e}(),A=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,E),g(e,[{key:"Draw",value:function(t){var e=o.a.instance,n=this.getAreaName(),r=e.getArea(n),i=e.getRange(n.substring(0,n.lastIndexOf("Range")));if("main"===i.getNameObject().getCompAt(2)||r.isChanged()||i.isUpdated()){var a=e.getTheme(this.getFrameName());t.fillStyle=a.getColor(this._color),t.fillRect(r.getLeft(),r.getTop(),r.getWidth(),r.getHeight())}}}]),e}(),P=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,E),g(e,[{key:"Draw",value:function(t){var e=o.a.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName());if(n.isChanged()||r.isUpdated()){var i=e.getTheme(this.getFrameName());t.fillStyle=i.getColor(this._color),t.fillRect(n.getLeft(),n.getTop(),n.getWidth(),n.getHeight())}}}]),e}(),T=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,i["a"]),g(e,[{key:"Draw",value:function(t){var e=o.a.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getRange(this.getAreaName()),a=!1;if(!n.isChanged()&&!r.isUpdated()&&!i.isUpdated()){var s=r.getFirstIndex(),u=r.getLastIndex(),l=Math.max(s,u-2),h=r.toColumnLeft(l);t.save(),t.rect(h,n.getTop(),n.getRight()-h,n.getHeight()),t.clip(),a=!0}var d=e.getTheme(this.getFrameName());t.fillStyle=d.getColor(c.c.Color.Grid0),t.beginPath();var f=4,p=1;w.isChrome&&(f=4,p=1);var _=i.getGradations();for(var g in _)w.createHorzDashedLine(t,n.getLeft(),n.getRight(),i.toY(_[g]),f,p);t.fill(),a&&t.restore()}}]),e}(),k=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,i["a"]),g(e,[{key:"Draw",value:function(t){var e=o.a.instance,n=e.getDataSource(this.getDataSourceName());if(!(n.getDataCount()<1)){var r=e.getArea(this.getAreaName()),i=e.getTimeline(this.getDataSourceName()),s=e.getRange(this.getAreaName());if(0!==s.getRange()){var u,l=e.getTheme(this.getFrameName()),h=a.a.isInstance(l,c.a),d=i.getFirstIndex(),f=i.getLastIndex();u=r.isChanged()||i.isUpdated()||s.isUpdated()?d:Math.max(d,f-2);for(var p=i.getColumnWidth(),_=i.getItemWidth(),g=i.toItemLeft(u),v=i.toItemCenter(u),m=[],y=[],b=[],E=[],C=u;C<f;C++){var A=n.getDataAt(C),P=s.toY(A.high),T=s.toY(A.low),k=A.open,I=A.close;if(I>k){var S=s.toY(I),D=s.toY(k),O=Math.max(D-S,1);O>1&&_>1&&h?m.push({x:g+.5,y:S+.5,w:_-1,h:O-1}):y.push({x:g,y:S,w:Math.max(_,1),h:Math.max(O,1)}),A.high>I&&(P=Math.min(P,S-1),y.push({x:v,y:P,w:1,h:S-P})),k>A.low&&(T=Math.max(T,D+1),y.push({x:v,y:D,w:1,h:T-D}))}else if(I===k){var R=s.toY(I);b.push({x:g,y:R,w:Math.max(_,1),h:1}),A.high>I&&(P=Math.min(P,R-1)),k>A.low&&(T=Math.max(T,R+1)),P<T&&b.push({x:v,y:P,w:1,h:T-P})}else{var M=s.toY(k),x=s.toY(I),N=Math.max(x-M,1);E.push({x:g,y:M,w:Math.max(_,1),h:Math.max(N,1)}),A.high>k&&(P=Math.min(P,M-1)),I>A.low&&(T=Math.max(T,x+1)),P<T&&E.push({x:v,y:P,w:1,h:T-P})}g+=p,v+=p}m.length>0&&(t.strokeStyle=l.getColor(c.c.Color.Positive),w.createRectangles(t,m),t.stroke()),y.length>0&&(t.fillStyle=l.getColor(c.c.Color.Positive),w.createRectangles(t,y),t.fill()),b.length>0&&(t.fillStyle=l.getColor(c.c.Color.Negative),w.createRectangles(t,b),t.fill()),E.length>0&&(t.fillStyle=l.getColor(c.c.Color.Negative),w.createRectangles(t,E),t.fill())}}}}]),e}(),I=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,w),g(e,[{key:"Draw",value:function(t){var e=o.a.instance,n=e.getDataSource(this.getDataSourceName());if(a.a.isInstance(n,h.b)&&!(n.getDataCount()<1)){var r=e.getArea(this.getAreaName()),i=e.getTimeline(this.getDataSourceName()),s=e.getRange(this.getAreaName());if(0!==s.getRange()){var u,l=e.getTheme(this.getFrameName()),d=a.a.isInstance(l,c.a),f=i.getFirstIndex(),p=i.getLastIndex();u=r.isChanged()||i.isUpdated()||s.isUpdated()?f:Math.max(f,p-2);for(var _=i.getColumnWidth(),g=i.getItemWidth(),v=i.toItemLeft(u),m=i.toItemCenter(u),y=[],b=[],E=[],C=[],A=u;A<p;A++){var P=n.getDataAt(A),T=s.toY(P.high),k=s.toY(P.low),I=P.open;A>0&&(I=n.getDataAt(A-1).close);var S=P.close;if(S>I){var D=s.toY(S),O=s.toY(I),R=Math.max(O-D,1);R>1&&g>1&&d?y.push({x:v+.5,y:D+.5,w:g-1,h:R-1}):b.push({x:v,y:D,w:Math.max(g,1),h:Math.max(R,1)}),P.high>S&&(T=Math.min(T,D-1),b.push({x:m,y:T,w:1,h:D-T})),I>P.low&&(k=Math.max(k,O+1),b.push({x:m,y:O,w:1,h:k-O}))}else if(S===I){var M=s.toY(S);E.push({x:v,y:M,w:Math.max(g,1),h:1}),P.high>S&&(T=Math.min(T,M-1)),I>P.low&&(k=Math.max(k,M+1)),T<k&&E.push({x:m,y:T,w:1,h:k-T})}else{var x=s.toY(I),N=s.toY(S),L=Math.max(N-x,1);C.push({x:v,y:x,w:Math.max(g,1),h:Math.max(L,1)}),P.high>I&&(T=Math.min(T,x-1)),S>P.low&&(k=Math.max(k,N+1)),T<k&&C.push({x:m,y:T,w:1,h:k-T})}v+=_,m+=_}y.length>0&&(t.strokeStyle=l.getColor(c.c.Color.Positive),w.createRectangles(t,y),t.stroke()),b.length>0&&(t.fillStyle=l.getColor(c.c.Color.Positive),w.createRectangles(t,b),t.fill()),E.length>0&&(t.fillStyle=l.getColor(c.c.Color.Negative),w.createRectangles(t,E),t.fill()),C.length>0&&(t.fillStyle=l.getColor(c.c.Color.Negative),w.createRectangles(t,C),t.fill())}}}}]),e}(),S=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,w),g(e,[{key:"Draw",value:function(t){var e=o.a.instance,n=e.getDataSource(this.getDataSourceName());if(a.a.isInstance(n,h.b)&&!(n.getDataCount()<1)){var r=e.getArea(this.getAreaName()),i=e.getTimeline(this.getDataSourceName()),s=e.getRange(this.getAreaName());if(0!==s.getRange()){var u,l=e.getTheme(this.getFrameName()),d=i.getFirstIndex(),f=i.getLastIndex();u=r.isChanged()||i.isUpdated()||s.isUpdated()?d:Math.max(d,f-2);for(var p=i.getColumnWidth(),_=i.getItemWidth()>>1,g=i.toItemLeft(u),v=i.toItemCenter(u),m=(i.getItemWidth(),[]),y=[],b=[],E=u;E<f;E++){var C=n.getDataAt(E),A=s.toY(C.high),P=s.toY(C.low),T=Math.max(P-A,1);if(C.close>C.open){var k=s.toY(C.close),I=s.toY(C.open);m.push({x:v,y:A,w:1,h:T}),m.push({x:g,y:k,w:_,h:1}),m.push({x:v,y:I,w:_,h:1})}else if(C.close===C.open){var S=s.toY(C.close);y.push({x:v,y:A,w:1,h:T}),y.push({x:g,y:S,w:_,h:1}),y.push({x:v,y:S,w:_,h:1})}else{var D=s.toY(C.open),O=s.toY(C.close);b.push({x:v,y:A,w:1,h:T}),b.push({x:g,y:D,w:_,h:1}),b.push({x:v,y:O,w:_,h:1})}g+=p,v+=p,p}m.length>0&&(t.fillStyle=l.getColor(c.c.Color.Positive),w.createRectangles(t,m),t.fill()),y.length>0&&(t.fillStyle=l.getColor(c.c.Color.Negative),w.createRectangles(t,y),t.fill()),b.length>0&&(t.fillStyle=l.getColor(c.c.Color.Negative),w.createRectangles(t,b),t.fill())}}}}]),e}(),D=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,w),g(e,[{key:"Draw",value:function(t){var e=o.a.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getDataSource(this.getDataSourceName()),s=e.getTheme(this.getFrameName());t.font=s.getFont(c.c.Font.Default),t.textAlign="left",t.textBaseline="top",t.fillStyle=s.getColor(c.c.Color.Text4);var u={x:n.getLeft()+4,y:n.getTop()+2,w:n.getWidth()-8,h:20},l=r.getSelectedIndex();if(!(l<0)){var h,d=i.getDataAt(l),f=i.getDecimalDigits(),p=new Date(d.date),_=(p.getFullYear(),a.a.formatTime(p.getMonth()+1),a.a.formatTime(p.getDate()),a.a.formatTime(p.getHours()),a.a.formatTime(p.getMinutes()),e.getLanguage());if("zh-cn"===_){if(!w.drawString(t,"  开: "+d.open.toFixed(f),u))return;if(!w.drawString(t,"  高: "+d.high.toFixed(f),u))return;if(!w.drawString(t,"  低: "+d.low.toFixed(f),u))return;if(!w.drawString(t,"  收: "+d.close.toFixed(f),u))return}else if("en-us"===_){if(!w.drawString(t,"  O: "+d.open.toFixed(f),u))return;if(!w.drawString(t,"  H: "+d.high.toFixed(f),u))return;if(!w.drawString(t,"  L: "+d.low.toFixed(f),u))return;if(!w.drawString(t,"  C: "+d.close.toFixed(f),u))return}else if("zh-tw"===_){if(!w.drawString(t,"  開: "+d.open.toFixed(f),u))return;if(!w.drawString(t,"  高: "+d.high.toFixed(f),u))return;if(!w.drawString(t,"  低: "+d.low.toFixed(f),u))return;if(!w.drawString(t,"  收: "+d.close.toFixed(f),u))return}if(l>0){if("zh-cn"===_){if(!w.drawString(t,"  涨幅: ",u))return}else if("en-us"===_){if(!w.drawString(t,"  CHANGE: ",u))return}else if("zh-tw"===_&&!w.drawString(t,"  漲幅: ",u))return;var g,v=i.getDataAt(l-1);if((g=(d.close-v.close)/v.close*100?(d.close-v.close)/v.close*100:0)>=0?(g=" "+g.toFixed(2),t.fillStyle=s.getColor(c.c.Color.TextPositive)):(g=g.toFixed(2),t.fillStyle=s.getColor(c.c.Color.TextNegative)),!w.drawString(t,g,u))return;if(t.fillStyle=s.getColor(c.c.Color.Text4),!w.drawString(t," %",u))return}if(h=(d.high-d.low)/d.low*100?(d.high-d.low)/d.low*100:0,"zh-cn"===_){if(!w.drawString(t,"  振幅: "+h.toFixed(2)+" %",u))return}else if("en-us"===_){if(!w.drawString(t,"  AMPLITUDE: "+h.toFixed(2)+" %",u))return}else if("zh-tw"===_&&!w.drawString(t,"  振幅: "+h.toFixed(2)+" %",u))return;var m=e.getDataProvider(this.getAreaName()+".secondary");if(void 0!==m){var y,b=m.getIndicator(),E=b.getOutputCount();for(y=0;y<E;y++){var C=b.getOutputAt(y),A=C.execute(l);if(!isNaN(A)){var P="  "+C.getName()+": "+A.toFixed(f),T=C.getColor();if(void 0===T&&(T=c.c.Color.Indicator0+y),t.fillStyle=s.getColor(T),!w.drawString(t,P,u))return}}}}}}]),e}(),O=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,i["a"]),g(e,[{key:"Draw",value:function(t){var e=o.a.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getRange(this.getAreaName());if(0!==i.getRange()){var s=e.getDataProvider(this.getName());if(a.a.isInstance(s,l.a)){var h,d=e.getTheme(this.getFrameName()),f=r.getColumnWidth(),p=r.getFirstIndex(),_=r.getLastIndex();h=n.isChanged()||r.isUpdated()||i.isUpdated()?p:Math.max(p,_-2);var g,v,m=s.getIndicator(),y=m.getOutputCount();for(v=0;v<y;v++){var b=(g=m.getOutputAt(v)).getStyle();b===u.y.outputStyle.VolumeStick?this.drawVolumeStick(t,d,e.getDataSource(this.getDataSourceName()),h,_,r.toItemLeft(h),f,r.getItemWidth(),i):b===u.y.outputStyle.MACDStick?this.drawMACDStick(t,d,g,h,_,r.toItemLeft(h),f,r.getItemWidth(),i):b===u.y.outputStyle.SARPoint&&this.drawSARPoint(t,d,g,h,_,r.toItemCenter(h),f,r.getItemWidth(),i)}var E=r.toColumnLeft(h),C=r.toItemCenter(h);for(t.save(),t.rect(E,n.getTop(),n.getRight()-E,n.getHeight()),t.clip(),t.translate(.5,.5),v=0;v<y;v++){var A=C;if((g=m.getOutputAt(v)).getStyle()===u.y.outputStyle.Line){var P=void 0,T=[];h>p&&(P=g.execute(h-1),!1===isNaN(P)&&T.push({x:A-f,y:i.toY(P)}));for(var k=h;k<_;k++,A+=f)P=g.execute(k),!1===isNaN(P)&&T.push({x:A,y:i.toY(P)});if(T.length>0){var I=g.getColor();void 0===I&&(I=c.c.Color.Indicator0+v),t.strokeStyle=d.getColor(I),w.drawLines(t,T)}}}t.restore()}}}},{key:"drawVolumeStick",value:function(t,e,n,r,i,o,s,u,l){for(var h=a.a.isInstance(e,c.a),d=o,f=(l.toY(0),[]),p=[],_=[],g=r;g<i;g++){var v=n.getDataAt(g),m=l.toY(v.volume),y=l.toHeight(v.volume);v.close>v.open?y>1&&u>1&&h?f.push({x:d+.5,y:m+.5,w:u-1,h:y-1}):p.push({x:d,y:m,w:Math.max(u,1),h:Math.max(y,1)}):v.close===v.open&&g>0&&v.close>=n.getDataAt(g-1).close?y>1&&u>1&&h?f.push({x:d+.5,y:m+.5,w:u-1,h:y-1}):p.push({x:d,y:m,w:Math.max(u,1),h:Math.max(y,1)}):_.push({x:d,y:m,w:Math.max(u,1),h:Math.max(y,1)}),d+=s}f.length>0&&(t.strokeStyle=e.getColor(c.c.Color.Positive),w.createRectangles(t,f),t.stroke()),p.length>0&&(t.fillStyle=e.getColor(c.c.Color.Positive),w.createRectangles(t,p),t.fill()),_.length>0&&(t.fillStyle=e.getColor(c.c.Color.Negative),w.createRectangles(t,_),t.fill())}},{key:"drawMACDStick",value:function(t,e,n,r,i,o,a,s,u){for(var l=o,h=u.toY(0),d=[],f=[],p=[],_=[],g=r>0?n.execute(r-1):NaN,v=r;v<i;v++){var m=n.execute(v);if(m>=0){var y=u.toHeight(m);(0===v||m>=g)&&y>1&&s>1?d.push({x:l+.5,y:h-y+.5,w:s-1,h:y-1}):p.push({x:l,y:h-y,w:Math.max(s,1),h:Math.max(y,1)})}else{var b=u.toHeight(-m);(0===v||m>=g)&&b>1&&s>1?f.push({x:l+.5,y:h+.5,w:s-1,h:b-1}):_.push({x:l,y:h,w:Math.max(s,1),h:Math.max(b,1)})}g=m,l+=a}d.length>0&&(t.strokeStyle=e.getColor(c.c.Color.Positive),w.createRectangles(t,d),t.stroke()),f.length>0&&(t.strokeStyle=e.getColor(c.c.Color.Negative),w.createRectangles(t,f),t.stroke()),p.length>0&&(t.fillStyle=e.getColor(c.c.Color.Positive),w.createRectangles(t,p),t.fill()),_.length>0&&(t.fillStyle=e.getColor(c.c.Color.Negative),w.createRectangles(t,_),t.fill())}},{key:"drawSARPoint",value:function(t,e,n,r,i,o,a,s,u){var l=s>>1;l<.5&&(l=.5),l>4&&(l=4);var h=o,d=h+l,f=2*Math.PI;t.save(),t.translate(.5,.5),t.strokeStyle=e.getColor(c.c.Color.Indicator3),t.beginPath();for(var p=r;p<i;p++){var _=u.toY(n.execute(p));t.moveTo(d,_),t.arc(h,_,l,0,f),h+=a,d+=a}t.stroke(),t.restore()}}]),e}(),R=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,w),g(e,[{key:"Draw",value:function(t){var e=o.a.instance,n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName()),i=e.getDataProvider(this.getAreaName()+".secondary"),a=e.getTheme(this.getFrameName());t.font=a.getFont(c.c.Font.Default),t.textAlign="left",t.textBaseline="top",t.fillStyle=a.getColor(c.c.Color.Text4);var s,u={x:n.getLeft()+4,y:n.getTop()+2,w:n.getWidth()-8,h:20},l=i.getIndicator();switch(l.getParameterCount()){case 0:s=l.getName();break;case 1:s=l.getName()+"("+l.getParameterAt(0).getValue()+")";break;case 2:s=l.getName()+"("+l.getParameterAt(0).getValue()+","+l.getParameterAt(1).getValue()+")";break;case 3:s=l.getName()+"("+l.getParameterAt(0).getValue()+","+l.getParameterAt(1).getValue()+","+l.getParameterAt(2).getValue()+")";break;case 4:s=l.getName()+"("+l.getParameterAt(0).getValue()+","+l.getParameterAt(1).getValue()+","+l.getParameterAt(2).getValue()+","+l.getParameterAt(3).getValue()+")";break;default:return}if(w.drawString(t,s,u)){var h=r.getSelectedIndex();if(!(h<0)){var d,f,p,_,g,v=l.getOutputCount();for(g=0;g<v;g++)if(f=(d=l.getOutputAt(g)).execute(h),!isNaN(f)&&(p="  "+d.getName()+": "+f.toFixed(2),void 0===(_=d.getColor())&&(_=c.c.Color.Indicator0+g),t.fillStyle=a.getColor(_),!w.drawString(t,p,u)))return}}}}]),e}(),M=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,i["a"]),g(e,[{key:"Draw",value:function(t){var e=o.a.instance,n=e.getDataSource(this.getDataSourceName());if(!(n.getDataCount()<1)){var r=e.getTimeline(this.getDataSourceName());if(!(r.getInnerWidth()<r.getColumnWidth())){var i=e.getRange(this.getAreaName());if(0!==i.getRange()){var a=e.getDataProvider(this.getAreaName()+".main"),s=r.getFirstIndex(),u=s+r.getLastIndex()>>1,l=e.getTheme(this.getFrameName());t.font=l.getFont(c.c.Font.Default),t.textBaseline="middle",t.fillStyle=l.getColor(c.c.Color.Text4),t.strokeStyle=l.getColor(c.c.Color.Text4);var h=n.getDecimalDigits();this.drawMark(t,a.getMinValue(),h,i.toY(a.getMinValue()),s,u,a.getMinValueIndex(),r),this.drawMark(t,a.getMaxValue(),h,i.toY(a.getMaxValue()),s,u,a.getMaxValueIndex(),r)}}}}},{key:"drawMark",value:function(t,e,n,r,i,o,s,u){var c,l,h,d;s>o?(t.textAlign="right",h=(c=u.toItemCenter(s)-4)-3,d=(l=c-7)-4):(t.textAlign="left",h=(c=u.toItemCenter(s)+4)+3,d=(l=c+7)+4),w.drawLine(t,c,r,l,r),w.drawLine(t,c,r,h,r+2),w.drawLine(t,c,r,h,r-2),t.fillText(a.a.fromFloat(e,n),d,r)}}]),e}(),x=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,w),g(e,[{key:"Draw",value:function(t){var n=o.a.instance,r=n.getArea(this.getAreaName()),i=n.getTimeline(this.getDataSourceName());if(r.isChanged()||i.isUpdated()){var a=n.getDataSource(this.getDataSourceName());if(!(a.getDataCount()<2)){var s,u=a.getDataAt(1).date-a.getDataAt(0).date,l=e.TIME_INTERVAL.length;for(s=0;s<l&&!(u<e.TIME_INTERVAL[s]);s++);for(;s<l&&!(e.TIME_INTERVAL[s]%u==0&&e.TIME_INTERVAL[s]/u*i.getColumnWidth()>60);s++);var h=i.getFirstIndex(),d=i.getLastIndex(),f=60*(new Date).getTimezoneOffset()*1e3,p=n.getTheme(this.getFrameName());t.font=p.getFont(c.c.Font.Default),t.textAlign="center",t.textBaseline="middle";for(var _=n.getLanguage(),g=[],v=r.getTop(),m=r.getMiddle(),y=h;y<d;y++){var b=a.getDataAt(y).date,E=b-f,C=new Date(b),A=C.getFullYear(),P=C.getMonth()+1,T=C.getDate(),k=C.getHours(),I=C.getMinutes(),S="";if(s<l){if(E%Math.max(e.TP_DAY,e.TIME_INTERVAL[s])==0)"zh-cn"===_?S=P.toString()+"月"+T.toString()+"日":"zh-tw"===_?S=P.toString()+"月"+T.toString()+"日":"en-us"===_&&(S=e.MonthConvert[P]+" "+T.toString()),t.fillStyle=p.getColor(c.c.Color.Text4);else if(E%e.TIME_INTERVAL[s]==0){var D=I.toString();I<10&&(D="0"+D),S=k.toString()+":"+D,t.fillStyle=p.getColor(c.c.Color.Text2)}}else 1===T&&k<u/e.TP_HOUR&&(1===P?(S=A.toString(),"zh-cn"===_?S+="年":"zh-tw"===_&&(S+="年")):"zh-cn"===_?S=P.toString()+"月":"zh-tw"===_?S=P.toString()+"月":"en-us"===_&&(S=e.MonthConvert[P]),t.fillStyle=p.getColor(c.c.Color.Text4));if(S.length>0){var O=i.toItemCenter(y);g.push({x:O,y:v,w:1,h:4}),t.fillText(S,O,m)}}g.length>0&&(t.fillStyle=p.getColor(c.c.Color.Grid1),w.createRectangles(t,g),t.fill())}}}}]),e}();x.TP_MINUTE=6e4,x.TP_HOUR=60*x.TP_MINUTE,x.TP_DAY=24*x.TP_HOUR,x.TIME_INTERVAL=[5*x.TP_MINUTE,10*x.TP_MINUTE,15*x.TP_MINUTE,30*x.TP_MINUTE,x.TP_HOUR,2*x.TP_HOUR,3*x.TP_HOUR,6*x.TP_HOUR,12*x.TP_HOUR,x.TP_DAY,2*x.TP_DAY],x.MonthConvert={1:"Jan.",2:"Feb.",3:"Mar.",4:"Apr.",5:"May.",6:"Jun.",7:"Jul.",8:"Aug.",9:"Sep.",10:"Oct.",11:"Nov.",12:"Dec."};var N=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,i["a"]),g(e,[{key:"getRequiredWidth",value:function(t,e){var n=o.a.instance.getTheme(this.getFrameName());return t.font=n.getFont(c.c.Font.Default),t.measureText((Math.floor(e)+.88).toString()).width+16}},{key:"Draw",value:function(t){var e=o.a.instance,n=this.getAreaName(),r=e.getArea(n),i=n.substring(0,n.lastIndexOf("Range")),s=e.getRange(i);if(0!==s.getRange()){if("main"===s.getNameObject().getCompAt(2));else if(!r.isChanged()&&!s.isUpdated())return;var u=s.getGradations();if(0!==u.length){var l=r.getLeft(),h=r.getRight(),d=r.getCenter(),f=e.getTheme(this.getFrameName());t.font=f.getFont(c.c.Font.Default),t.textAlign="center",t.textBaseline="middle",t.fillStyle=f.getColor(c.c.Color.Text2);var p=[];for(var _ in u){var g=s.toY(u[_]);p.push({x:l,y:g,w:6,h:1}),p.push({x:h-6,y:g,w:6,h:1}),t.fillText(a.a.fromFloat(u[_],2),d,g)}p.length>0&&(t.fillStyle=f.getColor(c.c.Color.Grid1),w.createRectangles(t,p),t.fill())}}}}]),e}(),L=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,i["a"]),g(e,[{key:"Draw",value:function(t){return this._Draw_(t)}},{key:"_Draw_",value:function(t){if(!1!==this.Update()&&!1!==this.updateData()){this.m_top=this.m_pArea.getTop(),this.m_bottom=this.m_pArea.getBottom(),this.m_left=this.m_pArea.getLeft(),this.m_right=this.m_pArea.getRight(),t.save(),t.rect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top),t.clip();var e=o.a.instance.getChart()._depthData;this.x_offset=0,this.y_offset=0;var n={},r={};n.x=this.m_left+e.array[this.m_ask_si].amounts*this.m_Step,n.y=this.m_pRange.toY(e.array[this.m_ask_si].rate),r.x=this.m_left+e.array[this.m_bid_si].amounts*this.m_Step,r.y=this.m_pRange.toY(e.array[this.m_bid_si].rate),Math.abs(n.y-r.y)<1&&(this.y_offset=1),this.x_offset=1,this.DrawBackground(t),this.UpdatePoints(),this.FillBlack(t),this.DrawGradations(t),this.DrawLine(t),t.restore()}}},{key:"DrawBackground",value:function(t){t.fillStyle=this.m_pTheme.getColor(c.c.Color.Background),t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top);var e=o.a.instance.getChart()._depthData;if(0===this.m_mode){var n=this.m_pRange.toY(e.array[this.m_ask_si].rate)-this.y_offset,r=this.m_pRange.toY(e.array[this.m_bid_si].rate)+this.y_offset,i=t.createLinearGradient(this.m_left,0,this.m_right,0);i.addColorStop(0,this.m_pTheme.getColor(c.c.Color.Background)),i.addColorStop(1,this.m_pTheme.getColor(c.c.Color.PositiveDark)),t.fillStyle=i,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,n-this.m_top);var a=t.createLinearGradient(this.m_left,0,this.m_right,0);a.addColorStop(0,this.m_pTheme.getColor(c.c.Color.Background)),a.addColorStop(1,this.m_pTheme.getColor(c.c.Color.NegativeDark)),t.fillStyle=a,t.fillRect(this.m_left,r,this.m_right-this.m_left,this.m_bottom-r)}else if(1===this.m_mode){var s=t.createLinearGradient(this.m_left,0,this.m_right,0);s.addColorStop(0,this.m_pTheme.getColor(c.c.Color.Background)),s.addColorStop(1,this.m_pTheme.getColor(c.c.Color.PositiveDark)),t.fillStyle=s,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top)}else if(2===this.m_mode){var u=t.createLinearGradient(this.m_left,0,this.m_right,0);u.addColorStop(0,this.m_pTheme.getColor(c.c.Color.Background)),u.addColorStop(1,this.m_pTheme.getColor(c.c.Color.NegativeDark)),t.fillStyle=u,t.fillRect(this.m_left,this.m_top,this.m_right-this.m_left,this.m_bottom-this.m_top)}}},{key:"DrawLine",value:function(t){if(0===this.m_mode||1===this.m_mode){t.strokeStyle=this.m_pTheme.getColor(c.c.Color.Positive),t.beginPath(),t.moveTo(Math.floor(this.m_ask_points[0].x)+.5,Math.floor(this.m_ask_points[0].y)+.5);for(var e=1;e<this.m_ask_points.length;e++)t.lineTo(Math.floor(this.m_ask_points[e].x)+.5,Math.floor(this.m_ask_points[e].y)+.5);t.stroke()}if(0===this.m_mode||2===this.m_mode){t.strokeStyle=this.m_pTheme.getColor(c.c.Color.Negative),t.beginPath(),t.moveTo(this.m_bid_points[0].x+.5,this.m_bid_points[0].y+.5);for(var n=1;n<this.m_bid_points.length;n++)t.lineTo(this.m_bid_points[n].x+.5,this.m_bid_points[n].y+.5);t.stroke()}}},{key:"UpdatePoints",value:function(){var t=o.a.instance.getChart()._depthData;this.m_ask_points=[];var e={};e.x=Math.floor(this.m_left),e.y=Math.floor(this.m_pRange.toY(t.array[this.m_ask_si].rate)-this.y_offset),this.m_ask_points.push(e);for(var n=0,r=this.m_ask_si;r>=this.m_ask_ei;r--){var i={},a={};r===this.m_ask_si?(i.x=Math.floor(this.m_left+t.array[r].amounts*this.m_Step+this.x_offset),i.y=Math.floor(this.m_pRange.toY(t.array[r].rate)-this.y_offset),this.m_ask_points.push(i),n=1):(i.x=Math.floor(this.m_left+t.array[r].amounts*this.m_Step+this.x_offset),i.y=Math.floor(this.m_ask_points[n].y),a.x=Math.floor(i.x),a.y=Math.floor(this.m_pRange.toY(t.array[r].rate)-this.y_offset),this.m_ask_points.push(i),n++,this.m_ask_points.push(a),n++)}this.m_bid_points=[];var s={};s.x=Math.floor(this.m_left),s.y=Math.ceil(this.m_pRange.toY(t.array[this.m_bid_si].rate)+this.y_offset),this.m_bid_points.push(s);for(var u=0,c=this.m_bid_si;c<=this.m_bid_ei;c++){var l={},h={};c===this.m_bid_si?(l.x=Math.floor(this.m_left+t.array[c].amounts*this.m_Step+this.x_offset),l.y=Math.ceil(this.m_pRange.toY(t.array[c].rate)+this.y_offset),this.m_bid_points.push(l),u=1):(l.x=Math.floor(this.m_left+t.array[c].amounts*this.m_Step+this.x_offset),l.y=Math.ceil(this.m_bid_points[u].y),h.x=Math.floor(l.x),h.y=Math.ceil(this.m_pRange.toY(t.array[c].rate)+this.x_offset),this.m_bid_points.push(l),u++,this.m_bid_points.push(h),u++)}}},{key:"updateData",value:function(){var t=o.a.instance.getChart()._depthData;if(null===t.array)return!1;if(t.array.length<=50)return!1;var e=this.m_pRange.getOuterMinValue(),n=this.m_pRange.getOuterMaxValue();this.m_ask_si=t.asks_si,this.m_ask_ei=t.asks_si;for(var r=t.asks_si;r>=t.asks_ei&&t.array[r].rate<n;r--)this.m_ask_ei=r;this.m_bid_si=t.bids_si,this.m_bid_ei=t.bids_si;for(var i=t.bids_si;i<=t.bids_ei&&t.array[i].rate>e;i++)this.m_bid_ei=i;return this.m_ask_ei===this.m_ask_si?this.m_mode=2:this.m_bid_ei===this.m_bid_si?this.m_mode=1:this.m_mode=0,this.m_Step=this.m_pArea.getWidth(),0===this.m_mode?this.m_ask_ei===t.asks_ei&&this.m_bid_ei===t.bids_ei?this.m_Step/=Math.min(t.array[this.m_ask_ei].amounts,t.array[this.m_bid_ei].amounts):this.m_ask_ei!==t.asks_ei&&this.m_bid_ei===t.bids_ei?this.m_Step/=t.array[this.m_bid_ei].amounts:this.m_ask_ei===t.asks_ei&&this.m_bid_ei!==t.bids_ei?this.m_Step/=t.array[this.m_ask_ei].amounts:this.m_ask_ei!==t.asks_ei&&this.m_bid_ei!==t.bids_ei&&(this.m_Step/=Math.max(t.array[this.m_ask_ei].amounts,t.array[this.m_bid_ei].amounts)):1===this.m_mode?this.m_Step/=t.array[this.m_ask_ei].amounts:2===this.m_mode&&(this.m_Step/=t.array[this.m_bid_ei].amounts),!0}},{key:"Update",value:function(){this.m_pMgr=o.a.instance;var t=this.getAreaName();if(this.m_pArea=this.m_pMgr.getArea(t),null===this.m_pArea)return!1;var e=t.substring(0,t.lastIndexOf("Range"));return this.m_pRange=this.m_pMgr.getRange(e),null!==this.m_pRange&&0!==this.m_pRange.getRange()&&(this.m_pTheme=this.m_pMgr.getTheme(this.getFrameName()),null!==this.m_pTheme)}},{key:"DrawGradations",value:function(t){var e=o.a.instance,n=this.getAreaName(),r=e.getArea(n),i=n.substring(0,n.lastIndexOf("Range")),a=e.getRange(i);if(0!==a.getRange()){var s=a.getGradations();if(0!==s.length){var u=r.getLeft(),l=r.getRight(),h=[];for(var d in s){var f=a.toY(s[d]);h.push({x:u,y:f,w:6,h:1}),h.push({x:l-6,y:f,w:6,h:1})}if(h.length>0){var p=e.getTheme(this.getFrameName());t.fillStyle=p.getColor(c.c.Color.Grid1),w.createRectangles(t,h),t.fill()}}}}},{key:"FillBlack",value:function(t){var e=this.m_ask_points,n=this.m_bid_points,r={},i={};r.x=this.m_right,r.y=e[0].y,i.x=this.m_right,i.y=e[e.length-1].y;var o={},a={};o.x=this.m_right,o.y=n[0].y-1,a.x=this.m_right,a.y=n[n.length-1].y,e.unshift(r),e.push(i),n.unshift(o),n.push(a),t.fillStyle=this.m_pTheme.getColor(c.c.Color.Background),t.beginPath(),t.moveTo(Math.floor(e[0].x)+.5,Math.floor(e[0].y)+.5);for(var s=1;s<e.length;s++)t.lineTo(Math.floor(e[s].x)+.5,Math.floor(e[s].y)+.5);t.fill(),t.beginPath(),t.moveTo(Math.floor(n[0].x)+.5,Math.floor(n[0].y)+.5);for(var u=1;u<n.length;u++)t.lineTo(Math.floor(n[u].x)+.5,Math.floor(n[u].y)+.5);t.fill(),e.shift(),e.pop(),n.shift(),n.pop()}},{key:"DrawTickerGraph",value:function(t){var e=o.a.instance.getDataSource(this.getDataSourceName()),n=e._dataItems[e._dataItems.length-1].close;this.m_left,this.m_pRange.toY(n);t.fillStyle=this.m_pTheme.getColor(c.c.Color.Mark),t.strokeStyle=this.m_pTheme.getColor(c.c.Color.Mark)}}]),e}(),U=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,w),g(e,[{key:"Draw",value:function(t){var e=o.a.instance,n=(e.getTimeline(this.getDataSourceName()),this.getAreaName()),r=e.getArea(n),i=n.substring(0,n.lastIndexOf("Range")),s=e.getRange(i);if(0!==s.getRange()){var u=e.getDataSource(this.getDataSourceName());if(!(u.getDataCount()<1)){var l=e.getTheme(this.getFrameName());t.font=l.getFont(c.c.Font.Default),t.textAlign="left",t.textBaseline="middle",t.fillStyle=l.getColor(c.c.Color.RangeMark),t.strokeStyle=l.getColor(c.c.Color.RangeMark);var h=u.getDataAt(u.getDataCount()-1).volume,d=s.toY(h),f=r.getLeft()+1;w.drawLine(t,f,d,f+7,d),w.drawLine(t,f,d,f+3,d+2),w.drawLine(t,f,d,f+3,d-2),t.fillText(a.a.fromFloat(h,2),f+10,d)}}}}]),e}(),j=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,w),g(e,[{key:"Draw",value:function(t){var e=o.a.instance,n=(e.getTimeline(this.getDataSourceName()),this.getAreaName()),r=e.getArea(n),i=n.substring(0,n.lastIndexOf("Range")),s=e.getRange(i);if(0!==s.getRange()){var u=e.getDataSource(this.getDataSourceName());if(!(u.getDataCount()<1)){var l=u._dataItems[u._dataItems.length-1].close;if(!(l<=s.getMinValue()||l>=s.getMaxValue())){var h=e.getTheme(this.getFrameName());t.font=h.getFont(c.c.Font.Default),t.textAlign="left",t.textBaseline="middle",t.fillStyle=h.getColor(c.c.Color.RangeMark),t.strokeStyle=h.getColor(c.c.Color.RangeMark);var d=s.toY(l),f=r.getLeft()+1;w.drawLine(t,f,d,f+7,d),w.drawLine(t,f,d,f+3,d+2),w.drawLine(t,f,d,f+3,d-2),t.fillText(a.a.fromFloat(l,u.getDecimalDigits()),f+10,d)}}}}}]),e}(),B=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,w),g(e,[{key:"Draw",value:function(t){var e=o.a.instance;if(e._drawingTool===o.a.DrawingTool.CrossCursor){var n=e.getArea(this.getAreaName()),r=e.getTimeline(this.getDataSourceName());if(!(r.getSelectedIndex()<0)){var i=e.getRange(this.getAreaName()),a=e.getTheme(this.getFrameName());t.strokeStyle=a.getColor(c.c.Color.Cursor);var s=r.toItemCenter(r.getSelectedIndex());w.drawLine(t,s,n.getTop()-1,s,n.getBottom());var u=i.getSelectedPosition();u>=0&&w.drawLine(t,n.getLeft(),u,n.getRight(),u)}}}}]),e}(),F=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,w),g(e,[{key:"Draw",value:function(t){var n=o.a.instance,i=n.getArea(this.getAreaName()),s=n.getTimeline(this.getDataSourceName());if(!(s.getSelectedIndex()<0)){var u=n.getDataSource(this.getDataSourceName());if(a.a.isInstance(u,h.b)){var l=n.getTheme(this.getFrameName()),d=n.getLanguage(),f=s.toItemCenter(s.getSelectedIndex());t.fillStyle=l.getColor(c.c.Color.Background),t.fillRect(f-52.5,i.getTop()+2.5,106,18),t.strokeStyle=l.getColor(c.c.Color.Grid3),t.strokeRect(f-52.5,i.getTop()+2.5,106,18),t.font=l.getFont(c.c.Font.Default),t.textAlign="center",t.textBaseline="middle",t.fillStyle=l.getColor(c.c.Color.Text4);var p=new Date(u.getDataAt(s.getSelectedIndex()).date),_=p.getMonth()+1,g=p.getDate(),v=p.getHours(),m=p.getMinutes(),y=p.getSeconds(),b=_.toString(),w=g.toString(),E=v.toString(),C=m.toString(),A=y.toString();m<10&&(C="0"+C),y<10&&(A="0"+A);var P="";"zh-cn"===d?P=b+"月"+w+"日  "+E+":"+C:"zh-tw"===d?P=b+"月"+w+"日  "+E+":"+C:"en-us"===d&&(P=e.MonthConvert[_]+" "+w+"  "+E+":"+C),r.a.instance.range<6e4&&(P+=":"+A),t.fillText(P,f,i.getMiddle())}}}}]),e}();F.MonthConvert={1:"Jan.",2:"Feb.",3:"Mar.",4:"Apr.",5:"May.",6:"Jun.",7:"Jul.",8:"Aug.",9:"Sep.",10:"Oct.",11:"Nov.",12:"Dec."};var W=function(t){function e(t){return p(this,e),v(this,m(e).call(this,t))}return y(e,i["a"]),g(e,[{key:"Draw",value:function(t){var e=o.a.instance,n=this.getAreaName(),r=e.getArea(n);if(!(e.getTimeline(this.getDataSourceName()).getSelectedIndex()<0)){var i=n.substring(0,n.lastIndexOf("Range")),s=e.getRange(i);if(!(0===s.getRange()||s.getSelectedPosition()<0)){var u=s.getSelectedValue();if(u!==-Number.MAX_VALUE){var l=s.getSelectedPosition();w.createPolygon(t,[{x:r.getLeft(),y:l},{x:r.getLeft()+5,y:l+10},{x:r.getRight()-3,y:l+10},{x:r.getRight()-3,y:l-10},{x:r.getLeft()+5,y:l-10}]);var h=e.getTheme(this.getFrameName());t.fillStyle=h.getColor(c.c.Color.Background),t.fill(),t.strokeStyle=h.getColor(c.c.Color.Grid4),t.stroke(),t.font=h.getFont(c.c.Font.Default),t.textAlign="center",t.textBaseline="middle",t.fillStyle=h.getColor(c.c.Color.Text3);var d=2;"main"===s.getNameObject().getCompAt(2)&&(d=e.getDataSource(this.getDataSourceName()).getDecimalDigits()),t.fillText(a.a.fromFloat(u,d),r.getCenter(),l)}}}}}]),e}(),V=function(t){function e(t,n){var r;p(this,e),(r=v(this,m(e).call(this,t))).toolObject=n;var i=o.a.instance.getArea("frame0.k0.main");return null===i?(r.areaPos={left:0,top:0,right:0,bottom:0},v(r)):(r.areaPos={left:i.getLeft(),top:i.getTop(),right:i.getRight(),bottom:i.getBottom()},r.crossPt={},r.normalSize=4,r.selectedSize=6,r.cursorLen=4,r.cursorGapLen=3,r.theme=o.a.instance.getTheme(r.getFrameName()),r)}return y(e,i["a"]),g(e,[{key:"drawCursor",value:function(t){this.drawCrossCursor(t)}},{key:"drawCrossCursor",value:function(t){t.strokeStyle=this.theme.getColor(c.c.Color.LineColorNormal),t.fillStyle=this.theme.getColor(c.c.Color.LineColorNormal);var e=this.toolObject.getPoint(0).getPosXY();if(null!==e){var n=e.x,r=e.y,i=this.cursorLen,o=this.cursorGapLen;t.fillRect(n,r,1,1),w.drawLine(t,n-i-o,r,n-o,r),w.drawLine(t,n+i+o,r,n+o,r),w.drawLine(t,n,r-i-o,n,r-o),w.drawLine(t,n,r+i+o,n,r+o)}}},{key:"drawCircle",value:function(t,e,n){var r=e.x,i=e.y;t.beginPath(),t.arc(r,i,n,0,2*Math.PI,!1),t.fillStyle=this.theme.getColor(c.c.Color.CircleColorFill),t.fill(),t.stroke()}},{key:"drawCtrlPt",value:function(t){t.strokeStyle=this.theme.getColor(c.c.Color.CircleColorStroke);for(var e=0;e<this.ctrlPtsNum;e++)this.drawCircle(t,this.ctrlPts[1][e],this.normalSize)}},{key:"highlightCtrlPt",value:function(t){t.strokeStyle=this.theme.getColor(c.c.Color.CircleColorStroke);for(var e=0;e<this.ctrlPtsNum;e++)this.toolObject.getPoint(e).getState()===s.a.state.Highlight&&this.drawCircle(t,this.ctrlPts[1][e],this.selectedSize)}},{key:"drawFibRayLines",value:function(t,e,n){for(var r=0;r<this.fiboFansSequence.length;r++){var i=e.y+(100-this.fiboFansSequence[r])/100*(n.y-e.y),o={x:e.x,y:e.y},a={x:n.x,y:i};this.drawRayLines(t,o,a)}}},{key:"drawRayLines",value:function(t,e,n){this.getAreaPos();var r,i={x:e.x,y:e.y},o={x:n.x,y:n.y},a=this.getRectCrossPt(this.areaPos,i,o);r=n.x===e.x?n.y===e.y?n:n.y>e.y?{x:a[1].x,y:a[1].y}:{x:a[0].x,y:a[0].y}:n.x>e.x?{x:a[1].x,y:a[1].y}:{x:a[0].x,y:a[0].y},w.drawLine(t,e.x,e.y,r.x,r.y)}},{key:"lenBetweenPts",value:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"getCtrlPts",value:function(){for(var t=0;t<this.ctrlPtsNum;t++)this.ctrlPts[0][t]=this.toolObject.getPoint(t)}},{key:"updateCtrlPtPos",value:function(){for(var t=0;t<this.ctrlPtsNum;t++)this.ctrlPts[1][t]=this.ctrlPts[0][t].getPosXY()}},{key:"getAreaPos",value:function(){var t=o.a.instance.getArea("frame0.k0.main");this.areaPos=null!==t?{left:Math.floor(t.getLeft()),top:Math.floor(t.getTop()),right:Math.floor(t.getRight()),bottom:Math.floor(t.getBottom())}:{left:0,top:0,right:0,bottom:0}}},{key:"updateDraw",value:function(t){t.strokeStyle=this.theme.getColor(c.c.Color.LineColorNormal),this.draw(t),this.drawCtrlPt(t)}},{key:"finishDraw",value:function(t){t.strokeStyle=this.theme.getColor(c.c.Color.LineColorNormal),this.draw(t)}},{key:"highlight",value:function(t){t.strokeStyle=this.theme.getColor(c.c.Color.LineColorSelected),this.draw(t),this.drawCtrlPt(t),this.highlightCtrlPt(t)}}]),e}(),G=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t,n))).toolObject=n,r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return y(e,V),g(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y?w.drawLine(t,this.areaPos.left,this.startPoint.y,this.areaPos.right,this.startPoint.y):(this.crossPt=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),w.drawLine(t,this.crossPt[0].x,this.crossPt[0].y,this.crossPt[1].x,this.crossPt[1].y))}}]),e}(),K=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t,n))).toolObject=n,r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return y(e,V),g(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),w.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y)}}]),e}(),Y=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t))).toolObject=n,r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return y(e,V),g(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.drawRayLines(t,this.startPoint,this.endPoint)}}]),e}(),H=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t,n))).toolObject=n,r.arrowSizeRatio=.03,r.arrowSize=4,r.crossPt={x:-1,y:-1},r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return y(e,V),g(e,[{key:"drawArrow",value:function(t,e,n){var r=this.lenBetweenPts(e,n),i=[n.x-e.x,n.y-e.y];this.crossPt.x=e.x+(1-this.arrowSize/r)*i[0],this.crossPt.y=e.y+(1-this.arrowSize/r)*i[1];var o=[-i[1],i[0]],a={x:o[0],y:o[1]},s={x:0,y:0};o[0]=this.arrowSize*a.x/this.lenBetweenPts(a,s),o[1]=this.arrowSize*a.y/this.lenBetweenPts(a,s);var u=[this.crossPt.x+o[0],this.crossPt.y+o[1]];w.drawLine(t,n.x,n.y,u[0],u[1]),u=[this.crossPt.x-o[0],this.crossPt.y-o[1]],w.drawLine(t,n.x,n.y,u[0],u[1])}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),w.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y),this.drawArrow(t,this.startPoint,this.endPoint)}}]),e}(),z=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t))).toolObject=n,r.ctrlPtsNum=1,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return y(e,V),g(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],w.drawLine(t,this.areaPos.left,this.startPoint.y,this.areaPos.right,this.startPoint.y)}}]),e}(),q=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t))).toolObject=n,r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return y(e,V),g(e,[{key:"draw",value:function(t){if(this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x)w.drawLine(t,this.startPoint.x,this.startPoint.y,this.areaPos.right,this.startPoint.y);else{var e={x:this.endPoint.x,y:this.startPoint.y};this.drawRayLines(t,this.startPoint,e)}}}]),e}(),X=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t,n))).toolObject=n,r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return y(e,V),g(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.endPoint.y=this.startPoint.y,this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y?w.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x+1,this.startPoint.y):w.drawLine(t,this.startPoint.x,this.startPoint.y,this.endPoint.x,this.startPoint.y)}}]),e}(),Q=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t))).toolObject=n,r.ctrlPtsNum=1,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return y(e,V),g(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],w.drawLine(t,this.startPoint.x,this.areaPos.top,this.startPoint.x,this.areaPos.bottom)}}]),e}(),Z=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t))).toolObject=n,r.ctrlPtsNum=1,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return y(e,V),g(e,[{key:"draw",value:function(t){t.font="12px Tahoma",t.textAlign="left",t.fillStyle=this.theme.getColor(c.c.Color.LineColorNormal),this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0];var e=this.ctrlPts[0][0].getPosIV().v;w.drawLine(t,this.startPoint.x,this.startPoint.y,this.areaPos.right,this.startPoint.y),t.fillText(e.toFixed(2),this.startPoint.x+2,this.startPoint.y-15)}}]),e}(),J=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t))).toolObject=n,r}return y(e,V),g(e,[{key:"getParaPt",value:function(){var t=[];t[0]=this.endPoint.x-this.startPoint.x,t[1]=this.endPoint.y-this.startPoint.y;var e=[];e[0]=this.paraStartPoint.x-this.startPoint.x,e[1]=this.paraStartPoint.y-this.startPoint.y,this.paraEndPoint={x:-1,y:-1},this.paraEndPoint.x=t[0]+e[0]+this.startPoint.x,this.paraEndPoint.y=t[1]+e[1]+this.startPoint.y}}]),e}(),$=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t,n))).toolObject=n,r.ctrlPtsNum=3,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return y(e,J),g(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2],this.getParaPt(),this.getAreaPos(),this.crossPt0=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),w.drawLine(t,this.crossPt0[0].x,this.crossPt0[0].y,this.crossPt0[1].x,this.crossPt0[1].y),this.crossPt1=this.getRectCrossPt(this.areaPos,this.paraStartPoint,this.paraEndPoint),w.drawLine(t,this.crossPt1[0].x,this.crossPt1[0].y,this.crossPt1[1].x,this.crossPt1[1].y)}}]),e}(),tt=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t,n))).toolObject=n,r.ctrlPtsNum=3,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return y(e,J),g(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.getParaPt(),this.drawRayLines(t,this.startPoint,this.endPoint),this.drawRayLines(t,this.paraStartPoint,this.paraEndPoint)}}]),e}(),et=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t,n))).toolObject=n,r.ctrlPtsNum=3,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return y(e,J),g(e,[{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.paraStartPoint=this.ctrlPts[1][1],this.endPoint=this.ctrlPts[1][2];var e=[];e[0]=this.endPoint.x-this.startPoint.x,e[1]=this.endPoint.y-this.startPoint.y;var n=[];n[0]=this.paraStartPoint.x-this.startPoint.x,n[1]=this.paraStartPoint.y-this.startPoint.y,this.para1EndPoint={x:-1,y:-1},this.para2EndPoint={x:-1,y:-1},this.para2StartPoint={x:-1,y:-1},this.para1EndPoint.x=e[0]+n[0]+this.startPoint.x,this.para1EndPoint.y=e[1]+n[1]+this.startPoint.y,this.para2StartPoint.x=this.startPoint.x-n[0],this.para2StartPoint.y=this.startPoint.y-n[1],this.para2EndPoint.x=this.endPoint.x-n[0],this.para2EndPoint.y=this.endPoint.y-n[1],this.getAreaPos(),this.crossPt0=this.getRectCrossPt(this.areaPos,this.startPoint,this.endPoint),w.drawLine(t,this.crossPt0[0].x,this.crossPt0[0].y,this.crossPt0[1].x,this.crossPt0[1].y),this.crossPt1=this.getRectCrossPt(this.areaPos,this.paraStartPoint,this.para1EndPoint),w.drawLine(t,this.crossPt1[0].x,this.crossPt1[0].y,this.crossPt1[1].x,this.crossPt1[1].y),this.crossPt2=this.getRectCrossPt(this.areaPos,this.para2StartPoint,this.para2EndPoint),w.drawLine(t,this.crossPt2[0].x,this.crossPt2[0].y,this.crossPt2[1].x,this.crossPt2[1].y)}}]),e}(),nt=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t))).toolObject=n,r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return y(e,V),g(e,[{key:"drawLinesAndInfo",value:function(t,e,n){var r;t.font="12px Tahoma",t.textAlign="left",t.fillStyle=this.theme.getColor(c.c.Color.LineColorNormal),this.toolObject.state===d.n.state.Draw&&(this.startPtValue=this.toolObject.getPoint(0).getPosIV().v,this.endPtValue=this.toolObject.getPoint(1).getPosIV().v),this.getAreaPos();for(var i=0;i<this.fiboSequence.length;i++){var o=e.y+(100-this.fiboSequence[i])/100*(n.y-e.y);if(!(o>this.areaPos.bottom)){var a=this.startPtValue+(100-this.fiboSequence[i])/100*(this.endPtValue-this.startPtValue);w.drawLine(t,this.areaPos.left,o,this.areaPos.right,o),r=this.fiboSequence[i].toFixed(1)+"% "+a.toFixed(1),t.fillText(r,this.areaPos.left+2,o-15)}}}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.drawLinesAndInfo(t,this.startPoint,this.endPoint)}}]),e}(),rt=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t,n))).toolObject=n,r.fiboSequence=[100,78.6,61.8,50,38.2,23.6,0],r}return y(e,nt),e}(),it=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t,n))).toolObject=n,r.fiboSequence=[0,12.5,25,37.5,50,62.5,75,87.5,100],r}return y(e,nt),e}(),ot=function(t){function e(t,n){var r;return p(this,e),(r=v(this,m(e).call(this,t))).toolObject=n,r.fiboFansSequence=[0,38.2,50,61.8],r.ctrlPtsNum=2,r.ctrlPts=[new Array(r.ctrlPtsNum),new Array(2)],r.getCtrlPts(),r}return y(e,V),g(e,[{key:"drawLinesAndInfo",value:function(t,e,n){this.drawFibRayLines(t,e,n)}},{key:"draw",value:function(t){this.updateCtrlPtPos(),this.getAreaPos(),this.startPoint=this.ctrlPts[1][0],this.endPoint=this.ctrlPts[1][1],this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y&&(this.endPoint.x+=1),this.drawLinesAndInfo(t,this.startPoint,this.endPoint)}}]),e}(),at=function(t){function e(t){var n;return p(this,e),(n=v(this,m(e).call(this,t))).flag=!0,n.context=o.a.instance._overlayContext,n}return y(e,i["a"]),g(e,[{key:"getAreaPos",value:function(){var t=o.a.instance.getArea("frame0.k0.main");this.areaPos=null!==t?{left:Math.floor(t.getLeft()),top:Math.floor(t.getTop()),right:Math.floor(t.getRight()),bottom:Math.floor(t.getBottom())}:{left:0,top:0,right:0,bottom:0}}},{key:"Draw",value:function(t){this.getAreaPos();var e=o.a.instance.getDataSource(this.getDataSourceName());if(null!==e&&a.a.isInstance(e,h.b)){this.context.save(),this.context.rect(this.areaPos.left,this.areaPos.top,this.areaPos.right-this.areaPos.left,this.areaPos.bottom-this.areaPos.top),this.context.clip();for(var n=e.getToolObjectCount(),r=0;r<n;r++){var i=e.getToolObject(r);switch(i.getState()){case d.n.state.BeforeDraw:i.getPlotter().theme=o.a.instance.getTheme(this.getFrameName()),i.getPlotter().drawCursor(this.context);break;case d.n.state.Draw:i.getPlotter().theme=o.a.instance.getTheme(this.getFrameName()),i.getPlotter().updateDraw(this.context);break;case d.n.state.AfterDraw:i.getPlotter().theme=o.a.instance.getTheme(this.getFrameName()),i.getPlotter().finishDraw(this.context)}}var s=e.getSelectToolObjcet();null!==s&&s!==d.n.state.Draw&&s.getPlotter().highlight(this.context),this.context.restore()}}}]),e}()},function(t,e,n){"use strict";n.d(e,"b",function(){return g}),n.d(e,"a",function(){return v});var r=n(1),i=n(0),o=n(5),a=n(2);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _=function(t){function e(t){var n;return u(this,e),(n=h(this,d(e).call(this,t)))._minValue=0,n._maxValue=0,n._minValueIndex=-1,n._maxValueIndex=-1,n}return f(e,r["a"]),l(e,[{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getMinValueIndex",value:function(){return this._minValueIndex}},{key:"getMaxValueIndex",value:function(){return this._maxValueIndex}},{key:"getMinMaxAt",value:function(t,e){return!0}},{key:"calcRange",value:function(t,e,n,r){for(var i=Number.MAX_VALUE,o=-Number.MAX_VALUE,a=-1,s=-1,u={},c=e-1,l=t.length-1;l>=0;l--){var h=t[l];if(c<h)n[l]={min:i,max:o};else{for(;c>=h;c--)!1!==this.getMinMaxAt(c,u)&&(i>u.min&&(i=u.min,a=c),o<u.max&&(o=u.max,s=c));n[l]={min:i,max:o}}null!==r&&void 0!==r&&(r[l]={minIndex:a,maxIndex:s})}}},{key:"updateRange",value:function(){var t=i.a.instance.getTimeline(this.getDataSourceName()),e=[t.getFirstIndex()],n=[{}],r=[{}];this.calcRange(e,t.getLastIndex(),n,r),this._minValue=n[0].min,this._maxValue=n[0].max,this._minValueIndex=r[0].minIndex,this._maxValueIndex=r[0].maxIndex}}]),e}(),g=function(t){function e(t){var n;return u(this,e),(n=h(this,d(e).call(this,t)))._candlestickDS=null,n}return f(e,_),l(e,[{key:"updateData",value:function(){var t=i.a.instance.getDataSource(this.getDataSourceName());o.a.isInstance(t,a.b)&&(this._candlestickDS=t)}},{key:"getMinMaxAt",value:function(t,e){var n=this._candlestickDS.getDataAt(t);return e.min=n.low,e.max=n.high,!0}}]),e}(),v=function(t){function e(){return u(this,e),h(this,d(e).apply(this,arguments))}return f(e,_),l(e,[{key:"getIndicator",value:function(){return this._indicator}},{key:"setIndicator",value:function(t){this._indicator=t,this.refresh()}},{key:"refresh",value:function(){var t=i.a.instance.getDataSource(this.getDataSourceName());if(!(t.getDataCount()<1)){var e,n=this._indicator,r=t.getDataCount();for(n.clear(),n.reserve(r),e=0;e<r;e++)n.execute(t,e)}}},{key:"updateData",value:function(){var t=i.a.instance.getDataSource(this.getDataSourceName());if(!(t.getDataCount()<1)){var e=this._indicator;switch(t.getUpdateMode()){case a.a.UpdateMode.Refresh:this.refresh();break;case a.a.UpdateMode.Append:var n,r=t.getDataCount(),o=t.getAppendedCount();for(e.reserve(o),n=r-o;n<r;n++)e.execute(t,n);break;case a.a.UpdateMode.Update:var s,u=t.getDataCount();for(s=u-(t.getUpdatedCount()+t.getAppendedCount());s<u;s++)e.execute(t,s);break;case a.a.UpdateMode.Prepend:var c,l=t.getDataCount();for(e.reserve(l),c=0;c<l;c++)e.execute(t,c)}}}},{key:"getMinMaxAt",value:function(t,e){e.min=Number.MAX_VALUE,e.max=-Number.MAX_VALUE;var n,r,i=!1,o=this._indicator.getOutputCount();for(r=0;r<o;r++)n=this._indicator.getOutputAt(r).execute(t),!1===isNaN(n)&&(i=!0,e.min>n&&(e.min=n),e.max<n&&(e.max=n));return i}}]),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return _}),n.d(e,"e",function(){return g}),n.d(e,"c",function(){return v}),n.d(e,"f",function(){return m}),n.d(e,"d",function(){return y}),n.d(e,"g",function(){return b}),n.d(e,"b",function(){return w});var r=n(1),i=n(0),o=n(21);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function h(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _=function(t){function e(t){var n;return u(this,e),(n=h(this,d(e).call(this,t)))._left=0,n._top=0,n._right=0,n._bottom=0,n._changed=!1,n._highlighted=!1,n._pressed=!1,n._selected=!1,n.Measuring=new o.a,n}return f(e,r["a"]),l(e,[{key:"getDockStyle",value:function(){return this._dockStyle}},{key:"setDockStyle",value:function(t){this._dockStyle=t}},{key:"getLeft",value:function(){return this._left}},{key:"getTop",value:function(){return this._top}},{key:"setTop",value:function(t){this._top!==t&&(this._top=t,this._changed=!0)}},{key:"getRight",value:function(){return this._right}},{key:"getBottom",value:function(){return this._bottom}},{key:"setBottom",value:function(t){this._bottom!==t&&(this._bottom=t,this._changed=!0)}},{key:"getCenter",value:function(){return this._left+this._right>>1}},{key:"getMiddle",value:function(){return this._top+this._bottom>>1}},{key:"getWidth",value:function(){return this._right-this._left}},{key:"getHeight",value:function(){return this._bottom-this._top}},{key:"getRect",value:function(){return{X:this._left,Y:this._top,Width:this._right-this._left,Height:this._bottom-this._top}}},{key:"contains",value:function(t,e){return t>=this._left&&t<this._right&&e>=this._top&&e<this._bottom?[this]:null}},{key:"getMeasuredWidth",value:function(){return this._measuredWidth}},{key:"getMeasuredHeight",value:function(){return this._measuredHeight}},{key:"setMeasuredDimension",value:function(t,e){this._measuredWidth=t,this._measuredHeight=e}},{key:"measure",value:function(t,e,n){this._measuredWidth=0,this._measuredHeight=0,this.Measuring.raise(this,{Width:e,Height:n}),0===this._measuredWidth&&0===this._measuredHeight&&this.setMeasuredDimension(e,n)}},{key:"layout",value:function(t,e,n,r,i){t<<=0,this._left!==t&&(this._left=t,this._changed=!0),e<<=0,this._top!==e&&(this._top=e,this._changed=!0),n<<=0,this._right!==n&&(this._right=n,this._changed=!0),r<<=0,this._bottom!==r&&(this._bottom=r,this._changed=!0),i&&(this._changed=!0)}},{key:"isChanged",value:function(){return this._changed}},{key:"setChanged",value:function(t){this._changed=t}},{key:"isHighlighted",value:function(){return this._highlighted}},{key:"getHighlightedArea",value:function(){return this._highlighted?this:null}},{key:"highlight",value:function(t){return this._highlighted=this===t,this._highlighted?this:null}},{key:"isPressed",value:function(){return this._pressed}},{key:"setPressed",value:function(t){this._pressed=t}},{key:"isSelected",value:function(){return this._selected}},{key:"getSelectedArea",value:function(){return this._selected?this:null}},{key:"select",value:function(t){return this._selected=this===t,this._selected?this:null}},{key:"onMouseMove",value:function(t,e){return null}},{key:"onMouseLeave",value:function(t,e){}},{key:"onMouseDown",value:function(t,e){return null}},{key:"onMouseUp",value:function(t,e){return null}}]),e}();_.DockStyle={Left:0,Top:1,Right:2,Bottom:3,Fill:4};var g=function(t){function e(t){var n;return u(this,e),(n=h(this,d(e).call(this,t)))._dragStarted=!1,n._oldX=0,n._oldY=0,n._passMoveEventToToolManager=!0,n}return f(e,_),l(e,[{key:"onMouseMove",value:function(t,e){var n=i.a.instance;if(n._capturingMouseArea===this&&!1===this._dragStarted&&(Math.abs(this._oldX-t)>1||Math.abs(this._oldY-e)>1)&&(this._dragStarted=!0),this._dragStarted)return n.hideCursor(),n.onToolMouseDrag(this.getFrameName(),t,e)?this:(0==n.getTimeline(this.getDataSourceName()).move(t-this._oldX)&&(Kline.instance.loading=!0,$("#chart_overlayCanvas").trigger("_LoadHistory")),this);if(this._passMoveEventToToolManager&&n.onToolMouseMove(this.getFrameName(),t,e))return n.hideCursor(),this;switch(n._drawingTool){case i.a.DrawingTool.Cursor:n.showCursor();break;case i.a.DrawingTool.CrossCursor:n.showCrossCursor(this,t,e)?n.hideCursor():n.showCursor();break;default:n.hideCursor()}return this}},{key:"onMouseLeave",value:function(t,e){this._dragStarted=!1,this._passMoveEventToToolManager=!0}},{key:"onMouseDown",value:function(t,e){var n=i.a.instance;return n.getTimeline(this.getDataSourceName()).startMove(),this._oldX=t,this._oldY=e,this._dragStarted=!1,n.onToolMouseDown(this.getFrameName(),t,e)&&(this._passMoveEventToToolManager=!1),this}},{key:"onMouseUp",value:function(t,e){var n=i.a.instance,r=null;return this._dragStarted&&(this._dragStarted=!1,r=this),n.onToolMouseUp(this.getFrameName(),t,e)&&(r=this),this._passMoveEventToToolManager=!0,r}}]),e}(),v=function(t){function e(t){var n;return u(this,e),(n=h(this,d(e).call(this,t)))._dragStarted=!1,n._oldX=0,n._oldY=0,n}return f(e,_),l(e,[{key:"onMouseMove",value:function(t,e){var n=i.a.instance;if(n._capturingMouseArea===this&&!1===this._dragStarted&&(this._oldX===t&&this._oldY===e||(this._dragStarted=!0)),this._dragStarted)return n.hideCursor(),0==n.getTimeline(this.getDataSourceName()).move(t-this._oldX)&&(Kline.instance.loading=!0,$("#chart_overlayCanvas").trigger("_LoadHistory")),this;switch(n._drawingTool){case i.a.DrawingTool.CrossCursor:n.showCrossCursor(this,t,e)?n.hideCursor():n.showCursor();break;default:n.showCursor()}return this}},{key:"onMouseLeave",value:function(t,e){this._dragStarted=!1}},{key:"onMouseDown",value:function(t,e){return i.a.instance.getTimeline(this.getDataSourceName()).startMove(),this._oldX=t,this._oldY=e,this._dragStarted=!1,this}},{key:"onMouseUp",value:function(t,e){return this._dragStarted?(this._dragStarted=!1,this):null}}]),e}(),m=function(t){function e(t){return u(this,e),h(this,d(e).call(this,t))}return f(e,_),l(e,[{key:"onMouseMove",value:function(t,e){return i.a.instance.showCursor(),this}}]),e}(),y=function(t){function e(t){return u(this,e),h(this,d(e).call(this,t))}return f(e,_),l(e,[{key:"onMouseMove",value:function(t,e){return i.a.instance.showCursor(),this}}]),e}(),b=function(t){function e(t){return u(this,e),h(this,d(e).call(this,t))}return f(e,_),l(e,[{key:"onMouseMove",value:function(t,e){return i.a.instance.showCursor(),this}}]),e}(),w=function(t){function e(t){var n;return u(this,e),(n=h(this,d(e).call(this,t)))._areas=[],n._highlightedArea=null,n._selectedArea=null,n}return f(e,_),l(e,[{key:"contains",value:function(t,n){var r,i,o=this._areas.length;for(i=0;i<o;i++)if(null!==(r=this._areas[i].contains(t,n)))return r.push(this),r;return s(d(e.prototype),"contains",this).call(this,t,n)}},{key:"getAreaCount",value:function(){return this._areas.length}},{key:"getAreaAt",value:function(t){return t<0||t>=this._areas.length?null:this._areas[t]}},{key:"addArea",value:function(t){this._areas.push(t)}},{key:"removeArea",value:function(t){var e,n=this._areas.length;for(e=0;e<n;e++)if(t===this._areas[e]){this._areas.splice(e),this.setChanged(!0);break}}},{key:"getGridColor",value:function(){return this._gridColor}},{key:"setGridColor",value:function(t){this._gridColor=t}},{key:"getHighlightedArea",value:function(){return null!==this._highlightedArea?this._highlightedArea.getHighlightedArea():null}},{key:"highlight",value:function(t){this._highlightedArea=null;var e,n,r=this._areas.length;for(n=0;n<r;n++)if(null!==(e=this._areas[n].highlight(t)))return this._highlightedArea=e,this;return null}},{key:"getSelectedArea",value:function(){return null!==this._selectedArea?this._selectedArea.getSelectedArea():null}},{key:"select",value:function(t){this._selectedArea=null;var e,n,r=this._areas.length;for(n=0;n<r;n++)if(null!==(e=this._areas[n].select(t)))return this._selectedArea=e,this;return null}},{key:"onMouseLeave",value:function(t,e){var n,r=this._areas.length;for(n=0;n<r;n++)this._areas[n].onMouseLeave(t,e)}},{key:"onMouseUp",value:function(t,e){var n,r,i=this._areas.length;for(r=0;r<i;r++)if(null!==(n=this._areas[r].onMouseUp(t,e)))return n;return null}}]),e}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,d=(15&s)<<2|c>>6,f=63&c;u||(f=64,a||(d=64)),r.push(n[l],n[h],n[d],n[f])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!=s){var l=a<<4&240|s>>2;if(r.push(l),64!=u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}(),d=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},f="FirebaseError",p=Error.captureStackTrace;var _=function(){return function(t,e){if(this.code=t,this.message=e,p)p(this,g.prototype.create);else{var n=Error.apply(this,arguments);this.name=f,Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}}();_.prototype=Object.create(Error.prototype),_.prototype.constructor=_,_.prototype.name=f;var g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],i=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new _(i,n);for(var a in e)e.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=e[a]);return o},t}();function v(t){return JSON.parse(t)}var m=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=v(c(o[0])||""),n=v(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},y=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},b=function(t,e){return y(e,function(e,n){t[e]=n}),t},w=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},E=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return r.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(function(){return function(){this.blockSize=-1}}());var C=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=A),void 0===r.error&&(r.error=A),void 0===r.complete&&(r.complete=A);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function A(){}function P(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.assert=o,e.assertionError=a,e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.CONSTANTS=i,e.deepCopy=function(t){return l(void 0,t)},e.deepExtend=l,e.patchProperty=function(t,e,n){t[e]=n},e.Deferred=h,e.getUA=d,e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.ErrorFactory=g,e.FirebaseError=_,e.patchCapture=function(t){var e=p;return p=t,e},e.jsonEval=v,e.stringify=function(t){return JSON.stringify(t)},e.decode=m,e.isAdmin=function(t){var e=m(t).claims;return"object"==typeof e&&!0===e.admin},e.issuedAtTime=function(t){var e=m(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.isValidFormat=function(t){var e=m(t),n=e.claims;return!!e.signature&&!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e,n,r=m(t).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?e=r.nbf:r.hasOwnProperty("iat")&&(e=r.iat),n=r.hasOwnProperty("exp")?r.exp:e+86400),i&&e&&n&&i>=e&&i<=n},e.clone=function(t){return b({},t)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},e.extend=b,e.findKey=w,e.findValue=function(t,e,n){var r=w(t,e,n);return r&&t[r]},e.forEach=y,e.getAnyKey=function(t){for(var e in t)return e},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.querystring=function(t){var e=[];return y(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},e.Sha1=E,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}},e.createSubscribe=function(t,e){var n=new C(t,e);return n.subscribe.bind(n)},e.errorPrefix=P,e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(P(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(P(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(P(t,e,r)+"must be a valid firebase namespace.")},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;o(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.__extends=function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n.d(e,"__assign",function(){return i}),e.__rest=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n},e.__decorate=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},e.__param=function(t,e){return function(n,r){e(n,r,t)}},e.__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},e.__awaiter=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},e.__generator=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},e.__exportStar=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},e.__values=o,e.__read=a,e.__spread=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},e.__await=s,e.__asyncGenerator=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||u(t,e)})})}function u(t,e){try{!function(t){t.value instanceof s?Promise.resolve(t.value.v).then(c,l):h(o[0][2],t)}(i[t](e))}catch(t){h(o[0][3],t)}}function c(t){u("next",t)}function l(t){u("throw",t)}function h(t,e){t(e),o.shift(),o.length&&u(o[0][0],o[0][1])}},e.__asyncDelegator=function(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){t[r]&&(e[r]=function(e){return(n=!n)?{value:s(t[r](e)),done:"return"===r}:i?i(e):e})}},e.__asyncValues=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):o(t)},e.__makeTemplateObject=function(t,e){Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e;return t},e.__importStar=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},e.__importDefault=function(t){return t&&t.__esModule?t:{default:t}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};var i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function s(t){return this instanceof s?(this.v=t,this):new s(t)}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.browerState=0,this.tradeDate=new Date,this.tradesLimit=20,this.lastDepth=null,this.depthShowSize=15,this.priceDecimalDigits=6,this.amountDecimalDigits=4,this.symbol=null,this.curPrice=null,this.title="",Object.assign(this,e),t.created||(t.instance=this,t.created=!0),t.instance}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"reset",value:function(t){this.symbol=t,this.lastDepth=null,this.curPrice=null,this.klineTradeInit=!1,$("#trades .trades_list").empty(),$("#gasks .table").empty(),$("#gbids .table").empty(),$("#asks .table").empty(),$("#bids .table").empty()}},{key:"pushTrades",value:function(t){for(var e=$("#trades .trades_list"),n="",r=0;r<t.length;r++){var i=t[r];if(r>=t.length-this.tradesLimit){this.tradeDate.setTime(i.time);var o=this.dateFormatTf(this.tradeDate.getHours())+":"+this.dateFormatTf(this.tradeDate.getMinutes())+":"+this.dateFormatTf(this.tradeDate.getSeconds()),a=(i.amount.toFixed(4)+"").split("."),s=i.price;s>1&&(s=s.toFixed(2)),s<1&&s>1e-5&&(s=s.toFixed(4)),s<1e-5&&(s=s.toFixed(6)),n=this.klineTradeInit?"<ul class='newul'><li class='tm'>"+o+"</li><li class='pr-"+("buy"===i.type?"green":"red")+"'>"+s+"</li><li class='vl'>"+a[0]+"<g>"+(a.length>1?"."+a[1]:"")+"</g></li></ul>"+n:"<ul><li class='tm'>"+o+"</li><li class='pr-"+("buy"===i.type?"green":"red")+"'>"+s+"</li><li class='vl'>"+a[0]+"<g>"+(a.length>1?"."+a[1]:"")+"</g></li></ul>"+n}}var u=0,c=this;if(this.klineTradeInit){clearInterval(l);var l=setInterval(function(){var e=t[u],n=Number(e.price);n>1&&(n=n.toFixed(2)),n<1&&n>1e-4&&(n=n.toFixed(4)),n<1e-4&&(n=n.toFixed(6)),c.curPrice=n,$("div#price").attr("class","buy"===e.type?"green":"red").text(n),++u>=t.length&&clearInterval(l)},100)}else if(t.length>0){var h=Number(t[t.length-1].price);h>1&&(h=h.toFixed(2)),h<1&&h>1e-4&&(h=h.toFixed(4)),h<1e-4&&(h=h.toFixed(6)),c.curPrice=h,$("div#price").attr("class","buy"===t[t.length-1].type?"green":"red").text(h)}this.klineTradeInit?e.prepend(n):e.append(n),n=null,e.find("ul.newul").slideDown(1e3,function(){$(this).removeClass("newul")}),e.find("ul:gt("+(this.tradesLimit-1)+")").remove()}},{key:"updateDepth",value:function(t){if(r.a.instance.getChart().updateDepth(t),t)if($("#gasks .table").html(this.getgview(this.getgasks(t.asks))),$("#gbids .table").html(this.getgview(this.getgbids(t.bids))),null===this.lastDepth)this.lastDepth={},this.lastDepth.asks=this.getAsks(t.asks,this.depthShowSize),this.depthInit(this.lastDepth.asks,$("#asks .table")),this.lastDepth.bids=this.getBids(t.bids,this.depthShowSize),this.depthInit(this.lastDepth.bids,$("#bids .table"));else{var e=$("#asks .table");e.find("div.remove").remove(),e.find("div.add").removeClass("add");var n=this.getAsks(t.asks,this.depthShowSize),i=this.lastDepth.asks;this.lastDepth.asks=n,this.asksAndBids(n.slice(0),i,e);var o=$("#bids .table");o.find("div.remove").remove(),o.find("div.add").removeClass("add");var a=this.getBids(t.bids,this.depthShowSize),s=this.lastDepth.bids;this.lastDepth.bids=a,this.asksAndBids(a.slice(0),s,$("#bids .table"))}}},{key:"depthInit",value:function(t,e){if(e.empty(),t&&t.length>0){for(var n,r="",i=0;i<t.length;i++){var o=(t[i][0]+"").split("."),a=this.getPrice(o,n);n=o[0],o=(t[i][1]+"").split(".");var s=this.getAmount(o);r+="<div class='row'><span class='price'>"+a[0]+"<g>"+a[1]+"</g></span> <span class='amount'>"+s[0]+"<g>"+s[1]+"</g></span></div>"}e.append(r),r=null}}},{key:"asksAndBids",value:function(t,e,n){for(var r=0;r<e.length;r++){for(var i=!1,o=0;o<t.length;o++)if(e[r][0]===t[o][0]){if(i=!0,e[r][1]!==t[o][1]){var a=n.find("div:eq("+r+") .amount");a.addClass(e[r][1]>t[o][1]?"red":"green");var s=this.getAmount((t[o][1]+"").split("."));setTimeout(function(t,e){return function(){t.html(e[0]+"<g>"+e[1]+"</g>"),t.removeClass("red").removeClass("green"),t=null,e=null}}(a,s),500)}t.splice(o,1);break}i||(n.find("div:eq("+r+")").addClass("remove"),e[r][2]=-1)}for(var u=0;u<e.length;u++)for(var c=0;c<t.length;c++)if(t[c][0]>e[u][0]){var l=(t[c][1]+"").split("."),h=this.getAmount(l);n.find("div:eq("+u+")").before("<div class='row add'><span class='price'></span> <span class='amount'>"+h[0]+"<g>"+h[1]+"</g></span></div>"),e.splice(u,0,t[c]),t.splice(c,1);break}for(var d,f="",p=0;p<t.length;p++){e.push(t[p]);var _=(t[p][1]+"").split("."),g=this.getAmount(_);f+="<div class='row add'><span class='price'></span> <span class='amount'>"+g[0]+"<g>"+g[1]+"</g></span></div>"}f.length>0&&n.append(f),f=null;for(var v=0;v<e.length;v++){var m=n.find("div:eq("+v+")");if(!(e[v].length>=3&&-1===e[v][2])){var y=(e[v][0]+"").split("."),b=this.getPrice(y,d);d=y[0],m.find(".price").html(b[0]+"<g>"+b[1]+"</g>")}}t=null,e=null,n.find("div.add").slideDown(800),setTimeout(function(t,e){return function(){t.slideUp(500,function(){$(this).remove()}),e.removeClass("add")}}(n.find("div.remove"),n.find("div.add")),1e3)}},{key:"getAsks",value:function(t,e){return t.length>e&&t.splice(0,t.length-e),t}},{key:"getBids",value:function(t,e){return t.length>e&&t.splice(e,t.length-1),t}},{key:"getgview",value:function(t){for(var e,n="",r=0;r<t.length;r++){var i=t[r][0].split(".");1===i.length||i[0]!==e?(n+="<div class='row'><span class='price'>"+t[r][0]+"</span> <span class='amount'>"+t[r][1]+"</span></div>",e=i[0]):n+="<div class='row'><span class='price'><h>"+i[0]+".</h>"+i[1]+"</span> <span class='amount'>"+t[r][1]+"</span></div>"}return n}},{key:"getgasks",value:function(t){if(t.length<2)return[];var e=t[t.length-1][0],n=t[0][0],r=n-e,i=this.getBlock(r,100),o=Math.abs(Number(Math.log(i)/Math.log(10))).toFixed(0);r/i<2&&(i/=2,o++),i>=1&&(o=0),e=parseInt(e/i)*i,n=parseInt(n/i)*i;for(var a=[],s=0,u=t.length-1;u>=0;u--){if(t[u][0]>e){var c=parseInt(s,10);if(c>0&&a.unshift([Number(e).toFixed(o),c]),e>=n)break;e+=i}s+=t[u][1]}return a}},{key:"getgbids",value:function(t){if(t.length<2)return[];var e=t[t.length-1][0],n=t[0][0],r=n-e,i=this.getBlock(r,100),o=Math.abs(Number(Math.log(i)/Math.log(10))).toFixed(0);r/i<2&&(i/=2,o++),i>=1&&(o=0),e=parseInt(e/i)*i,n=parseInt(n/i)*i;for(var a=[],s=0,u=0;u<t.length;u++){if(t[u][0]<n){var c=parseInt(s,10);if(c>0&&a.push([Number(n).toFixed(o),c]),n<=e)break;n-=i}s+=t[u][1]}return a}},{key:"getBlock",value:function(t,e){return t>e||t<=0?e:(e/=10,this.getBlock(t,e))}},{key:"getZeros",value:function(t){for(var e="";t>0;)t--,e+="0";return e}},{key:"getPrice",value:function(t,e){var n=t[0];e===n?n="<h>"+n+".</h>":n+=".";var r="";return 1===t.length?(n+="0",r=this.getZeros(this.priceDecimalDigits-1)):(n+=t[1],r=this.getZeros(this.priceDecimalDigits-t[1].length)),[n,r]}},{key:"getAmount",value:function(t){var e=t[0],n="",r=this.amountDecimalDigits-e.length+1;return r>0&&(n=".",1===t.length?n+=this.getZeros(r):r>t[1].length?n+=t[1]+this.getZeros(r-t[1].length):r===t[1].length?n+=t[1]:n+=t[1].substring(0,r)),[e,n]}},{key:"dateFormatTf",value:function(t){return(t<10?"0":"")+t}}]),t}();o.created=!1,o.instance=null},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",function(){return i});var i=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._names=[],this._comps=[],e instanceof t)this._names=e._names,this._comps=e._comps;else{var n=e.split("."),r=n.length-1;if(r>0){this._comps=n,this._names.push(n[0]);for(var i=1;i<=r;i++)this._names.push(this._names[i-1]+"."+n[i])}else this._comps.push(e),this._names.push(e)}}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"getCompAt",value:function(t){return t>=0&&t<this._comps.length?this._comps[t]:""}},{key:"getName",value:function(t){if(t<0){if(this._names.length>0)return this._names[this._names.length-1]}else if(t<this._names.length)return this._names[t];return""}}]),t}()},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}n.d(e,"l",function(){return d}),n.d(e,"x",function(){return p}),n.d(e,"o",function(){return _}),n.d(e,"r",function(){return g}),n.d(e,"e",function(){return v}),n.d(e,"H",function(){return m}),n.d(e,"f",function(){return y}),n.d(e,"z",function(){return b}),n.d(e,"w",function(){return P}),n.d(e,"b",function(){return T}),n.d(e,"F",function(){return k}),n.d(e,"v",function(){return I}),n.d(e,"h",function(){return S}),n.d(e,"m",function(){return D}),n.d(e,"s",function(){return O}),n.d(e,"j",function(){return R}),n.d(e,"u",function(){return M}),n.d(e,"a",function(){return x}),n.d(e,"B",function(){return N}),n.d(e,"c",function(){return L}),n.d(e,"p",function(){return U}),n.d(e,"d",function(){return j}),n.d(e,"y",function(){return B}),n.d(e,"A",function(){return F}),n.d(e,"n",function(){return V}),n.d(e,"q",function(){return G}),n.d(e,"g",function(){return K}),n.d(e,"G",function(){return Y}),n.d(e,"E",function(){return H}),n.d(e,"t",function(){return z}),n.d(e,"i",function(){return q}),n.d(e,"k",function(){return X}),n.d(e,"D",function(){return Q}),n.d(e,"C",function(){return Z});var d=function(){function t(){c(this,t),this._ds=null,this._firstIndex=null}return h(t,[{key:"getDataSource",value:function(){return this._ds}},{key:"setDataSource",value:function(t){return this._ds=t}},{key:"getFirstIndex",value:function(){return this._firstIndex}},{key:"setFirstIndex",value:function(t){return this._firstIndex=t}}],[{key:"get",value:function(){return this.inst}},{key:"set",value:function(t){this.inst=t}}]),t}();d.inst=null;var f=function(){function t(){c(this,t),this._rid=0}return h(t,[{key:"execute",value:function(t){}},{key:"reserve",value:function(t,e){}},{key:"clear",value:function(){}}]),t}(),p=function(t){function e(){return c(this,e),o(this,a(e).apply(this,arguments))}return s(e,f),h(e,[{key:"execute",value:function(t){return d.get()._ds.getDataAt(t).open}}]),e}(),_=function(t){function e(){return c(this,e),o(this,a(e).apply(this,arguments))}return s(e,f),h(e,[{key:"execute",value:function(t){return d.get()._ds.getDataAt(t).high}}]),e}(),g=function(t){function e(){return c(this,e),o(this,a(e).apply(this,arguments))}return s(e,f),h(e,[{key:"execute",value:function(t){return d.get()._ds.getDataAt(t).low}}]),e}(),v=function(t){function e(){return c(this,e),o(this,a(e).apply(this,arguments))}return s(e,f),h(e,[{key:"execute",value:function(t){return d.get()._ds.getDataAt(t).close}}]),e}(),m=function(t){function e(){return c(this,e),o(this,a(e).apply(this,arguments))}return s(e,f),h(e,[{key:"execute",value:function(t){return d.get()._ds.getDataAt(t).volume}}]),e}(),y=function(t){function e(t){var n;return c(this,e),(n=o(this,a(e).call(this)))._value=t,n}return s(e,f),h(e,[{key:"execute",value:function(t){return this._value}}]),e}(),b=function(t){function e(t,n,r,i){var s;return c(this,e),(s=o(this,a(e).call(this)))._name=t,s._minValue=n,s._maxValue=r,s._value=s._defaultValue=i,s}return s(e,f),h(e,[{key:"execute",value:function(t){return this._value}},{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getDefaultValue",value:function(){return this._defaultValue}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(t){0===t?this._value=0:t<this._minValue?this._value=this._minValue:t>this._maxValue?this._value=this._maxValue:this._value=t}}]),e}(),w=function(t){function e(t){var n;return c(this,e),(n=o(this,a(e).call(this)))._exprA=t,n}return s(e,f),h(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear()}}]),e}(),E=function(t){function e(t,n){var r;return c(this,e),(r=o(this,a(e).call(this)))._exprA=t,r._exprB=n,r}return s(e,f),h(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear()}}]),e}(),C=function(t){function e(t,n,r){var i;return c(this,e),(i=o(this,a(e).call(this)))._exprA=t,i._exprB=n,i._exprC=r,i}return s(e,f),h(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e),this._exprC.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear()}}]),e}(),A=function(t){function e(t,n,r,i){var s;return c(this,e),(s=o(this,a(e).call(this)))._exprA=t,s._exprB=n,s._exprC=r,s._exprD=i,s}return s(e,f),h(e,[{key:"reserve",value:function(t,e){this._rid<t&&(this._rid=t,this._exprA.reserve(t,e),this._exprB.reserve(t,e),this._exprC.reserve(t,e),this._exprD.reserve(t,e))}},{key:"clear",value:function(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear(),this._exprD.clear()}}]),e}(),P=function(t){function e(t){return c(this,e),o(this,a(e).call(this,t))}return s(e,w),h(e,[{key:"execute",value:function(t){return-this._exprA.execute(t)}}]),e}(),T=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,E),h(e,[{key:"execute",value:function(t){return this._exprA.execute(t)+this._exprB.execute(t)}}]),e}(),k=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,E),h(e,[{key:"execute",value:function(t){return this._exprA.execute(t)-this._exprB.execute(t)}}]),e}(),I=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,E),h(e,[{key:"execute",value:function(t){return this._exprA.execute(t)*this._exprB.execute(t)}}]),e}(),S=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,E),h(e,[{key:"execute",value:function(t){var e=this._exprA.execute(t),n=this._exprB.execute(t);return 0===e?e:0===n?e>0?1e6:-1e6:e/n}}]),e}(),D=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,E),h(e,[{key:"execute",value:function(t){return this._exprA.execute(t)>this._exprB.execute(t)?1:0}}]),e}(),O=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,E),h(e,[{key:"execute",value:function(t){return this._exprA.execute(t)<this._exprB.execute(t)?1:0}}]),e}(),R=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,E),h(e,[{key:"execute",value:function(t){return this._exprA.execute(t)===this._exprB.execute(t)?1:0}}]),e}(),M=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,E),h(e,[{key:"execute",value:function(t){return Math.max(this._exprA.execute(t),this._exprB.execute(t))}}]),e}(),x=function(t){function e(t){return c(this,e),o(this,a(e).call(this,t))}return s(e,w),h(e,[{key:"execute",value:function(t){return Math.abs(this._exprA.execute(t))}}]),e}(),N=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,E),h(e,[{key:"execute",value:function(t){if((void 0===this._offset||this._offset<0)&&(this._offset=this._exprB.execute(t),this._offset<0))throw"offset < 0";if((t-=this._offset)<0)throw"index < 0";var e=this._exprA.execute(t);if(isNaN(e))throw"NaN";return e}}]),e}(),L=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,E),h(e,[{key:"execute",value:function(t){return 0!==this._exprA.execute(t)&&0!==this._exprB.execute(t)?1:0}}]),e}(),U=function(t){function e(t,n,r){return c(this,e),o(this,a(e).call(this,t,n,r))}return s(e,C),h(e,[{key:"execute",value:function(t){return 0!==this._exprA.execute(t)?this._exprB.execute(t):this._exprC.execute(t)}}]),e}(),j=function(t){function e(t,n){var r;return c(this,e),(r=o(this,a(e).call(this,n)))._name=t,r._buf=[],r}return s(e,w),h(e,[{key:"getName",value:function(){return this._name}},{key:"execute",value:function(t){return this._buf[t]}},{key:"assign",value:function(t){if(this._buf[t]=this._exprA.execute(t),d.get()._firstIndex>=0&&isNaN(this._buf[t])&&!isNaN(this._buf[t-1]))throw this._name+".assign("+t+"): NaN"}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var r=n;r>0;r--)this._buf.push(NaN);i(a(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){i(a(e.prototype),"clear",this).call(this),this._buf=[]}}]),e}(),B=function(t){function e(t,n,r,i){var s;return c(this,e),(s=o(this,a(e).call(this,t,n)))._style=void 0===r?e.outputStyle.Line:r,s._color=i,s}return s(e,j),h(e,[{key:"getStyle",value:function(){return this._style}},{key:"getColor",value:function(){return this._color}}]),e}();B.outputStyle={None:0,Line:1,VolumeStick:2,MACDStick:3,SARPoint:4};var F=function(t){function e(t,n,r,i){return c(this,e),o(this,a(e).call(this,t,n,r,i))}return s(e,B),h(e,[{key:"getName",value:function(){return this._name+this._exprA.getRange()}}]),e}(),W=function(t){function e(t,n){var r;return c(this,e),(r=o(this,a(e).call(this,t,n)))._range=-1,r._buf=[],r}return s(e,E),h(e,[{key:"getRange",value:function(){return this._range}},{key:"initRange",value:function(){this._range=this._exprB.execute(0)}},{key:"execute",value:function(t){this._range<0&&this.initRange();var e=this._buf[t].resultA=this._exprA.execute(t);return this._buf[t].result=this.calcResult(t,e)}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var r=n;r>0;r--)this._buf.push({resultA:NaN,result:NaN});i(a(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){i(a(e.prototype),"clear",this).call(this),this._range=-1,this._buf=[]}}]),e}(),V=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,W),h(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=d.get()._firstIndex;if(n<0)return e;if(t>n){for(var r=e,i=t-this._range+1,o=Math.max(n,i);o<t;o++){var a=this._buf[o];r<a.resultA&&(r=a.resultA)}return r}return e}}]),e}(),G=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,W),h(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=d.get()._firstIndex;if(n<0)return e;if(t>n){for(var r=e,i=t-this._range+1,o=Math.max(n,i);o<t;o++){var a=this._buf[o];r>a.resultA&&(r=a.resultA)}return r}return e}}]),e}(),K=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,W),h(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=d.get()._firstIndex;if(n<0)return 0;if(t>=n){var r=this._range-1;r>t-n&&(r=t-n);for(var i=0;r>=0;r--)0!==this._buf[t-r].resultA&&i++;return i}return 0}}]),e}(),Y=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,W),h(e,[{key:"calcResult",value:function(t,e){var n=d.get()._firstIndex;if(n<0)return e;if(t>n){var r=this._range;return 0===r||r>=t+1-n?this._buf[t-1].result+e:this._buf[t-1].result+e-this._buf[t-r].resultA}return e}}]),e}(),H=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,W),h(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=this._stdBuf[t],r=d.get()._firstIndex;if(r<0)return n.resultMA=e,0;if(t>r){var i=this._range;i>=t+1-r?(i=t+1-r,n.resultMA=this._stdBuf[t-1].resultMA*(1-1/i)+e/i):n.resultMA=this._stdBuf[t-1].resultMA+(e-this._buf[t-i].resultA)/i;for(var o=0,a=t-i+1;a<=t;a++)o+=Math.pow(this._buf[a].resultA-n.resultMA,2);return Math.sqrt(o/i)}return n.resultMA=e,0}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var r=n;r>0;r--)this._stdBuf.push({resultMA:NaN});i(a(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){i(a(e.prototype),"clear",this).call(this),this._stdBuf=[]}}]),e}(),z=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,W),h(e,[{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=d.get()._firstIndex;if(n<0)return e;if(t>n){var r=this._range;return r>=t+1-n?(r=t+1-n,this._buf[t-1].result*(1-1/r)+e/r):this._buf[t-1].result+(e-this._buf[t-r].resultA)/r}return e}}]),e}(),q=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,W),h(e,[{key:"initRange",value:function(){i(a(e.prototype),"initRange",this).call(this),this._alpha=2/(this._range+1)}},{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=d.get()._firstIndex;if(n<0)return e;if(t>n){var r=this._buf[t-1];return this._alpha*(e-r.result)+r.result}return e}}]),e}(),X=function(t){function e(t,n){return c(this,e),o(this,a(e).call(this,t,n))}return s(e,q),h(e,[{key:"calcResult",value:function(t,e){var n=d.get()._firstIndex;if(n<0)return e;if(t>n){var r=this._range,i=this._buf[t-1];return r>=t+1-n?(r=t+1-n,i.result*(1-1/r)+e/r):this._alpha*(e-i.result)+i.result}return e}}]),e}(),Q=function(t){function e(t,n,r){var i;return c(this,e),(i=o(this,a(e).call(this,t,n)))._exprC=r,i._mul=null,i}return s(e,W),h(e,[{key:"initRange",value:function(){i(a(e.prototype),"initRange",this).call(this),this._mul=this._exprC.execute(0)}},{key:"calcResult",value:function(t,e){if(0===this._range)return NaN;var n=d.get()._firstIndex;if(n<0)return e;if(t>n){var r=this._range;return r>t+1-n&&(r=t+1-n),((r-1)*this._buf[t-1].result+e*this._mul)/r}return e}}]),e}(),Z=function(t){function e(t,n,r,i){var s;return c(this,e),(s=o(this,a(e).call(this,t,n,r,i)))._buf=[],s._range=-1,s._min=null,s._step=null,s._max=null,s}return s(e,A),h(e,[{key:"execute",value:function(t){this._range<0&&(this._range=this._exprA.execute(0),this._min=this._exprB.execute(0)/100,this._step=this._exprC.execute(0)/100,this._max=this._exprD.execute(0)/100);var e=this._buf[t],n=d.get(),r=n._firstIndex;if(r<0)e.longPos=!0,e.sar=n._ds.getDataAt(t).low,e.ep=n._ds.getDataAt(t).high,e.af=.02;else{var i=n._ds.getDataAt(t).high,o=n._ds.getDataAt(t).low,a=this._buf[t-1];if(e.sar=a.sar+a.af*(a.ep-a.sar),a.longPos){if(e.longPos=!0,i>a.ep?(e.ep=i,e.af=Math.min(a.af+this._step,this._max)):(e.ep=a.ep,e.af=a.af),e.sar>o){e.longPos=!1;var s=t-this._range+1;for(s=Math.max(s,r);s<t;s++){var u=n._ds.getDataAt(s).high;i<u&&(i=u)}e.sar=i,e.ep=o,e.af=.02}}else if(e.longPos=!1,o<a.ep?(e.ep=o,e.af=Math.min(a.af+this._step,this._max)):(e.ep=a.ep,e.af=a.af),e.sar<i){e.longPos=!0;var c=t-this._range+1;for(c=Math.max(c,r);c<t;c++){var l=n._ds.getDataAt(c).low;o>l&&(o=l)}e.sar=o,e.ep=i,e.af=.02}}return e.sar}},{key:"reserve",value:function(t,n){if(this._rid<t)for(var r=n;r>0;r--)this._buf.push({longPos:!0,sar:NaN,ep:NaN,af:NaN});i(a(e.prototype),"reserve",this).call(this,t,n)}},{key:"clear",value:function(){i(a(e.prototype),"clear",this).call(this),this._range=-1}}]),e}()},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",function(){return i});var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._handlers=[]}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"addHandler",value:function(t,e){this.indexOf(t,e)<0&&this._handlers.push({obj:t,func:e})}},{key:"removeHandler",value:function(t,e){var n=this.indexOf(t,e);n>=0&&this._handlers.splice(n,1)}},{key:"raise",value:function(t,e){var n,r=this._handlers,i=r.length;for(n=0;n<i;n++)r[n].func(t,e)}},{key:"indexOf",value:function(t,e){var n,r,i=this._handlers,o=i.length;for(r=0;r<o;r++)if(t===(n=i[r]).obj&&e===n.func)return r;return-1}}]),t}()},function(t,e,n){"use strict";n.d(e,"d",function(){return f}),n.d(e,"c",function(){return p}),n.d(e,"e",function(){return _}),n.d(e,"a",function(){return g}),n.d(e,"f",function(){return v}),n.d(e,"b",function(){return m});var r=n(1),i=n(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function c(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(t){var n;return a(this,e),(n=c(this,l(e).call(this,t)))._updated=!0,n._minValue=Number.MAX_VALUE,n._maxValue=-Number.MAX_VALUE,n._outerMinValue=Number.MAX_VALUE,n._outerMaxValue=-Number.MAX_VALUE,n._ratio=0,n._top=0,n._bottom=0,n._paddingTop=0,n._paddingBottom=0,n._minInterval=36,n._selectedPosition=-1,n._selectedValue=-Number.MAX_VALUE,n._gradations=[],n}return h(e,r["a"]),u(e,[{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(t){this._updated=t}},{key:"getMinValue",value:function(){return this._minValue}},{key:"getMaxValue",value:function(){return this._maxValue}},{key:"getRange",value:function(){return this._maxValue-this._minValue}},{key:"getOuterMinValue",value:function(){return this._outerMinValue}},{key:"getOuterMaxValue",value:function(){return this._outerMaxValue}},{key:"getOuterRange",value:function(){return this._outerMaxValue-this._outerMinValue}},{key:"getHeight",value:function(){return Math.max(0,this._bottom-this._top)}},{key:"getGradations",value:function(){return this._gradations}},{key:"getMinInterval",value:function(){return this._minInterval}},{key:"setMinInterval",value:function(t){this._minInterval=t}},{key:"getSelectedPosition",value:function(){return this._selectedPosition>=0?this._selectedPosition:this._selectedValue>-Number.MAX_VALUE?this.toY(this._selectedValue):-1}},{key:"getSelectedValue",value:function(){if(this._selectedValue>-Number.MAX_VALUE)return this._selectedValue;var t=i.a.instance.getArea(this.getAreaName());return null===t?-Number.MAX_VALUE:this._selectedPosition<t.getTop()+12||this._selectedPosition>=t.getBottom()-4?-Number.MAX_VALUE:this.toValue(this._selectedPosition)}},{key:"setPaddingTop",value:function(t){this._paddingTop=t}},{key:"setPaddingBottom",value:function(t){this._paddingBottom=t}},{key:"toValue",value:function(t){return this._maxValue-(t-this._top)/this._ratio}},{key:"toY",value:function(t){return this._ratio>0?this._top+Math.floor((this._maxValue-t)*this._ratio+.5):this._top}},{key:"toHeight",value:function(t){return Math.floor(t*this._ratio+1.5)}},{key:"update",value:function(){for(var t,e=Number.MAX_VALUE,n=-Number.MAX_VALUE,r=i.a.instance,o=[".main",".secondary"],a=0;a<o.length;a++)null!==(t=r.getDataProvider(this.getName()+o[a]))&&void 0!==t&&(e=Math.min(e,t.getMinValue()),n=Math.max(n,t.getMaxValue()));var s={min:e,max:n};this.preSetRange(s),this.setRange(s.min,s.max)}},{key:"select",value:function(t){this._selectedValue=t,this._selectedPosition=-1}},{key:"selectAt",value:function(t){this._selectedPosition=t,this._selectedValue=-Number.MAX_VALUE}},{key:"unselect",value:function(){this._selectedPosition=-1,this._selectedValue=-Number.MAX_VALUE}},{key:"preSetRange",value:function(t){t.min===t.max&&(t.min=-1,t.max=1)}},{key:"setRange",value:function(t,e){var n=i.a.instance.getArea(this.getAreaName());if(this._minValue!==t||this._maxValue!==e||n.isChanged()){this._updated=!0,this._minValue=t,this._maxValue=e,this._gradations=[];var r=n.getTop()+this._paddingTop,o=n.getBottom()-(this._paddingBottom+1);r>=o?this._minValue=this._maxValue:(this._top=r,this._bottom=o,this._maxValue>this._minValue?this._ratio=(o-r)/(this._maxValue-this._minValue):this._ratio=1,this._outerMinValue=this.toValue(n.getBottom()),this._outerMaxValue=this.toValue(n.getTop()),this.updateGradations())}}},{key:"calcInterval",value:function(){var t=this.getHeight(),e=this.getMinInterval();t/e<=1&&(e=t>>1);for(var n,r,i=this.getRange(),o=0;o>-2&&Math.floor(i)<i;)i*=10,o--;for(;(n=r=Math.pow(10,o),!(this.toHeight(n)>e))&&(n=2*r,!(this.toHeight(n)>e))&&(n=5*r,!(this.toHeight(n)>e));o++);return n}},{key:"updateGradations",value:function(){this._gradations=[];var t=this.calcInterval();if(!(t<=0)){var e=Math.floor(this.getMaxValue()/t)*t;do{this._gradations.push(e),e-=t}while(e>this.getMinValue())}}}]),e}(),p=function(t){function e(t){return a(this,e),c(this,l(e).call(this,t))}return h(e,f),u(e,[{key:"preSetRange",value:function(t){t.min<0&&(t.min=0),t.max<0&&(t.max=0)}}]),e}(),_=function(t){function e(t){return a(this,e),c(this,l(e).call(this,t))}return h(e,f),u(e,[{key:"preSetRange",value:function(t){t.min=0,t.max<0&&(t.max=0)}}]),e}(),g=function(t){function e(t){return a(this,e),c(this,l(e).call(this,t))}return h(e,f),u(e,[{key:"preSetRange",value:function(t){var e=i.a.instance,n=e.getTimeline(this.getDataSourceName()),r=n.getMaxIndex()-n.getLastIndex();if(r<25){var o=e.getDataSource(this.getDataSourceName()),a=o.getDataAt(o.getDataCount()-1),s=(t.max-t.min)/4*(1-r/25);t.min=Math.min(t.min,Math.max(a.low-s,0)),t.max=Math.max(t.max,a.high+s)}if(t.min>0){var u=t.max/t.min;if(u<1.016){var c=(t.max+t.min)/2,l=1.5*(u-1);t.max=c*(1+l),t.min=c*(1-l)}else if(u<1.048){var h=(t.max+t.min)/2;t.max=1.024*h,t.min=.976*h}}t.min<0&&(t.min=0),t.max<0&&(t.max=0)}}]),e}(),v=function(t){function e(t){return a(this,e),c(this,l(e).call(this,t))}return h(e,f),u(e,[{key:"calcInterval",value:function(t){var e=this.getMinInterval();if(t.getHeight()/e<2)return 0;var n,r=this.getRange();for(n=3;!(this.toHeight(r/n)<=e);n+=2)if(n>100)return console.log("强制退出"),0;return r/(n-=2)}},{key:"updateGradations",value:function(){this._gradations=[];var t=i.a.instance.getArea(this.getAreaName()),e=this.calcInterval(t);if(!(e<=0)){var n=e/2;do{this._gradations.push(n),this._gradations.push(-n),n+=e}while(n<=this.getMaxValue())}}},{key:"preSetRange",value:function(t){var e=Math.max(Math.abs(t.min),Math.abs(t.max));t.min=-e,t.max=e}}]),e}(),m=function(t){function e(t){return a(this,e),c(this,l(e).call(this,t))}return h(e,f),u(e,[{key:"updateGradations",value:function(){this._gradations=[];var t=i.a.instance.getArea(this.getAreaName()),e=Math.floor(this.toHeight(10));if(!(e<<2>t.getHeight())){var n=10*Math.ceil(this.getMinValue()/10);if(0===n&&(n=0),e<<2<24){if(e<<1<8)return;do{20!==n&&80!==n||this._gradations.push(n),n+=10}while(n<this.getMaxValue())}else do{e<8?20!==n&&50!==n&&80!==n||this._gradations.push(n):0!==n&&20!==n&&50!==n&&80!==n&&100!==n||this._gradations.push(n),n+=10}while(n<this.getMaxValue())}}}]),e}()},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE_23__},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!l){var t=s(d);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function _(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);window.Kline=r.a,e.default=r.a},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(0),i=n(10),o=n(3),a=n(8);function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=null,this._charStyle="CandleStick",this._depthData={array:null,asks_count:0,bids_count:0,asks_si:0,asks_ei:0,bids_si:0,bids_ei:0},this.strIsLine=!1,this._range=o.a.instance.range,this._symbol=o.a.instance.symbol}return function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(t,[{key:"setTitle",value:function(){var e=r.a.instance.getLanguage(),n=o.a.instance.symbolName;n+=" ",n+=this.strIsLine?t.strPeriod[e].line:t.strPeriod[e][this._range],n+=(this._contract_unit+"/"+this._money_type).toUpperCase(),r.a.instance.setTitle("frame0.k0",n)}},{key:"setSymbol",value:function(t){this._symbol=t,this.updateDataAndDisplay()}},{key:"updateDataAndDisplay",value:function(){o.a.instance.symbol=this._symbol,o.a.instance.range=this._range,r.a.instance.setCurrentDataSource("frame0.k0",this._symbol+"."+this._range),r.a.instance.setNormalMode();var t=o.a.instance.chartMgr.getDataSource("frame0.k0").getLastDate();$(".symbol-title>a").text(o.a.instance.symbolName),-1===t?(o.a.instance.requestParam=i.a.setHttpRequestParam(o.a.instance.symbol,o.a.instance.range,o.a.instance.limit,null),i.a.requestData(!0)):(o.a.instance.requestParam=i.a.setHttpRequestParam(o.a.instance.symbol,o.a.instance.range,null,t.toString()),i.a.requestData()),r.a.instance.redraw("All",!1)}},{key:"setCurrentContractUnit",value:function(t){this._contract_unit=t,this.updateDataAndDisplay()}},{key:"setCurrentMoneyType",value:function(t){this._money_type=t,this.updateDataAndDisplay()}},{key:"setCurrentPeriod",value:function(t){this._range=o.a.instance.periodMap[t],"stomp"===o.a.instance.type&&1===o.a.instance.stompClient.ws.readyState&&(o.a.instance.subscribed.unsubscribe(),o.a.instance.subscribed=o.a.instance.stompClient.subscribe(o.a.instance.subscribePath+"/"+o.a.instance.symbol+"/"+this._range,i.a.subscribeCallback)),this.updateDataAndDisplay(),o.a.instance.onRangeChange(this._range)}},{key:"updateDataSource",value:function(t){this._data=t,r.a.instance.updateData("frame0.k0",this._data)}},{key:"updateDepth",value:function(t){if(null===t)return this._depthData.array=[],void r.a.instance.redraw("All",!1);if(t.asks&&t.bids&&""!==t.asks&&""!==t.bids){var e=this._depthData;e.array=[];for(var n=0;n<t.asks.length;n++){var i={};i.rate=t.asks[n][0],i.amount=t.asks[n][1],e.array.push(i)}for(var o=0;o<t.bids.length;o++){var a={};a.rate=t.bids[o][0],a.amount=t.bids[o][1],e.array.push(a)}e.asks_count=t.asks.length,e.bids_count=t.bids.length,e.asks_si=e.asks_count-1,e.asks_ei=0,e.bids_si=e.asks_count-1,e.bids_ei=e.asks_count+e.bids_count-2;for(var s=e.asks_si;s>=e.asks_ei;s--)s===e.asks_si&&void 0!==e.array[s]?e.array[s].amounts=e.array[s].amount:void 0!==e.array[s+1]&&(e.array[s].amounts=e.array[s+1].amounts+e.array[s].amount);for(var u=e.bids_si;u<=e.bids_ei;u++)u===e.bids_si&&void 0!==e.array[u]?e.array[u].amounts=e.array[u].amount:void 0!==e.array[u-1]&&(e.array[u].amounts=e.array[u-1].amounts+e.array[u].amount);r.a.instance.redraw("All",!1)}}},{key:"setMainIndicator",value:function(t){this._mainIndicator=t,"NONE"===t?r.a.instance.removeMainIndicator("frame0.k0"):r.a.instance.setMainIndicator("frame0.k0",t),r.a.instance.redraw("All",!0)}},{key:"setIndicator",value:function(t,e){if("NONE"===e){var n=2;!1===a.b.displayVolume&&(n=1);var i=r.a.instance.getIndicatorAreaName("frame0.k0",n);""!==i&&r.a.instance.removeIndicator(i)}else{var o=2;!1===a.b.displayVolume&&(o=1);var s=r.a.instance.getIndicatorAreaName("frame0.k0",o);""===s?a.b.createIndicatorChartComps("frame0.k0",e):r.a.instance.setIndicator(s,e)}r.a.instance.redraw("All",!0)}},{key:"addIndicator",value:function(t){r.a.instance.addIndicator(t),r.a.instance.redraw("All",!0)}},{key:"removeIndicator",value:function(t){var e=r.a.instance.getIndicatorAreaName(2);r.a.instance.removeIndicator(e),r.a.instance.redraw("All",!0)}}]),t}();u.strPeriod={"zh-cn":{line:"(分时)","1min":"(1分钟)","5min":"(5分钟)","15min":"(15分钟)","30min":"(30分钟)","1hour":"(1小时)","1day":"(日线)","1week":"(周线)","3min":"(3分钟)","2hour":"(2小时)","4hour":"(4小时)","6hour":"(6小时)","12hour":"(12小时)","3day":"(3天)"},"en-us":{line:"(Line)","1min":"(1m)","5min":"(5m)","15min":"(15m)","30min":"(30m)","1hour":"(1h)","1day":"(1d)","1week":"(1w)","3min":"(3m)","2hour":"(2h)","4hour":"(4h)","6hour":"(6h)","12hour":"(12h)","3day":"(3d)"},"zh-tw":{line:"(分時)","1min":"(1分鐘)","5min":"(5分鐘)","15min":"(15分鐘)","30min":"(30分鐘)","1hour":"(1小時)","1day":"(日線)","1week":"(周線)","3min":"(3分鐘)","2hour":"(2小時)","4hour":"(4小時)","6hour":"(6小時)","12hour":"(12小時)","3day":"(3天)"}}},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(1),i=n(11),o=n(12);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=u(this,c(e).call(this,t))).selectedObject=-1,n.toolObjects=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,r["a"]),function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(e,[{key:"getToolObjectCount",value:function(){return this.toolObjects.length}},{key:"addToolObject",value:function(t){this.toolObjects.push(t)}},{key:"getToolObject",value:function(t){return t<this.toolObjects.length&&t>=0?this.toolObjects[t]:null}},{key:"getCurrentObject",value:function(){return this.getToolObject(this.getToolObjectCount()-1)}},{key:"getSelectedObject",value:function(){return this.getToolObject(this.selectedObject)}},{key:"delCurrentObject",value:function(){this.toolObjects.splice(this.getToolObjectCount()-1,1)}},{key:"delSelectedObject",value:function(){this.toolObjects.splice(this.selectedObject,1),this.selectedObject=-1}},{key:"acceptMouseMoveEvent",value:function(t,e){if(-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];if(null!==n&&void 0!==n&&n.getState()!==o.n.state.AfterDraw)return n.acceptMouseMoveEvent(t,e)}else{var r=this.toolObjects[this.selectedObject];if(r.getState()===o.n.state.Draw)return r.acceptMouseMoveEvent(t,e);r.unselect(),this.selectedObject=-1}for(var i in this.toolObjects)if(this.toolObjects[i].isSelected(t,e))return this.selectedObject=i,!1;return!1}},{key:"acceptMouseDownEvent",value:function(t,e){if(this.mouseDownMove=!1,-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];if(null!==n&&void 0!==n&&n.getState()!==o.n.state.AfterDraw)return n.acceptMouseDownEvent(t,e)}else{var r=this.toolObjects[this.selectedObject];if(r.getState()!==o.n.state.BeforeDraw)return r.acceptMouseDownEvent(t,e)}return!1}},{key:"acceptMouseDownMoveEvent",value:function(t,e){if(this.mouseDownMove=!0,-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];return null!==n&&void 0!==n&&n.getState()===o.n.state.Draw&&n.acceptMouseDownMoveEvent(t,e)}var r=this.toolObjects[this.selectedObject];if(r.getState()!==o.n.state.BeforeDraw){if(!0===r.acceptMouseDownMoveEvent(t,e))for(var a=this.toolObjects[this.selectedObject].points,s=0;s<a.length;s++)if(a[s].state===i.a.state.Highlight||a[s].state===i.a.state.Show)return!0;return!0}}},{key:"acceptMouseUpEvent",value:function(t,e){if(!0===this.mouseDownMove){if(-1===this.selectedObject){var n=this.toolObjects[this.getToolObjectCount()-1];return null===n||void 0===n||n.getState()!==o.n.state.Draw||n.acceptMouseUpEvent(t,e)}var r=this.toolObjects[this.selectedObject];if(r.getState()!==o.n.state.BeforeDraw)return r.acceptMouseUpEvent(t,e)}if(-1!==this.selectedObject)return!0;var i=this.toolObjects[this.getToolObjectCount()-1];if(null!==i&&void 0!==i){if(i.getState()===o.n.state.Draw)return!0;if(!i.isValidMouseXY(t,e))return!1;if(i.isSelected(t,e))return!0}return!1}}]),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(1),i=n(0),o=n(2);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=u(this,c(e).call(this,t)))._updated=!1,n._innerLeft=0,n._innerWidth=0,n._firstColumnLeft=0,n._scale=3,n._lastScale=-1,n._maxItemCount=0,n._maxIndex=0,n._firstIndex=-1,n._selectedIndex=-1,n._savedFirstIndex=-1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,r["a"]),function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(e,[{key:"isLatestShown",value:function(){return this.getLastIndex()===this._maxIndex}},{key:"isUpdated",value:function(){return this._updated}},{key:"setUpdated",value:function(t){this._updated=t}},{key:"getItemWidth",value:function(){return e.itemWidth[this._scale]}},{key:"getSpaceWidth",value:function(){return e.spaceWidth[this._scale]}},{key:"getColumnWidth",value:function(){return this.getSpaceWidth()+this.getItemWidth()}},{key:"getInnerWidth",value:function(){return this._innerWidth}},{key:"getItemLeftOffset",value:function(){return this.getSpaceWidth()}},{key:"getItemCenterOffset",value:function(){return this.getSpaceWidth()+(this.getItemWidth()>>1)}},{key:"getFirstColumnLeft",value:function(){return this._firstColumnLeft}},{key:"getMaxItemCount",value:function(){return this._maxItemCount}},{key:"getFirstIndex",value:function(){return this._firstIndex}},{key:"getLastIndex",value:function(){return Math.min(this._firstIndex+this._maxItemCount,this._maxIndex)}},{key:"getSelectedIndex",value:function(){return this._selectedIndex}},{key:"getMaxIndex",value:function(){return this._maxIndex}},{key:"calcColumnCount",value:function(t){return Math.floor(t/this.getColumnWidth())<<0}},{key:"calcFirstColumnLeft",value:function(t){return this._innerLeft+this._innerWidth-this.getColumnWidth()*t}},{key:"calcFirstIndexAlignRight",value:function(t,e,n){return Math.max(0,t+Math.max(e,1)-Math.max(n,1))}},{key:"calcFirstIndex",value:function(t){return this.validateFirstIndex(this.calcFirstIndexAlignRight(this._firstIndex,this._maxItemCount,t),t)}},{key:"updateMaxItemCount",value:function(){var t,e=this.calcColumnCount(this._innerWidth);if(this._maxItemCount<1)t=this.calcFirstIndex(e);else if(this._lastScale===this._scale)t=this.validateFirstIndex(this._firstIndex-(e-this._maxItemCount));else{var n=this._selectedIndex>=0?this._selectedIndex:this.getLastIndex()-1;t=this.validateFirstIndex(n-Math.round((n-this._firstIndex)*e/this._maxItemCount))}this._lastScale=this._scale,this._firstIndex!==t&&(this._selectedIndex===this._firstIndex&&(this._selectedIndex=t),this._firstIndex=t,this._updated=!0),this._maxItemCount!==e&&(this._maxItemCount=e,this._updated=!0),this._firstColumnLeft=this.calcFirstColumnLeft(e)}},{key:"validateFirstIndex",value:function(t,e){if(this._maxIndex<1)return-1;if(t<0)return 0;var n=Math.max(0,this._maxIndex-1);return t>n?n:t}},{key:"validateSelectedIndex",value:function(){this._selectedIndex<this._firstIndex?this._selectedIndex=-1:this._selectedIndex>=this.getLastIndex()&&(this._selectedIndex=-1)}},{key:"onLayout",value:function(){var t=i.a.instance.getArea(this.getDataSourceName()+".main");if(null!==t){this._innerLeft=t.getLeft()+e.PADDING_LEFT;var n=Math.max(0,t.getWidth()-(e.PADDING_LEFT+e.PADDING_RIGHT));this._innerWidth!==n&&(this._innerWidth=n,this.updateMaxItemCount())}}},{key:"toIndex",value:function(t){return this._firstIndex+this.calcColumnCount(t-this._firstColumnLeft)}},{key:"toColumnLeft",value:function(t){return this._firstColumnLeft+this.getColumnWidth()*(t-this._firstIndex)}},{key:"toItemLeft",value:function(t){return this.toColumnLeft(t)+this.getItemLeftOffset()}},{key:"toItemCenter",value:function(t){return this.toColumnLeft(t)+this.getItemCenterOffset()}},{key:"selectAt",value:function(t){return this._selectedIndex=this.toIndex(t),this.validateSelectedIndex(),this._selectedIndex>=0}},{key:"unselect",value:function(){this._selectedIndex=-1}},{key:"update",value:function(){var t=i.a.instance.getDataSource(this.getDataSourceName()),e=this._maxIndex;switch(this._maxIndex=t.getDataCount(),t.getUpdateMode()){case o.a.UpdateMode.Refresh:this._maxIndex<1?this._firstIndex=-1:this._firstIndex=Math.max(this._maxIndex-this._maxItemCount,0),this._selectedIndex=-1,this._updated=!0;break;case o.a.UpdateMode.Append:var n=this.getLastIndex(),r=t.getErasedCount();n<e?r>0&&(this._firstIndex=Math.max(this._firstIndex-r,0),this._selectedIndex>=0&&(this._selectedIndex-=r,this.validateSelectedIndex()),this._updated=!0):n===e&&(this._firstIndex+=this._maxIndex-e,this._selectedIndex>=0&&(this._selectedIndex-=r,this.validateSelectedIndex()),this._updated=!0)}}},{key:"move",value:function(t){return this.isLatestShown()&&i.a.instance.getArea(this.getDataSourceName()+".mainRange").setChanged(!0),this._firstIndex=this.validateFirstIndex(this._savedFirstIndex-this.calcColumnCount(t),this._maxItemCount),this._updated=!0,this._selectedIndex>=0&&this.validateSelectedIndex(),this._firstIndex}},{key:"startMove",value:function(){this._savedFirstIndex=this._firstIndex}},{key:"scale",value:function(t){this._scale+=t,this._scale<0?this._scale=0:this._scale>=e.itemWidth.length&&(this._scale=e.itemWidth.length-1),this.updateMaxItemCount(),this._selectedIndex>=0&&this.validateSelectedIndex()}}]),e}();h.itemWidth=[1,3,3,5,5,7,9,11,13,15,17,19,21,23,25,27,29],h.spaceWidth=[1,1,2,2,3,3,3,3,3,3,5,5,5,5,7,7,7],h.PADDING_LEFT=4,h.PADDING_RIGHT=8},function(t,e,n){"use strict";n.d(e,"b",function(){return g}),n.d(e,"a",function(){return v});var r=n(15),i=n(0),o=n(6),a=n(4);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t,e,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){function e(t){var n;return u(this,e),(n=h(this,f(e).call(this,t)))._nextRowId=0,n._focusedRowIndex=-1,n}return p(e,r["b"]),l(e,[{key:"getNextRowId",value:function(){return this._nextRowId++}},{key:"measure",value:function(t,e,n){this.setMeasuredDimension(e,n);var r,o,a,s,u=0,c=0,l=[],h=this._areas.length;for(s=0;s<h;s+=2){if(0===(r=this._areas[s].getHeight())){if(0===s){var d=n/(2*(a=h+1>>1)+5)*2<<0;for(o=n,s=a-1;s>0;s--)l.unshift(d),o-=d;l.unshift(o);break}r=2===s?u/3:u}c+=r,u=r,l.push(r)}if(c>0){var f=n/c;for(o=n,s=(a=h+1>>1)-1;s>0;s--)l[s]*=f,o-=l[s];l[0]=o}var p=Math.min(240,e>>1),_=76,g=i.a.instance,v=g.getTimeline(this.getDataSourceName());if(v.getFirstIndex()>=0){var m=[];for(_=76;_<p;_+=8)m.push(v.calcFirstIndex(v.calcColumnCount(e-_)));var y,b,w=v.getLastIndex(),E=[".main",".secondary"],C=new Array(m.length);for(y=0,b=0,_=76;y<this._areas.length&&b<m.length;y+=2){var A=this._areas[y],P=g.getPlotter(A.getName()+"Range.main");for(var T in E){var k=g.getDataProvider(A.getName()+E[T]);if(void 0!==k)for(k.calcRange(m,w,C,null);b<m.length;){var I=P.getRequiredWidth(t,C[b].min),S=P.getRequiredWidth(t,C[b].max);if(Math.max(I,S)<_)break;b++,_+=8}}}}for(s=1;s<this._areas.length;s+=2)this._areas[s].measure(t,_,l[s>>1]);var D=e-_;for(s=0;s<this._areas.length;s+=2)this._areas[s].measure(t,D,l[s>>1])}},{key:"layout",value:function(t,n,r,i,o){if(d(f(e.prototype),"layout",this).call(this,t,n,r,i,o),!(this._areas.length<1)){var a,s,u=t+this._areas[0].getMeasuredWidth(),c=n;o||(o=this.isChanged());var l,h=this._areas.length;for(l=0;l<h;l++)s=c+(a=this._areas[l]).getMeasuredHeight(),a.layout(t,c,u,s,o),l++,(a=this._areas[l]).layout(u,c,this.getRight(),s,o),c=s;this.setChanged(!1)}}},{key:"drawGrid",value:function(t){if(!(this._areas.length<1)){var e=i.a.instance,n=e.getTheme(this.getFrameName());t.fillStyle=n.getColor(o.c.Color.Grid1),t.fillRect(this._areas[0].getRight(),this.getTop(),1,this.getHeight());var r,a=this._areas.length-2;for(r=0;r<a;r+=2)t.fillRect(this.getLeft(),this._areas[r].getBottom(),this.getWidth(),1);if(!e.getCaptureMouseWheelDirectly())for(r=0,a+=2;r<a;r+=2)if(this._areas[r].isSelected()){t.strokeStyle=n.getColor(o.c.Color.Indicator1),t.strokeRect(this.getLeft()+.5,this.getTop()+.5,this.getWidth()-1,this.getHeight()-1);break}}}},{key:"highlight",value:function(t){this._highlightedArea=null;var e,n,r=this._areas.length;for(n=0;n<r;n++)(e=this._areas[n])===t?(n&=-2,(e=this._areas[n]).highlight(e),this._highlightedArea=e,n++,(e=this._areas[n]).highlight(null),e.highlight(e)):e.highlight(null);return null!==this._highlightedArea?this:null}},{key:"select",value:function(t){this._selectedArea=null;var e,n,r=this._areas.length;for(n=0;n<r;n++)(e=this._areas[n])===t?(n&=-2,(e=this._areas[n]).select(e),this._selectedArea=e,n++,(e=this._areas[n]).select(e)):e.select(null);return null!==this._selectedArea?this:null}},{key:"onMouseMove",value:function(t,e){if(this._focusedRowIndex>=0){var n=this._areas[this._focusedRowIndex],r=this._areas[this._focusedRowIndex+2],o=e-this._oldY;if(0===o)return this;var a=this._oldUpperBottom+o,s=this._oldLowerTop+o;return a-n.getTop()>=60&&r.getBottom()-s>=60&&(n.setBottom(a),r.setTop(s)),this}var u,c=this._areas.length-2;for(u=0;u<c;u+=2){var l=this._areas[u].getBottom();if(e>=l-4&&e<l+4)return i.a.instance.showCursor("n-resize"),this}return null}},{key:"onMouseLeave",value:function(t,e){this._focusedRowIndex=-1}},{key:"onMouseDown",value:function(t,e){var n,r=this._areas.length-2;for(n=0;n<r;n+=2){var i=this._areas[n].getBottom();if(e>=i-4&&e<i+4)return this._focusedRowIndex=n,this._oldY=e,this._oldUpperBottom=i,this._oldLowerTop=this._areas[n+2].getTop(),this}return null}},{key:"onMouseUp",value:function(t,e){if(this._focusedRowIndex>=0){this._focusedRowIndex=-1;var n,r=this._areas.length,i=[];for(n=0;n<r;n+=2)i.push(this._areas[n].getHeight());a.a.get().charts.areaHeight=i,a.a.save()}return this}}]),e}(),v=function(t){function e(t){return u(this,e),h(this,f(e).call(this,t))}return p(e,r["b"]),l(e,[{key:"measure",value:function(t,n,i){for(var o in d(f(e.prototype),"measure",this).call(this,t,n,i),n=this.getMeasuredWidth(),i=this.getMeasuredHeight(),this._areas){var a=this._areas[o];switch(a.measure(t,n,i),a.getDockStyle()){case r.a.DockStyle.left:case r.a.DockStyle.Right:n-=a.getMeasuredWidth();break;case r.a.DockStyle.Top:case r.a.DockStyle.Bottom:i-=a.getMeasuredHeight();break;case r.a.DockStyle.Fill:n=0,i=0}}}},{key:"layout",value:function(t,n,i,o,a){var s,u;for(var c in d(f(e.prototype),"layout",this).call(this,t,n,i,o,a),t=this.getLeft(),n=this.getTop(),i=this.getRight(),o=this.getBottom(),a||(a=this.isChanged()),this._areas){var l=this._areas[c];switch(l.getDockStyle()){case r.a.DockStyle.left:s=l.getMeasuredWidth(),l.layout(t,n,t+s,o,a),t+=s;break;case r.a.DockStyle.Top:u=l.getMeasuredHeight(),l.layout(t,n,i,n+u,a),n+=u;break;case r.a.DockStyle.Right:s=l.getMeasuredWidth(),l.layout(i-s,n,i,o,a),i-=s;break;case r.a.DockStyle.Bottom:u=l.getMeasuredHeight(),l.layout(t,o-u,i,o,a),o-=u;break;case r.a.DockStyle.Fill:l.layout(t,n,i,o,a),t=i,n=o}}this.setChanged(!1)}},{key:"drawGrid",value:function(t){var e=i.a.instance.getTheme(this.getFrameName()),n=this.getLeft(),o=this.getTop(),a=this.getRight(),s=this.getBottom();for(var u in t.fillStyle=e.getColor(this._gridColor),this._areas){var c=this._areas[u];switch(c.getDockStyle()){case r.a.DockStyle.Left:t.fillRect(c.getRight(),o,1,s-o),n+=c.getWidth();break;case r.a.DockStyle.Top:t.fillRect(n,c.getBottom(),a-n,1),o+=c.getHeight();break;case r.a.DockStyle.Right:t.fillRect(c.getLeft(),o,1,s-o),a-=c.getWidth();break;case r.a.DockStyle.Bottom:t.fillRect(n,c.getTop(),a-n,1),s-=c.getHeight()}}}}]),e}()},function(t,e,n){"use strict";n.d(e,"g",function(){return p}),n.d(e,"j",function(){return _}),n.d(e,"e",function(){return g}),n.d(e,"s",function(){return v}),n.d(e,"i",function(){return m}),n.d(e,"d",function(){return y}),n.d(e,"c",function(){return b}),n.d(e,"r",function(){return w}),n.d(e,"b",function(){return E}),n.d(e,"t",function(){return C}),n.d(e,"l",function(){return A}),n.d(e,"f",function(){return P}),n.d(e,"o",function(){return T}),n.d(e,"u",function(){return k}),n.d(e,"p",function(){return I}),n.d(e,"h",function(){return S}),n.d(e,"n",function(){return D}),n.d(e,"k",function(){return O}),n.d(e,"a",function(){return R}),n.d(e,"m",function(){return M}),n.d(e,"q",function(){return x});var r=n(20),i=n(6);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}var f=function(){function t(){l(this,t),this._exprEnv=new r.l,this._rid=0,this._params=[],this._assigns=[],this._outputs=[]}return d(t,[{key:"addParameter",value:function(t){this._params.push(t)}},{key:"addAssign",value:function(t){this._assigns.push(t)}},{key:"addOutput",value:function(t){this._outputs.push(t)}},{key:"getParameterCount",value:function(){return this._params.length}},{key:"getParameterAt",value:function(t){return this._params[t]}},{key:"getOutputCount",value:function(){return this._outputs.length}},{key:"getOutputAt",value:function(t){return this._outputs[t]}},{key:"clear",value:function(){var t,e;for(this._exprEnv.setFirstIndex(-1),e=this._assigns.length,t=0;t<e;t++)this._assigns[t].clear();for(e=this._outputs.length,t=0;t<e;t++)this._outputs[t].clear()}},{key:"reserve",value:function(t){var e,n;for(this._rid++,n=this._assigns.length,e=0;e<n;e++)this._assigns[e].reserve(this._rid,t);for(n=this._outputs.length,e=0;e<n;e++)this._outputs[e].reserve(this._rid,t)}},{key:"execute",value:function(t,e){if(!(e<0)){this._exprEnv.setDataSource(t),r.l.set(this._exprEnv);try{var n,i;for(i=this._assigns.length,n=0;n<i;n++)this._assigns[n].assign(e);for(i=this._outputs.length,n=0;n<i;n++)this._outputs[n].assign(e);this._exprEnv.getFirstIndex()<0&&this._exprEnv.setFirstIndex(e)}catch(t){if(this._exprEnv.getFirstIndex()>=0)throw alert(t),t}}}},{key:"getParameters",value:function(){var t,e=[],n=this._params.length;for(t=0;t<n;t++)e.push(this._params[t].getValue());return e}},{key:"setParameters",value:function(t){if(t instanceof Array&&t.length===this._params.length)for(var e in this._params)this._params[e].setValue(t[e])}}]),t}(),p=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("M1",2,1e3,60);return t.addParameter(n),t.addOutput(new r.y("HIGH",new r.o,r.y.outputStyle.None)),t.addOutput(new r.y("LOW",new r.r,r.y.outputStyle.None)),t.addOutput(new r.y("CLOSE",new r.e,r.y.outputStyle.Line,i.c.Color.Indicator0)),t.addOutput(new r.A("MA",new r.t(new r.e,n),r.y.outputStyle.Line,i.c.Color.Indicator1)),t}return u(e,f),d(e,[{key:"getName",value:function(){return"CLOSE"}}]),e}(),_=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("M1",2,1e3,7),i=new r.z("M2",2,1e3,30),o=new r.z("M3",2,1e3,0),u=new r.z("M4",2,1e3,0),c=new r.z("M5",2,1e3,0),h=new r.z("M6",2,1e3,0);return t.addParameter(n),t.addParameter(i),t.addParameter(o),t.addParameter(u),t.addParameter(c),t.addParameter(h),t.addOutput(new r.A("MA",new r.t(new r.e,n))),t.addOutput(new r.A("MA",new r.t(new r.e,i))),t.addOutput(new r.A("MA",new r.t(new r.e,o))),t.addOutput(new r.A("MA",new r.t(new r.e,u))),t.addOutput(new r.A("MA",new r.t(new r.e,c))),t.addOutput(new r.A("MA",new r.t(new r.e,h))),t}return u(e,f),d(e,[{key:"getName",value:function(){return"MA"}}]),e}(),g=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("M1",2,1e3,7),i=new r.z("M2",2,1e3,30),o=new r.z("M3",2,1e3,0),u=new r.z("M4",2,1e3,0),c=new r.z("M5",2,1e3,0),h=new r.z("M6",2,1e3,0);return t.addParameter(n),t.addParameter(i),t.addParameter(o),t.addParameter(u),t.addParameter(c),t.addParameter(h),t.addOutput(new r.A("EMA",new r.i(new r.e,n))),t.addOutput(new r.A("EMA",new r.i(new r.e,i))),t.addOutput(new r.A("EMA",new r.i(new r.e,o))),t.addOutput(new r.A("EMA",new r.i(new r.e,u))),t.addOutput(new r.A("EMA",new r.i(new r.e,c))),t.addOutput(new r.A("EMA",new r.i(new r.e,h))),t}return u(e,f),d(e,[{key:"getName",value:function(){return"EMA"}}]),e}(),v=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("M1",2,500,5),o=new r.z("M2",2,500,10);t.addParameter(n),t.addParameter(o);var u=new r.y("VOLUME",new r.H,r.y.outputStyle.VolumeStick,i.c.Color.Text4);return t.addOutput(u),t.addOutput(new r.A("MA",new r.t(u,n),r.y.outputStyle.Line,i.c.Color.Indicator0)),t.addOutput(new r.A("MA",new r.t(u,o),r.y.outputStyle.Line,i.c.Color.Indicator1)),t}return u(e,f),d(e,[{key:"getName",value:function(){return"VOLUME"}}]),e}(),m=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("SHORT",2,200,12),i=new r.z("LONG",2,200,26),o=new r.z("MID",2,200,9);t.addParameter(n),t.addParameter(i),t.addParameter(o);var u=new r.y("DIF",new r.F(new r.i(new r.e,n),new r.i(new r.e,i)));t.addOutput(u);var c=new r.y("DEA",new r.i(u,o));t.addOutput(c);var h=new r.y("MACD",new r.v(new r.F(u,c),new r.f(2)),r.y.outputStyle.MACDStick);return t.addOutput(h),t}return u(e,f),d(e,[{key:"getName",value:function(){return"MACD"}}]),e}(),y=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("N",2,90,14),i=new r.z("MM",2,60,6);t.addParameter(n),t.addParameter(i);var o=new r.d("MTR",new r.k(new r.u(new r.u(new r.F(new r.o,new r.r),new r.a(new r.F(new r.o,new r.B(new r.e,new r.f(1))))),new r.a(new r.F(new r.B(new r.e,new r.f(1)),new r.r))),n));t.addAssign(o);var u=new r.d("HD",new r.F(new r.o,new r.B(new r.o,new r.f(1))));t.addAssign(u);var c=new r.d("LD",new r.F(new r.B(new r.r,new r.f(1)),new r.r));t.addAssign(c);var h=new r.d("DMP",new r.k(new r.p(new r.c(new r.m(u,new r.f(0)),new r.m(u,c)),u,new r.f(0)),n));t.addAssign(h);var d=new r.d("DMM",new r.k(new r.p(new r.c(new r.m(c,new r.f(0)),new r.m(c,u)),c,new r.f(0)),n));t.addAssign(d);var f=new r.y("PDI",new r.v(new r.h(h,o),new r.f(100)));t.addOutput(f);var p=new r.y("MDI",new r.v(new r.h(d,o),new r.f(100)));t.addOutput(p);var _=new r.y("ADX",new r.k(new r.v(new r.h(new r.a(new r.F(p,f)),new r.b(p,f)),new r.f(100)),i));t.addOutput(_);var g=new r.y("ADXR",new r.k(_,i));return t.addOutput(g),t}return u(e,f),d(e,[{key:"getName",value:function(){return"DMI"}}]),e}(),b=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("N1",2,60,10),i=new r.z("N2",2,250,50),o=new r.z("M",2,100,10);t.addParameter(n),t.addParameter(i),t.addParameter(o);var u=new r.y("DIF",new r.F(new r.t(new r.e,n),new r.t(new r.e,i)));t.addOutput(u);var c=new r.y("DIFMA",new r.t(u,o));return t.addOutput(c),t}return u(e,f),d(e,[{key:"getName",value:function(){return"DMA"}}]),e}(),w=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("N",2,100,12),i=new r.z("M",2,100,9);t.addParameter(n),t.addParameter(i);var o=new r.d("MTR",new r.i(new r.i(new r.i(new r.e,n),n),n));t.addAssign(o);var u=new r.y("TRIX",new r.v(new r.h(new r.F(o,new r.B(o,new r.f(1))),new r.B(o,new r.f(1))),new r.f(100)));t.addOutput(u);var c=new r.y("MATRIX",new r.t(u,i));return t.addOutput(c),t}return u(e,f),d(e,[{key:"getName",value:function(){return"TRIX"}}]),e}(),E=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("N",2,120,26);t.addParameter(n);var i=new r.d("REF_CLOSE_1",new r.B(new r.e,new r.f(1)));t.addAssign(i);var o=new r.y("BR",new r.v(new r.h(new r.G(new r.u(new r.f(0),new r.F(new r.o,i)),n),new r.G(new r.u(new r.f(0),new r.F(i,new r.r)),n)),new r.f(100)));t.addOutput(o);var u=new r.y("AR",new r.v(new r.h(new r.G(new r.F(new r.o,new r.x),n),new r.G(new r.F(new r.x,new r.r),n)),new r.f(100)));return t.addOutput(u),t}return u(e,f),d(e,[{key:"getName",value:function(){return"BRAR"}}]),e}(),C=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("N",2,100,26),i=new r.z("M",2,100,6);t.addParameter(n),t.addParameter(i);var o=new r.d("REF_CLOSE_1",new r.B(new r.e,new r.f(1)));t.addAssign(o);var u=new r.d("TH",new r.G(new r.p(new r.m(new r.e,o),new r.H,new r.f(0)),n));t.addAssign(u);var c=new r.d("TL",new r.G(new r.p(new r.s(new r.e,o),new r.H,new r.f(0)),n));t.addAssign(c);var h=new r.d("TQ",new r.G(new r.p(new r.j(new r.e,o),new r.H,new r.f(0)),n));t.addAssign(h);var d=new r.y("VR",new r.v(new r.h(new r.b(new r.v(u,new r.f(2)),h),new r.b(new r.v(c,new r.f(2)),h)),new r.f(100)));t.addOutput(d);var f=new r.y("MAVR",new r.t(d,i));return t.addOutput(f),t}return u(e,f),d(e,[{key:"getName",value:function(){return"VR"}}]),e}(),A=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("M",2,100,30);t.addParameter(n);var i=new r.d("REF_CLOSE_1",new r.B(new r.e,new r.f(1)));t.addAssign(i);var o=new r.d("VA",new r.p(new r.m(new r.e,i),new r.H,new r.w(new r.H)));t.addAssign(o);var u=new r.y("OBV",new r.G(new r.p(new r.j(new r.e,i),new r.f(0),o),new r.f(0)));t.addOutput(u);var c=new r.y("MAOBV",new r.t(u,n));return t.addOutput(c),t}return u(e,f),d(e,[{key:"getName",value:function(){return"OBV"}}]),e}(),P=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("N",2,90,14),i=new r.z("M",2,60,9);t.addParameter(n),t.addParameter(i);var o=new r.d("VOLUME",new r.h(new r.t(new r.H,n),new r.H));t.addAssign(o);var u=new r.d("MID",new r.v(new r.h(new r.F(new r.b(new r.o,new r.r),new r.B(new r.b(new r.o,new r.r),new r.f(1))),new r.b(new r.o,new r.r)),new r.f(100)));t.addAssign(u);var c=new r.y("EMV",new r.t(new r.h(new r.v(u,new r.v(o,new r.F(new r.o,new r.r))),new r.t(new r.F(new r.o,new r.r),n)),n));t.addOutput(c);var h=new r.y("MAEMV",new r.t(c,i));return t.addOutput(h),t}return u(e,f),d(e,[{key:"getName",value:function(){return"EMV"}}]),e}(),T=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("N1",2,120,6),i=new r.z("N2",2,250,12),o=new r.z("N3",2,500,24);t.addParameter(n),t.addParameter(i),t.addParameter(o);var u=new r.d("LC",new r.B(new r.e,new r.f(1)));t.addAssign(u);var c=new r.d("CLOSE_LC",new r.F(new r.e,u));return t.addAssign(c),t.addOutput(new r.y("RSI1",new r.v(new r.h(new r.D(new r.u(c,new r.f(0)),n,new r.f(1)),new r.D(new r.a(c),n,new r.f(1))),new r.f(100)))),t.addOutput(new r.y("RSI2",new r.v(new r.h(new r.D(new r.u(c,new r.f(0)),i,new r.f(1)),new r.D(new r.a(c),i,new r.f(1))),new r.f(100)))),t.addOutput(new r.y("RSI3",new r.v(new r.h(new r.D(new r.u(c,new r.f(0)),o,new r.f(1)),new r.D(new r.a(c),o,new r.f(1))),new r.f(100)))),t}return u(e,f),d(e,[{key:"getName",value:function(){return"RSI"}}]),e}(),k=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("N",2,100,10),i=new r.z("N1",2,100,6);t.addParameter(n),t.addParameter(i);var o=new r.d("HHV",new r.n(new r.o,n));t.addAssign(o);var u=new r.d("HHV1",new r.n(new r.o,i));t.addAssign(u);var c=new r.d("LLV",new r.q(new r.r,n));t.addAssign(c);var h=new r.d("LLV1",new r.q(new r.r,i));t.addAssign(h);var d=new r.y("WR1",new r.v(new r.h(new r.F(o,new r.e),new r.F(o,c)),new r.f(100)));t.addOutput(d);var f=new r.y("WR2",new r.v(new r.h(new r.F(u,new r.e),new r.F(u,h)),new r.f(100)));return t.addOutput(f),t}return u(e,f),d(e,[{key:"getName",value:function(){return"WR"}}]),e}(),I=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.f(4),i=new r.f(2),o=new r.f(2),u=new r.f(20);return t.addOutput(new r.y("SAR",new r.C(n,i,o,u),r.y.outputStyle.SARPoint)),t}return u(e,f),d(e,[{key:"getName",value:function(){return"SAR"}}]),e}(),S=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("N",2,90,9),i=new r.z("M1",2,30,3),o=new r.z("M2",2,30,3);t.addParameter(n),t.addParameter(i),t.addParameter(o);var u=new r.d("HHV",new r.n(new r.o,n));t.addAssign(u);var c=new r.d("LLV",new r.q(new r.r,n));t.addAssign(c);var h=new r.d("RSV",new r.v(new r.h(new r.F(new r.e,c),new r.F(u,c)),new r.f(100)));t.addAssign(h);var d=new r.y("K",new r.D(h,i,new r.f(1)));t.addOutput(d);var f=new r.y("D",new r.D(d,o,new r.f(1)));t.addOutput(f);var p=new r.y("J",new r.F(new r.v(d,new r.f(3)),new r.v(f,new r.f(2))));return t.addOutput(p),t}return u(e,f),d(e,[{key:"getName",value:function(){return"KDJ"}}]),e}(),D=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("N",2,120,12),i=new r.z("M",2,60,6);t.addParameter(n),t.addParameter(i);var o=new r.d("REF_CLOSE_N",new r.B(new r.e,n));t.addAssign(o);var u=new r.y("ROC",new r.v(new r.h(new r.F(new r.e,o),o),new r.f(100)));t.addOutput(u);var c=new r.y("MAROC",new r.t(u,i));return t.addOutput(c),t}return u(e,f),d(e,[{key:"getName",value:function(){return"ROC"}}]),e}(),O=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("N",2,120,12),i=new r.z("M",2,60,6);t.addParameter(n),t.addParameter(i);var o=new r.y("MTM",new r.F(new r.e,new r.B(new r.e,n)));t.addOutput(o);var u=new r.y("MTMMA",new r.t(o,i));return t.addOutput(u),t}return u(e,f),d(e,[{key:"getName",value:function(){return"MTM"}}]),e}(),R=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("N",2,120,20);t.addParameter(n);var i=new r.d("STD_CLOSE_N",new r.E(new r.e,n));t.addAssign(i);var o=new r.y("BOLL",new r.t(new r.e,n));t.addOutput(o);var u=new r.y("UB",new r.b(o,new r.v(new r.f(2),i)));t.addOutput(u);var c=new r.y("LB",new r.F(o,new r.v(new r.f(2),i)));return t.addOutput(c),t}return u(e,f),d(e,[{key:"getName",value:function(){return"BOLL"}}]),e}(),M=function(t){function e(){var t;l(this,e),t=a(this,s(e).call(this));var n=new r.z("N",2,100,12),i=new r.z("M",2,100,6);t.addParameter(n),t.addParameter(i);var o=new r.y("PSY",new r.v(new r.h(new r.g(new r.m(new r.e,new r.B(new r.e,new r.f(1))),n),n),new r.f(100)));t.addOutput(o);var u=new r.y("PSYMA",new r.t(o,i));return t.addOutput(u),t}return u(e,f),d(e,[{key:"getName",value:function(){return"PSY"}}]),e}(),x=function(t){function e(){var t;l(this,e),(t=a(this,s(e).call(this))).getName=function(){return"StochRSI"};var n=new r.z("N",3,100,14),i=new r.z("M",3,100,14),o=new r.z("P1",2,50,3),u=new r.z("P2",2,50,3);t.addParameter(n),t.addParameter(i),t.addParameter(o),t.addParameter(u);var c=new r.d("LC",new r.B(new r.e,new r.f(1)));t.addAssign(c);var h=new r.d("CLOSE_LC",new r.F(new r.e,c));t.addAssign(h);var d=new r.d("RSI",new r.v(new r.h(new r.D(new r.u(h,new r.f(0)),n,new r.f(1)),new r.D(new r.a(h),n,new r.f(1))),new r.f(100)));t.addAssign(d);var f=new r.y("STOCHRSI",new r.v(new r.h(new r.t(new r.F(d,new r.q(d,i)),o),new r.t(new r.F(new r.n(d,i),new r.q(d,i)),o)),new r.f(100)));return t.addOutput(f),t.addOutput(new r.A("MA",new r.t(f,u))),t}return u(e,f),e}()},function(t,e,n){var r=n(32);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0};n(45)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(33);(t.exports=n(34)(!1)).push([t.i,"html,\nbody {\n    min-height: 100%;\n    margin: 0;\n    min-width: 100%\n}\n\n.chart_container {\n    cursor: default;\n    font-family: arial, sans, serif;\n    font-size: 12px;\n    height: 100%;\n    position: relative;\n    width: 100%\n}\n\n.chart_container div,\n.chart_container ul,\n.chart_container form {\n    margin: 0;\n    padding: 0\n}\n\n.chart_container a:hover {\n    text-decoration: none\n}\n\n.chart_container ul {\n    list-style: none;\n    border: 0;\n    margin: 0;\n    padding: 0\n}\n\n.chart_container button {\n    cursor: pointer\n}\n\n#chart_dom_elem_cache {\n    *font-weight: bold;\n    position: absolute;\n    visibility: hidden;\n    z-index: -1\n}\n\n#chart_toolbar {\n    border-bottom: 1px solid;\n    *font-weight: bold;\n    height: 29px;\n    position: absolute;\n    z-index: 3\n}\n\n.chart_container.dark #chart_toolbar {\n    background-color: #0a0a0a;\n    border-bottom-color: #404040\n}\n\n.chart_container.light #chart_toolbar {\n    background-color: #fff;\n    border-bottom-color: #afb1b3\n}\n\n.chart_container .chart_toolbar_sep {\n    float: left;\n    height: 100%;\n    width: 16px\n}\n\n.chart_container .chart_toolbar_minisep {\n    float: left;\n    height: 100%;\n    width: 4px\n}\n\n.chart_container .chart_dropdown {\n    display: inline-block;\n    float: left;\n    position: relative;\n    z-index: 100\n}\n\n.chart_container .chart_dropdown_t {\n    background-origin: content-box;\n    background-repeat: no-repeat;\n    border: 1px solid;\n    border-bottom-width: 0;\n    margin-top: 3px;\n    padding-right: 10px;\n    z-index: 101;\n    position: relative\n}\n\n.chart_container .chart_dropdown_t a {\n    display: inline-block;\n    padding: 3px 12px 5px 10px\n}\n\n.chart_container .chart_dropdown_data {\n    border: 1px solid;\n    display: none;\n    position: absolute;\n    padding: 6px 8px 6px 8px;\n    margin-top: -1px;\n    z-index: 100\n}\n\n.chart_container .chart_dropdown_data table {\n    border-collapse: collapse;\n    font-weight: normal;\n    white-space: nowrap\n}\n\n.chart_container .chart_dropdown_data td {\n    border-bottom: 1px solid;\n    padding: 8px 6px;\n    vertical-align: top\n}\n\n.market_chooser .chart_dropdown_data {\n    width: 370px\n}\n\n.market_chooser .chart_dropdown_data td {\n    border-bottom: 1px solid;\n    padding: 1px 6px !important;\n    vertical-align: top;\n    line-height: 24px\n}\n\n.market_chooser li {\n    float: left;\n    width: 80px;\n    height: 24px;\n    line-height: 24px\n}\n\n.chart_container .chart_dropdown_data td.marketName_ a.dark {\n    color: #fff\n}\n\n.chart_container .chart_dropdown_data td.marketName_ a.light {\n    color: #000\n}\n\n.chart_container .chart_dropdown_data table tr:last-child td {\n    border-bottom: 0\n}\n\n.chart_container .chart_dropdown_data li {\n    white-space: nowrap;\n    display: inline-block\n}\n\n.chart_container .chart_dropdown_data a {\n    text-decoration: none;\n    cursor: pointer;\n    padding: 5px 6px 5px 6px\n}\n\n.chart_container .chart_dropdown-hover.chart_dropdown_data {\n    display: block\n}\n\n#chart_dropdown_symbols .chart_dropdown_data td {\n    padding: 8px 6px 0 6px\n}\n\n#chart_dropdown_symbols .chart_dropdown_data li {\n    display: block;\n    height: 26px\n}\n\n#chart_dropdown_symbols .chart_dropdown_data a {\n    cursor: pointer\n}\n\n#chart_dropdown_themes .chart_dropdown_data td:first-child {\n    padding: 6px 1px 7px 6px\n}\n\n.chart_container.dark .chart_dropdown_t {\n    background-image: url("+r(n(35))+");\n    background-position: right 9px;\n    border-color: #0a0a0a;\n    color: #e5e5e5\n}\n\n.chart_container.dark .chart_dropdown-hover.chart_dropdown_t {\n    background-color: #0a0a0a;\n    background-image: url("+r(n(36))+");\n    background-position: right 8px;\n    border-color: #606060;\n    color: #fff\n}\n\n.chart_container.dark .chart_dropdown_data {\n    background-color: rgba(10, 10, 10, 0.8);\n    border-color: #606060\n}\n\n.chart_container.dark .chart_dropdown_data td {\n    border-bottom-color: #404040;\n    color: #e5e5e5\n}\n\n.chart_container.dark .chart_dropdown_data li a {\n    color: #1987da\n}\n\n.chart_container.dark .chart_dropdown_data li a:hover {\n    background-color: #383838\n}\n\n.chart_container.dark .chart_dropdown_data li a.selected {\n    color: #ffac00\n}\n\n.chart_container.light .chart_dropdown_t {\n    background-image: url("+r(n(37))+");\n    background-position: right 10px;\n    border-color: #fff;\n    color: #393c40\n}\n\n.chart_container.light .chart_dropdown-hover.chart_dropdown_t {\n    background-color: #fff;\n    background-image: url("+r(n(38))+");\n    background-position: right 9px;\n    border-color: #4c4f53;\n    color: #393c40\n}\n\n.chart_container.light .chart_dropdown_data {\n    background-color: #fff;\n    border-color: #4c4f53\n}\n\n.chart_container.light .chart_dropdown_data td {\n    border-bottom-color: #e4e5e6;\n    color: #393c40\n}\n\n.chart_container.light .chart_dropdown_data li a {\n    color: #1478c8\n}\n\n.chart_container.light .chart_dropdown_data a:hover {\n    background-color: #f4f4f4\n}\n\n.chart_container.light .chart_dropdown_data a.selected {\n    color: #f27935\n}\n\n.chart_container .chart_toolbar_label {\n    cursor: default;\n    display: inline-block;\n    float: left;\n    padding: 7px 4px\n}\n\n.chart_container.dark .chart_toolbar_label {\n    border-color: #232323;\n    color: #e5e5e5\n}\n\n.chart_container.light .chart_toolbar_label {\n    border-color: #fff;\n    color: #393c40\n}\n\n.chart_container .chart_toolbar_button {\n    border: 1px solid;\n    cursor: pointer;\n    float: left;\n    margin: 3px 2px;\n    padding: 3px 10px;\n    position: relative;\n    z-index: 100\n}\n\n.chart_container.dark .chart_toolbar_button {\n    border-color: #404040;\n    color: #e5e5e5\n}\n\n.chart_container.dark .chart_toolbar_button:hover {\n    background-color: #383838;\n    border-color: #606060;\n    color: #fff\n}\n\n.chart_container.dark .chart_toolbar_button.selected {\n    background-color: #383838;\n    border-color: #606060;\n    color: #ffac00\n}\n\n.chart_container.dark .chart_toolbar_button.selected:hover {\n    background-color: #474747;\n    border-color: #808080;\n    color: #ffac00\n}\n\n.chart_container.light .chart_toolbar_button {\n    border-color: #ccc;\n    color: #393c40\n}\n\n.chart_container.light .chart_toolbar_button:hover {\n    background-color: #f4f4f4;\n    color: #393c40\n}\n\n.chart_container.light .chart_toolbar_button.selected {\n    background-color: #f4f4f4;\n    border-color: #f27935;\n    color: #f27935\n}\n\n.chart_container .chart_toolbar_tabgroup {\n    float: left\n}\n\n.chart_container .chart_toolbar_tabgroup li {\n    display: inline-block;\n    padding: 4px 0;\n    margin: 3px 0\n}\n\n.chart_container .chart_toolbar_tabgroup li a {\n    cursor: pointer;\n    padding: 4px 4px\n}\n\n.chart_container .chart_toolbar_tabgroup li a:hover {\n    text-decoration: none\n}\n\n.chart_container.dark .chart_toolbar_tabgroup li a {\n    color: #1987da\n}\n\n.chart_container.dark .chart_toolbar_tabgroup li a:hover {\n    background-color: #383838\n}\n\n.chart_container.dark .chart_toolbar_tabgroup li a.selected {\n    color: #ffac00\n}\n\n.chart_container.light .chart_toolbar_tabgroup li a {\n    color: #1478c8\n}\n\n.chart_container.light .chart_toolbar_tabgroup li a:hover {\n    background-color: #f4f4f4\n}\n\n.chart_container.light .chart_toolbar_tabgroup li a.selected {\n    color: #f27935\n}\n\n#chart_toolbar_periods_horz {\n    display: inline-block;\n    float: left;\n    position: relative;\n    z-index: 100\n}\n\n#chart_toolbar_periods_vert {\n    float: left\n}\n\n.chart_container a.chart_icon {\n    border: 1px solid;\n    height: 16px;\n    padding: 0;\n    width: 16px;\n    box-sizing:border-box;\n}\n\n.chart_container a.chart_icon:hover {\n    border-width: 2px;\n}\n\n.chart_container .chart_dropdown_data a.chart_icon {\n    display: inline-block;\n    margin: 0 6px 0 6px\n}\n\n.chart_container a.chart_icon_theme_dark,\n.chart_container .chart_dropdown_data li a.chart_icon_theme_dark:hover {\n    background-color: #000\n}\n\n.chart_container a.chart_icon_theme_light,\n.chart_container .chart_dropdown_data li a.chart_icon_theme_light:hover {\n    background-color: #fff\n}\n\n.chart_container #chart_toolbar_theme {\n    float: left;\n    padding: 0 8px\n}\n\n.chart_container #chart_toolbar_theme a.chart_icon {\n    cursor: pointer;\n    float: left;\n    margin: 6px 4px\n}\n\n.chart_container #chart_select_theme td:last-child {\n    padding: 6px 6px 0 8px\n}\n\n.chart_container #chart_select_theme li {\n    padding: 0 4px 0 4px\n}\n\n.chart_container.dark a.chart_icon {\n    border-color: #aaa\n}\n\n.chart_container.dark a.chart_icon:hover {\n    border-color: #1987da\n}\n\n.chart_container.dark a.chart_icon.selected {\n    border-color: #ffac00\n}\n\n.chart_container.light a.chart_icon {\n    border-color: #aaa\n}\n\n.chart_container.light a.chart_icon.selected {\n    border-color: #f27935\n}\n\n.chart_container #chart_updated_time {\n    float: right;\n    margin: 4px 3px;\n    padding: 3px 10px\n}\n\n.chart_container.dark #chart_updated_time {\n    color: #e5e5e5\n}\n\n.chart_container.light #chart_updated_time {\n    color: #393c40\n}\n\n#chart_toolpanel {\n    border-right: 1px solid;\n    display: none;\n    position: absolute;\n    width: 32px;\n    z-index: 2\n}\n\n#chart_toolpanel .chart_toolpanel_separator {\n    position: relative;\n    height: 4px\n}\n\n#chart_toolpanel .chart_toolpanel_button {\n    position: relative;\n    z-index: 100\n}\n\n#chart_toolpanel .chart_toolpanel_icon {\n    background-origin: content-box;\n    background-repeat: no-repeat;\n    border: 1px solid;\n    cursor: pointer;\n    height: 16px;\n    margin: 1px 4px 1px 4px;\n    padding: 3px;\n    position: relative;\n    width: 16px;\n    z-index: 101\n}\n\n#chart_toolpanel .chart_toolpanel_tip {\n    border-radius: 4px;\n    border: 1px solid;\n    display: none;\n    *font-weight: bold;\n    position: absolute;\n    padding: 3px 6px 4px 6px;\n    margin-left: 36px;\n    margin-top: -25px;\n    white-space: nowrap;\n    z-index: 100\n}\n\n#chart_toolpanel .chart_toolpanel_button:hover .chart_toolpanel_tip {\n    display: block\n}\n\n.chart_container.dark #chart_toolpanel {\n    background-color: #0a0a0a;\n    border-right-color: #404040\n}\n\n.chart_container.dark .chart_toolpanel_icon {\n    background-color: #0a0a0a;\n    border-color: #0a0a0a\n}\n\n.chart_container.dark .chart_toolpanel_button:hover .chart_toolpanel_icon {\n    background-color: #404040;\n    border-color: #666\n}\n\n.chart_container.dark .chart_toolpanel_button.selected .chart_toolpanel_icon {\n    background-color: #080808;\n    border-color: #666\n}\n\n.chart_container.dark .chart_toolpanel_tip {\n    background-color: #ffac00;\n    border-color: #ffac00;\n    color: #0a0a0a\n}\n\n.chart_container.light #chart_toolpanel {\n    background-color: #fff;\n    border-right-color: #afb1b3\n}\n\n.chart_container.light .chart_toolpanel_icon {\n    background-color: #fff;\n    border-color: #fff\n}\n\n.chart_container.light .chart_toolpanel_button:hover .chart_toolpanel_icon {\n    background-color: #eee;\n    border-color: #afb1b3\n}\n\n.chart_container.light .chart_toolpanel_button.selected .chart_toolpanel_icon {\n    background-color: #f4f4f4;\n    border-color: #afb1b3\n}\n\n.chart_container.light .chart_toolpanel_tip {\n    background-color: #f27938;\n    border-color: #f27938;\n    color: #eee\n}\n\n.chart_container.dark #chart_toolpanel .chart_toolpanel_button .chart_toolpanel_icon {\n    background-image: url("+r(n(39))+")\n}\n\n.chart_container.dark #chart_toolpanel .chart_toolpanel_button.selected .chart_toolpanel_icon {\n    background-image: url("+r(n(40))+")\n}\n\n.chart_container.dark #chart_toolbar .chart_BoxSize {\n    background: url("+r(n(41))+") no-repeat;\n}\n\n.chart_container.light #chart_toolpanel .chart_toolpanel_button .chart_toolpanel_icon {\n    background-image: url("+r(n(42))+")\n}\n\n.chart_container.light #chart_toolpanel .chart_toolpanel_button.selected .chart_toolpanel_icon {\n    background-image: url("+r(n(43))+")\n}\n\n.chart_container.light #chart_toolbar .chart_BoxSize {\n    background: url("+r(n(44))+') no-repeat;\n}\n\n.chart_container #chart_toolpanel #chart_Cursor {\n    background-position: 0 0\n}\n\n.chart_container #chart_toolpanel #chart_CrossCursor {\n    background-position: 0 -20px\n}\n\n.chart_container #chart_toolpanel #chart_SegLine {\n    background-position: 0 -40px\n}\n\n.chart_container #chart_toolpanel #chart_StraightLine {\n    background-position: 0 -60px\n}\n\n.chart_container #chart_toolpanel #chart_RayLine {\n    background-position: 0 -100px\n}\n\n.chart_container #chart_toolpanel #chart_ArrowLine {\n    background-position: 0 -80px\n}\n\n.chart_container #chart_toolpanel #chart_HoriSegLine {\n    background-position: 0 -160px\n}\n\n.chart_container #chart_toolpanel #chart_HoriStraightLine {\n    background-position: 0 -120px\n}\n\n.chart_container #chart_toolpanel #chart_HoriRayLine {\n    background-position: 0 -140px\n}\n\n.chart_container #chart_toolpanel #chart_VertiStraightLine {\n    background-position: 0 -180px\n}\n\n.chart_container #chart_toolpanel #chart_PriceLine {\n    background-position: 0 -200px\n}\n\n.chart_container #chart_toolpanel #chart_TriParallelLine {\n    background-position: 0 -220px\n}\n\n.chart_container #chart_toolpanel #chart_BiParallelLine {\n    background-position: 0 -240px\n}\n\n.chart_container #chart_toolpanel #chart_BiParallelRayLine {\n    background-position: 0 -260px\n}\n\n.chart_container .chart_toolpanel_button #chart_DrawFibRetrace {\n    background-position: 0 -280px\n}\n\n.chart_container #chart_toolpanel #chart_DrawFibFans {\n    background-position: 0 -300px\n}\n\n#chart_tabbar {\n    border-top: 1px solid;\n    cursor: default;\n    display: none;\n    *font-weight: bold;\n    height: 22px;\n    overflow: hidden;\n    position: absolute;\n    z-index: 1\n}\n\n#chart_tabbar ul {\n    height: 100%;\n    list-style: none;\n    padding: 0 0 0 4px\n}\n\n#chart_tabbar li {\n    display: inline-block;\n    height: 100%;\n    margin: 0\n}\n\n#chart_tabbar a {\n    cursor: pointer;\n    display: inline-block;\n    height: 100%;\n    margin: 0;\n    padding: 3px 4px 0 4px;\n    overflow: hidden\n}\n\n#chart_tabbar a:hover {\n    text-decoration: none\n}\n\n.chart_container.dark #chart_tabbar {\n    background-color: #0a0a0a;\n    border-top-color: #404040\n}\n\n.chart_container.dark #chart_tabbar a {\n    color: #e5e5e5\n}\n\n.chart_container.dark #chart_tabbar a:hover {\n    background-color: #383838;\n    color: #fff\n}\n\n.chart_container.dark #chart_tabbar a.selected {\n    color: #ffac00\n}\n\n.chart_container.light #chart_tabbar {\n    background-color: #fff;\n    border-top-color: #afb1b3\n}\n\n.chart_container.light #chart_tabbar a {\n    color: #393c40\n}\n\n.chart_container.light #chart_tabbar a:hover {\n    background-color: #f4f4f4;\n    color: #393c40\n}\n\n.chart_container.light #chart_tabbar a.selected {\n    color: #f27935\n}\n\n#chart_canvasGroup {\n    position: absolute;\n    z-index: 0\n}\n\n#chart_mainCanvas {\n    overflow: hidden;\n    position: absolute;\n    z-index: 0\n}\n\n#chart_overlayCanvas {\n    overflow: hidden;\n    position: absolute;\n    z-index: 2\n}\n\n#chart_loading {\n    border: 1px solid;\n    border-radius: 4px;\n    font-size: 18px;\n    font-weight: bold;\n    line-height: 48px;\n    overflow: hidden;\n    position: absolute;\n    text-align: center;\n    visibility: hidden;\n    width: 200px;\n    z-index: 200\n}\n\n#chart_loading.activated {\n    visibility: visible\n}\n\n.chart_container.dark #chart_loading {\n    border-color: #aaa;\n    background-color: rgba(0, 0, 0, 0.6);\n    color: #ccc\n}\n\n.chart_container.light #chart_loading {\n    border-color: #afb1b3;\n    background-color: rgba(244, 244, 244, 0.8);\n    color: #393c40\n}\n\n#chart_parameter_settings {\n    border-radius: 4px;\n    border: 1px solid;\n    width: 640px;\n    position: absolute;\n    overflow: hidden;\n    visibility: hidden;\n    z-index: 500\n}\n\n#chart_parameter_settings.clicked {\n    visibility: visible\n}\n\n#chart_parameter_settings h2 {\n    padding: 8px 12px;\n    margin: 0\n}\n\n#chart_parameter_settings table {\n    border-collapse: collapse;\n    width: 100%\n}\n\n#chart_parameter_settings tr {\n    line-height: 32px\n}\n\n#chart_parameter_settings th {\n    text-align: right;\n    padding: 0 4px 0 16px\n}\n\n#chart_parameter_settings input {\n    width: 2em;\n    margin: 0 2px 0 2px\n}\n\n#chart_parameter_settings #close_settings {\n    border-radius: 4px;\n    cursor: pointer;\n    font-weight: bold;\n    text-align: center;\n    margin: 8px auto;\n    padding: 5px 24px 5px 24px;\n    width: 84px\n}\n\n#chart_parameter_settings .chart_str_default {\n    margin-right: 24px\n}\n\n.chart_container.dark #chart_parameter_settings {\n    background-color: rgba(0, 0, 0, 0.9);\n    border-color: rgba(0, 0, 0, 0.9);\n    color: #ccc;\n}\n\n.chart_container.dark #chart_parameter_settings #close_settings {\n    background: #1887da;\n    color: #eee\n}\n\n.chart_container.light #chart_parameter_settings {\n    background-color: rgba(244, 244, 244, 0.8);\n    border-color: #afb1b3;\n    color: #393c40\n}\n\n.chart_container.light #chart_parameter_settings #close_settings {\n    background: #1478c8;\n    color: #eee\n}\n\n.chart_container input,\n.chart_container button {\n    border-radius: 4px;\n    border: 1px solid;\n    padding: 4px\n}\n\n.chart_container input[type=text] {\n    width: 12em\n}\n\n.chart_container input[type=button],\n.chart_container input[type=submit],\n.chart_container button {\n    font-family: arial, sans, serif;\n    padding: 4px 8px;\n    cursor: pointer\n}\n\n.chart_container.dark input,\n.chart_container.dark button {\n    background-color: #151515;\n    border-color: #333;\n    color: #ccc\n}\n\n.chart_container.light input,\n.chart_container.light button {\n    background-color: #ddd;\n    border-color: #ddd;\n    color: #222\n}\n\n.trade_container {\n    width: 250px;\n    height: 100%;\n    float: right;\n    z-index: 99999;\n    font-size: 12px;\n    overflow: hidden\n}\n\n.trade_container.dark {\n    background: #0a0a0a;\n    color: #f1f1f1\n}\n\n.m_righttop {\n    position: fixed;\n    top: 0;\n    height: 41px;\n    line-height: 41px;\n    width: 230px;\n    text-align: right;\n    padding-right: 20px;\n    font-size: 16px;\n    color: #f78d15;\n    font-family: Gotham, "Helvetica Neue", Helvetica, Arial, sans-serif\n}\n\n.m_righttop em {\n    width: 123px;\n    height: 28px;\n    background-position: 0 0;\n    display: block;\n    float: right;\n    margin-top: 5px\n}\n\n.dark .m_righttop em {\n    background-position: 0 0\n}\n\n.m_rightbot {\n    height: 22px;\n    line-height: 22px;\n    border-top: 1px solid #404040;\n    width: 230px;\n    text-align: right;\n    padding-right: 20px;\n    background-color: #0a0a0a;\n    border-bottom-color: #404040\n}\n\n.m_guadan {\n    margin-top: 29px;\n    overflow: hidden;\n    border-left: 1px solid #404040;\n    border-top: 1px solid #404040\n}\n\n.m_guadan a {\n    font-weight: bold;\n    color: #FFF;\n    text-decoration: none\n}\n\n.light .m_guadan {\n    margin-top: 29px;\n    overflow: hidden;\n    border-left: 1px solid #afb1b3;\n    border-top: 1px solid #afb1b3\n}\n\n#orderbook #asks,\n#orderbook #gasks,\n#orderbook #bids,\n#orderbook #gbids {\n    height: 195px;\n    position: relative;\n    display: inline-block;\n    overflow: hidden\n}\n\n.symbol-title {\n    font-size: 14px;\n    font-weight: bold;\n    text-align: center;\n    height: 16px;\n    line-height: 16px;\n    font-family: Arial, sans, serif;\n    padding: 5px\n}\n\n.symbol-title .dark {\n    color: #6BF\n}\n\n.symbol-title .infoDepth {\n    margin-left: 8px;\n    color: #f78d15\n}\n\n.symbol-title a:hover {\n    text-decoration: underline\n}\n\n#asks,\n#bids {\n    width: 150px\n}\n\n#orderbook {\n    padding-left: 3px;\n    border-bottom: 1px solid #222;\n    padding-bottom: 2px;\n    margin-left: 5px;\n    margin-bottom: 2px\n}\n\n#orderbook .table {\n    position: absolute;\n    border-collapse: collapse;\n    padding: 0;\n    margin: 0\n}\n\n#gasks .table,\n#asks .table {\n    bottom: 0\n}\n\n#orderbook .table .row {\n    padding: 0;\n    margin: 0;\n    height: 13px;\n    line-height: 13px;\n    font-family: Consolas, monospace\n}\n\n#orderbook .table .row {\n    line-height: 13px\n}\n\n#orderbook .table .g {\n    color: #666\n}\n\n#gasks,\n#gbids {\n    width: 80px\n}\n\n#gasks .amount,\n#gbids .amount {\n    float: right\n}\n\n#gasks .price,\n#gbids .price {\n    float: left;\n    text-align: right\n}\n\n.price {\n    margin-right: 10px\n}\n\n.price h {\n    visibility: hidden\n}\n\n.price g,\n.amount g {\n    color: #666\n}\n\n#price {\n    text-align: center;\n    font-size: 16px;\n    font-weight: bold;\n    height: 25px;\n    line-height: 25px\n}\n\n.trade_container .green {\n    color: #0F0\n}\n\n.trade_container .red {\n    color: #F00\n}\n\n.trade_container.dark #orderbook div.table div.remove g,\n.trade_container.dark #orderbook div.table div.remove span {\n    color: #444\n}\n\n.trade_container.light #orderbook div.table div.remove g,\n.trade_container.light #orderbook div.table div.remove span {\n    color: #ddd\n}\n\n.trade_container.dark #orderbook div.table div.add {\n    display: none;\n    background-color: rgba(238, 238, 238, 0.2)\n}\n\n.trade_container.light #orderbook div.table div.add {\n    display: none;\n    background-color: rgba(100, 100, 100, 0.2)\n}\n\n#trades {\n    overflow-y: auto;\n    text-align: left;\n    color: #666;\n    padding-top: 5px\n}\n\n.trade_container.light {\n    background: #fff;\n    border-left: 1px solid #afb1b3;\n    color: #000\n}\n\n.trade_container.light .m_righttop em {\n    background-position: 0 -32px\n}\n\n.trade_container.light .m_righttop {\n    position: fixed;\n    top: 0;\n    height: 40px;\n    line-height: 40px;\n    background: #FFF;\n    width: 230px;\n    border-bottom: 1px solid #afb1b3;\n    text-align: right;\n    padding-right: 20px\n}\n\n.trade_container.light #trades.trades table {\n    color: #333\n}\n\n.trade_container.light #trades.trades .v {\n    color: #333\n}\n\n.trade_container.light #trades.trades .v g {\n    color: #333\n}\n\n.trade_container.light .m_rightbot {\n    background: #fff;\n    border-top: 1px solid #afb1b3\n}\n\n.trade_container.light #orderbook {\n    border-bottom: 1px solid #afb1b3\n}\n\n.trades_list {\n    padding-left: 25px\n}\n\n.trades_list ul {\n    width: 200px;\n    height: 14px;\n    line-height: 14px;\n    text-align: left;\n    list-style: none;\n    clear: both;\n    zoom: 1;\n    margin: 0;\n    padding: 0\n}\n\n.trades_list ul li {\n    height: 14px;\n    line-height: 14px;\n    color: #999;\n    font-size: 12px;\n    list-style: none;\n    float: left;\n    *display: inline;\n    margin: 0;\n    padding: 0;\n    font-family: Consolas, monospace\n}\n\n.trades_list ul li.tm {\n    width: 62px;\n    color: #999\n}\n\n.trades_list ul li.pr-green {\n    width: 65px;\n    color: #6c6\n}\n\n.trades_list ul li.pr-red {\n    width: 65px;\n    color: #c66\n}\n\n.trades_list ul li.vl {\n    width: 60px;\n    color: #ccc\n}\n\n.trades_list ul li.vl g {\n    color: #666\n}\n\n.trade_container.dark .trades_list ul.newul {\n    display: none;\n    background-color: rgba(238, 238, 238, 0.2)\n}\n\n.trade_container.light .trades_list ul.newul {\n    display: none;\n    background-color: rgba(100, 100, 100, 0.2)\n}\n\n.light .trades_list ul li.tm {\n    color: #333\n}\n\n.light .trades_list ul li.pr-green {\n    color: #6c6\n}\n\n.light .trades_list ul li.pr-red {\n    color: #c66\n}\n\n.light .trades_list ul li.vl {\n    color: #333\n}\n\n.light .trades_list ul li.vl g {\n    color: #333\n}\n\n.container .nav {\n    margin: 0;\n    list-style: none;\n    padding: 0 0 0 3px;\n    height: 41px\n}\n\n.container .nav li {\n    display: inline-block;\n    margin-right: 9px\n}\n\n.container a {\n    text-decoration: none;\n    color: #6BF;\n    font-family: Arial, sans, serif\n}\n\n.container a:hover {\n    text-decoration: underline\n}\n\n.container a.active {\n    color: #FC9\n}\n\n.container span {\n    margin-left: 3px;\n    font-family: Consolas, monospace;\n    color: #ccc\n}\n\n.light .container span {\n    color: #333\n}\n\n.light .container a {\n    text-decoration: none;\n    color: #1478c8;\n    font-family: Arial, sans, serif\n}\n\n.chart_BoxSize {\n    width: 20px;\n    height: 20px\n}\n\n.hide{\n    display:none;\n}\n\n/*水平翻转*/\n.flipx {\n    -moz-transform:scaleX(-1);\n    -webkit-transform:scaleX(-1);\n    -o-transform:scaleX(-1);\n    transform:scaleX(-1);\n    filter:FlipH();\n}\n/*垂直翻转*/\n.flipy {\n    -moz-transform:scaleY(-1);\n    -webkit-transform:scaleY(-1);\n    -o-transform:scaleY(-1);\n    transform:scaleY(-1);\n    filter:FlipV();\n}\n/*顺时针旋转90度*/\n.rotate90 {\n   filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);\n   -moz-transform: rotate(90deg);\n   -o-transform: rotate(90deg);\n   -webkit-transform: rotate(90deg);\n   transform: rotate(90deg);\n}\n/*顺时针旋转180度*/\n.rotate180 {\n   filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);\n   -moz-transform: rotate(180deg);\n   -o-transform: rotate(180deg);\n   -webkit-transform: rotate(180deg);\n   transform: rotate(180deg);\n}\n/*顺时针旋转270度*/\n.rotate270 {\n   filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);\n   -moz-transform: rotate(270deg);\n   -o-transform: rotate(270deg);\n   -webkit-transform: rotate(270deg);\n   transform: rotate(270deg);\n}',""])},function(t,e){t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAFCAYAAABmWJ3mAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAJn2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICAgICAgICAgIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj42PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT42NTUzNTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+NTwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDY8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0xMi0wM1QxNzo1Njo1MiswODowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDozNjIzYmJlYi1iNGU2LWNhNDktOTRjZi05MTIyY2Q1Y2NiZTk8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjM2MjNiYmViLWI0ZTYtY2E0OS05NGNmLTkxMjJjZDVjY2JlOTwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDo2QzE5MkVEOTY1N0UxMUU0QUUwMkE5RkYyNDYyQTBBODwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkRlcml2ZWRGcm9tIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgPHN0UmVmOmluc3RhbmNlSUQ+eG1wLmlpZDo4MzE3OTEwZi1kOTE5LTY4NDAtYWVhOS0zNzI5NWE2NGI1NmU8L3N0UmVmOmluc3RhbmNlSUQ+CiAgICAgICAgICAgIDxzdFJlZjpkb2N1bWVudElEPnhtcC5kaWQ6MWYwY2U2ZjQtZTRlNS1jODQ3LWIyOTgtNGNkNjRiYzBkYzA2PC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICA8L3htcE1NOkRlcml2ZWRGcm9tPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE0LTEyLTAzVDE3OjU2OjUyKzA4OjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8eG1wOkNyZWF0ZURhdGU+MjAxNC0xMi0wM1QxNzo1NjoyOCswODowMDwveG1wOkNyZWF0ZURhdGU+CiAgICAgICAgIDx4bXA6TW9kaWZ5RGF0ZT4yMDE0LTEyLTAzVDE3OjU2OjUyKzA4OjAwPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgqC9xe+AAAAWUlEQVQIHWO8cOHCFgYGBm8gRgZbmRgZGXOBIj+QRH8wMTHlMenr69////9/J0wCxNbT07vHCBK4f/8+x8ePH6+B2Pz8/FqKioo/mEAcEAOoEmRkHogNEgMA0qYfb8X3frQAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAFCAYAAABmWJ3mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA21pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0E5Qjc0ODc3QUQ0MTFFNDhCN0ZBNEVBQTM1QTBFNjgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0E5Qjc0ODY3QUQ0MTFFNDhCN0ZBNEVBQTM1QTBFNjgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM2MjNiYmViLWI0ZTYtY2E0OS05NGNmLTkxMjJjZDVjY2JlOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2QzE5MkVEOTY1N0UxMUU0QUUwMkE5RkYyNDYyQTBBOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvrZrC8AAABOSURBVHjaYvz//z8DCFy8eNEbSDHq6+tvAfEZQRJAQQ4g+xoDBGgBJX8wQTkVQKwIxRVgHRcuXFCEquaAKvoBxNogHZORBBmg7EkAAQYAImEV+46peUgAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAFCAYAAABmWJ3mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3FpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkMxOTJFRDk2NTdFMTFFNEFFMDJBOUZGMjQ2MkEwQTgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkMxOTJFRDg2NTdFMTFFNEFFMDJBOUZGMjQ2MkEwQTgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjgzMTc5MTBmLWQ5MTktNjg0MC1hZWE5LTM3Mjk1YTY0YjU2ZSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5MkIK1AAAAPklEQVR42mJ0CUvewsDA4M2ACrYyAYlcIP6BJAhi54Ek7gNxJ5IEiH2PCcrpgCq4D2UzsCBpBxnJCDMWIMAAVuANgw9cJ2UAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAFCAYAAABmWJ3mAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADcWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMTQgNzkuMTUxNDgxLCAyMDEzLzAzLzEzLTEyOjA5OjE1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjFmMGNlNmY0LWU0ZTUtYzg0Ny1iMjk4LTRjZDY0YmMwZGMwNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2QzE5MkVEOTY1N0UxMUU0QUUwMkE5RkYyNDYyQTBBOCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2QzE5MkVEODY1N0UxMUU0QUUwMkE5RkYyNDYyQTBBOCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODMxNzkxMGYtZDkxOS02ODQwLWFlYTktMzcyOTVhNjRiNTZlIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFmMGNlNmY0LWU0ZTUtYzg0Ny1iMjk4LTRjZDY0YmMwZGMwNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkyQgrUAAABCSURBVBhXY3QJS2aAAh8g/g/EW0EcJhABBBxAPAmIJ0PZcIkKIFaEYhAbLKEExOUgDhSA2IogCZARYO1QAGQzTAYAPbkH1E4jJr8AAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAFACAYAAAC1CvwiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0EwQTE5MkI4MTFEMTFFNEI4Njg4OEVFQzVGMTEyOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0EwQTE5MkE4MTFEMTFFNEI4Njg4OEVFQzVGMTEyOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjYzNEUzRUIyODExOTExRTRBNkJDQzhDODM5MEQxQTkwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjYzNEUzRUIzODExOTExRTRBNkJDQzhDODM5MEQxQTkwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+VsD84AAABMxJREFUeNrsXEloFEEU7QztBgoKkmgueogajSQRBEEQJ3jITVDUgxL1YoggHlSU6MHlKkEQ3FFREEEviogexJlTDqIxcQl60Is4oujFDVFhfN+p1kqlu7ZZMhN+w6My1f1fVXf9ev2r+6eDfD4fRMhkMpeBaXKdCalg5NYFPMpms0sDy62OWKINhtGPn8ABoC+dTud1BKmE+onAUeAOSBt8CKKtExgESafrKagb1fcB+3FKv1x68K8hYA/Qj0aafAiijUZnACRdUUVoYfQbuA8MAy+BF8BzG4LPwARgCtCLcx9wGYVXwHLgqvjd6zKMGWAZWqRunhF1a3HeC2wITtHYw/gT/UD5AMWQOG6v0Q/iNrTcI4jJvZtA+sZ1GK8AX4V773J1ZTqNLyjOi16ccD4Fp+lcmwRavYM+Zlw10XljghIQ1NFQafa3k6xr5kkH+8H48AOWtDEgGBUGuQSVYoLl5b8r6wfofqu43QcuMZJsfARYAiEZdOqBZHxINrYNMBKNjQQmYy2BjXEiga1xLIGLcVy0HhkfhPGQ7Y1FPYd2W+NCWKr4tuvcKHouhIaVCktaOQlw4etRvE95GpPHngUafVR5xFyxVST1oP+y5iPlJXVlW00cUsK7uirVRO3Vtlmx+IhL6UbBdLW1BD5qLKvyLJSnfYwjTXwHNMD4A0taBQkw7ItQbAXmWhMIo/UCLaK6L3RoeAP5ilJ30TVOpOcoPeLnMHynJeWoxrOlh1PXrZc8irhQDw4D1zhO5DiR48SaeZ5oiJvqqfQV1chjt1cmTtRNNBdZj52lJkUyx0y+EWr5I1XbmIk1kTWRCZig/ASqeyet4HTvWNKRkSDLOt0bbad56Pjkgv2ACZiACewjFJunV6MIrLRPF2AoPejgCIUJmIAJakMTVfEJZSPaCWRMrcrHO2tibA9cNVE+nv2ACaqDgPPSqjqtzHbtXPTStzRPsopZO7MncoIjE5SDALMvJ8SjMfpbEpTYurgZmHOpCzVakLOpS+xBXKtOPVBbjLsGVTSMscPjShAZCbL+omQdZOucCWLHmKdzrROY3vpp8xMtjEfnJ9omtankYdJ6UDbWkVvfXIk8akAmD6VueT1TC5OywZVzTiQPA807VhP53w3q2paguq3ADaBdt98rP1EeSufwVu2ZU4ykzT8wvWvX5h+Y3nhrc/dN+YmmiWWTn6h9F8+ayJrImlikJkbgnG3O2WZNLLUmOhrH5ycmGetmaWg7hZMEN6UTzKIfxtlqYuLOymui7VBqPZHzEz2f6vLb/zHOjCs+sc3mFanoUaYspzBOXlxn2JXZlVnSKkSAEZmB4gKwG6PxWt5ne2vbCdxWjbUxUsztblJ5XNn34qGHZDvZ650r6ueh2AfcSgqyiPgccAkXLqvUbwZWAcew72HSKGwEcorx/KDwr4nTgW1kHDsKOHAOijVAt/hNn/vaAqwUrQ7oojSasseBezjwJn43B4UPbD2h9QHqvpv8YHVQ+DbaXRhTD1YEhe/Gxa0b6LtZzfLSd6a4cPQtrE3AY9HqD7F/KorFAMWS9F+mRDAcLX1HxYrAW6BNGC0EiOgZ8JRKEH8bcQpKpugO4KMwoI+tnVS/FSc/Q4nz8W7T9/LU1bt3sitrYhD8EWAAdoU1AmCjen8AAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAFACAYAAAC1CvwiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI0MkEyMUI4MTIwMTFFNDgxNjhGRjc0RjJGMjMwQkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI0MkEyMUE4MTIwMTFFNDgxNjhGRjc0RjJGMjMwQkQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjZDNzdDQUY4NjU3RTExRTRBRTAyQTlGRjI0NjJBMEE4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjZDNzdDQUY5NjU3RTExRTRBRTAyQTlGRjI0NjJBMEE4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+s3AxtQAABPZJREFUeNrsXE1oHkUYnvkYq0IFC5ImubRI1WolSUEoFIqWHnIr6KqHStWLtaceJFhyUryG4ElKf8RaKELNYkFETyYXPYhNW3+CHtqL+NX+XdoKxQrTZ3bny7ffdv43+Wziu/BssrP7Pjs7M++z7+683zIpJVvEDDsBPNJT5kGL9S57gTMs58+xwKVlKHsC+A4kEwBPIVDLGmAK+Bok61MIOss4cA4k46kEahnUNZkCHkghUItqiwnge5BsSiHoLKp35kGyt1MgAoz+Bb4FFoDfgd+AX0MIbgDqmh8GJlkm52Ma8QKwHfhMb0/G9MIssA1nVNU8rMtewnU/FUJwqOj7TF4vtjL5A9bn9XHvGrtHOYRzyfl+TfwPsAmkf8R240nglh7e79R3+rsxkzdRi481wUfxl5DojauGIOez//s2WBEEHLcyV1eNFbJu95Od7nsfyGPvjdSN/804IElrTCCiLXIum9cgk7xA/8dBzkf07T6hDUrjD4CtqH5XZIKC6hk2ApwGxur7Ghn7CTzGboIAYztBoLGZIML4XoKu8WjoI4+oj+3iZpLJ88HjA2eTlRrImAeuJbmxCJOLkqgutyZ29WEA68utRGMlLkeAYRY7cOq+IlKkvEfWAs9qHe596IWywazDXSRJeY87N9REEdzaVkEJbO1lFpSA1vYpUqe14wRVi+pgrJTXe+ESsB5nvkKa2E9NzPkzWL8JbBSRRq9obNGl0zE1eBV4r1b2SWycqN7m7NdbCxg7W1qRUj5UeTn1eXgjdn3l/UIfcv4X/j8VpsoUJ1KcSHHi/U5QxomsWZyY86HGcWIj4zgCi5f6ojR/zJQaofYhUg2MmURyhGptA9JE0kQioGjdJ6j6Jey9Q9k+x/LColFJNhf77Bzk5rH3BfJGIiACInBoYqD2uUW1qn0BKQNuVVaT0RShEAEREMHK0MTa8WmaWDk+XhONNYjVxMrxpIlEsBIIKD+xPwR2PQjUypZX+zwiu8yTdSFaSRmSlOBIBMvhjTlvax0YXvy/qw3mMoMHtmPKXK8D2yFlwiNpw9ZtTeZTpLazDe4LXxDGxqlfe9A46BgpspzPNJP1TL4cT2Dqd1KkFU+gpgxzfhoYs+wfULf/ltW4mndi3l/kJwpHMLHVYdwhvyRsz4M9xg7y8EasBlwV8mpeWtI7NeGdoPWRO+dYg3JxUo31/l53TunK6JmdWs3ifMEwQsPzE23DO2jG25m778tP9OZkqcaaYQOOgNs5F0+qTJpImthUE43ORDnblLNNmpisicmRifl3LLYzO7xUBLuwRXBbLsFs/jIuwEtFYFjj+B1LQ02knG1G+YmMMuOW5O2+CE4bsRzXeIJiFYwDEZt7syrbgIYySVrfCHK+DvgCeDy1BgeAr9CVF9OHMmMP+h+6ljzd2N0uyvahtDnXnKtPoh0EvhQO9uPAp2i4uVr568Au4EPs+9HWC3uAds34SVb+NPFR4C1lbO6FnG/A+kVgn95Wn/t6A3hen3XePg7KT7xNFNXP5FVsb9ZnXQu8bfpeWL0Gu1n5bbRvYKxqsAOYtjx0qM9ebe7qQc4fw/ooK7+F9RpwtngqyeRtvV/V4llAxc/qV6aKYKEkMMWKjP0JjGqjpwFF9Avwc/E3k393Fal8iKhmyR8DrmmDn5j6yFom79hE1TTG98EgSOvMlxCR7EqiythdAQYAbEvqZUahHBUAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABC0lEQVQ4T7WTYVEDMRSEv1VAJYCDOmgdgAPAASigKGhx0CoACcUBEsDBVcFj9ibpvF6TDn/IzM0kL9l9t5usImIFvHA6niVtcikinoB1qg3AmyIiSnEslPle0n5CsAT8eZjsChgqwaEUtpIeJ39zsoyILXAPjJhK8Apcl40uSQLvgG9LPxJIWqUDZyQZLOmhemcC6/mqmlskU7A1RYT9mKultwDuLEvSEBE2+MOdp+ebBKXDzOBLhnrvfwiKhFvgJkl4b13xJRN3VXPH2Dmw6F3jEVw9mJLka/RTzg/pDNwiAX7yQ7LbM6ALbpCMGEvwZAwGUBP42QnTIoXJDQ8mcJxrumqjv8TZYdr8Ai/uwaXkPGIcAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAFACAYAAAC1CvwiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI1Q0Q4QzI4MTIxMTFFNEFGNzk4NUQxNjVEMjU2RTYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI1Q0Q4QzE4MTIxMTFFNEFGNzk4NUQxNjVEMjU2RTYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwNTdERDc2N0U4RDExRTRCOUQ1Q0FDNDRFM0JBN0QwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwNTdERDc3N0U4RDExRTRCOUQ1Q0FDNDRFM0JBN0QwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+R+XfywAABNVJREFUeNrsXEloFEEU7QztBgoKkmgueogajSQRBFEMJnjITVDUgxL1YogXDypK9OBylSAI4r6CCOpBEdGDOAEhB9GYuIR40Is4QdGLG6LC+H6mWsua7lq6Z8aZ8Bsela7u/7q669ebX10/7WWzWS/A0uWtl4Apcp0JKe/frQN4vKylbbFnuVURS7DBMNj5AewDevoepLM6glRE/XjgMHAHpDVxCIKtHRgASbvrLagb1fcAe3FLP11a8OdCwC6gDxepi0MQbNQ7/SDpCCp8C6NfwH1gCHgJDAMvbAg+AeOASUA37r3fpRde0TMFroj9bpduTANLcEVq5klRtwb3Pc+G4Dj1PYw/0g7KhygGxXm7jX4QtuHKXYKY3LsOpG9cu/Ey8EW49w5XV6bb+IzirGjFMedbcBrOlUmg1TvoY9pVE503JigAQRV1leZ4M8m6Zpy0sR+MDT9gSUtO4Lsa5IVBLkGlGGBZ+e/S+gGa3yh+7t2fgTA+BCyCkAw4tUAyPiAb2wYYkcZGApOxlsDGOJLA1jiUwMU4LFoPjPfDeND2h0W9h2Zb49FN9W3XsZF4LPiGmQprYjE0UXK6ahTvUjGNyWNPAbV+TONgrIzYKpJ60l9ZiyPlBXVlW00cVMK7qjLVRO3TtpmxxBGXwvWC6WlrCeKosazKM1CeiGMcDOcRoAbG71kTS6iJ6PYFKLYAs61bIIzWCTSI6h6XFqwnX1HqzrvGifQepUvsDsF3GlKOajxTejl1zXrKo4gLteAgcJXjRI4TOU6smPeJhripmspYLZA8dltp4kTdQHOR9dBRalIkc8wUN0ItfqRqGzOxJrImMgETFJ9Ade+oGZxujaU1MBJkvU6/jbbD3Hd8c8F+wARMwAT2EYrN26s8Aivts32HMroYzREKEzABE1SEJqri48tGdBBIm64qn++siaEtcNVE+Xz2AyYoDwLOSyvrtDLbuXPiqW9h3mQlmTuzJ3KCIxMUgwCjLyPEozb4WxKU0LqwEZhxqfM1WpCxqYtsQdhVnVqgXjHsGZRRN4Z2j6sqB0ZEBlxPJOsgW+tMENrHPJwrhEA3nLWrftr8RAvj/PxE26Q2dd3Zj5oPysY6cusfVyIPLiCT+1KzYr1T86OywZV7jiT3Pc0aq4l8dIO6NkWobiNwA2jWHY+Vnyh3pXN4q7bMKUbS5h+Y1tq1+QemFW9t7r4pP9E0sGzyE7Vr8ayJrImsiQk1MQDnbHPONmtioTXR0Tg8PzHKWDdKfdshHCW4KZ1gJn4ZZ6uJkQdLr4m2Xal1Zc5PjDmcefX/P2fGJU9ss1kiFS1KF+UWxsjCdZpdmV2ZJa1EBOiRaSjOATvRG6/lY7Y/bduB26qxKVJVmzahOK4c9+GhhWQ7MdaaK+rnoNgD3PI17BeAi3hwvUr9JmAlcATHHkX1wgYgoxjP9XL/mjgV2ErGob2AE2ehWA10in363NdmYIW4ar8uSqMhexS4hxNvYr/ey31g6ynND1D3zeQHq7zct9Huwpha0OLlvhsXNm+g72bVy1Pf6ShOe7lvYW0EnoirfhfHJ6NYCFAsSf9lSgRDwdQ3L1YE3gJNwmg+QETPgWdUgvirPHdWM0XPAB+EAd3/sPqtOPkdSpiPd5q+l6fO3mMnu7Imet5vAQYAtaODAARZxFkAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAFACAYAAAC1CvwiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZjBjZTZmNC1lNGU1LWM4NDctYjI5OC00Y2Q2NGJjMGRjMDYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEY5QjlCQTA4MTIyMTFFNEIwQUVBMkM3NjgwODE3OTYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEY5QjlCOUY4MTIyMTFFNEIwQUVBMkM3NjgwODE3OTYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwNTdERDdBN0U4RDExRTRCOUQ1Q0FDNDRFM0JBN0QwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwNTdERDdCN0U4RDExRTRCOUQ1Q0FDNDRFM0JBN0QwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+2tcnMAAABOxJREFUeNrsXDtoFUEU3SzjDwwoiNE0WsS/aAQ/IIiKRTpBUQvBT+MPxEKDEhs1hU0IVvEHahREUAtBRCu10UI0RtSghTbiE39NoiAqPM9NZnWzmZm9My/vaeIdOGx2svfs7Myds3d37tuoWCxGCbqbFl0AqtN1eYij/mUT8Kjn4OKFEbPEhrppwD2QNAJVIQRURgItwE2Q1IQQJKUB6ARJQygBlUm6JS3AiBACKtQXjcB9kNSFECSFRqcDJJuSCsUw+gncBrqAl8AL4DmHoBugax4DNFUffdDh04mvgKXAJb3f5DMKd4AlOCM185SuW4vrnsEhOEFjD+PPtIPtA2ye6OP2G4eHJoSr4Mw7NfF3oA6kb3yH8SLwRbv3Xm9Hwhl7sDmjW9HmfQmhs3G4EGAI7/zvfTA0CKpwK3MNVT3JumOerHTe94jc994ow/hX/EAkrXQC5WsAnSyW3ALMwipC5f0AzZ+nb/f+faCNm4EFaH6nVx+kjA+njVkELmPOrc1p7CTgGFsJuMZGAh/jAcOYMj4E4yfcG0vWk+q5xn0BMQhSN5KizwPXoNxYlGmKiqiWWRNTTjcRm/dxoDF57GmgNg40TubKO8U0yo71H1njuKvL3cs/Cvqare6uQqR8UDVRsXvbVri9XV5B4fR2niIlHeYnqFqV6SXLSR8pz7bgHVAD4w+iiRXURAz7bGy2AlOVp9F6jTm6utWnBRvIVzJ153zjRHqPslPvdsF35sQexuTuk1Mvp66ExonUgiPAZe6LKIkTJU6UOPGfJtBxYlgnpjx2V8lxYlyCcadXH9hmaV6Ulh8zhUao5Y9UuTGTCo1QRRNFE4VACHwUqZ+LJi9hTdPZtsayIjHSZHdzn1xDnmJ97wsyG4VACISAH6HYtM8pqmnt46QMOFW5dzFaIhQhEAIh+CtxIjcetAVeQZqYPt5bE40t8NXE9PGiiUIwBAgkP7FScaJND7haGedpX57IlnexjqWVkiEpCY5CUIbZiNlX0DpQm/yd0gZjnWkGFnzqXK8DC5w6lSNptbb9hCxPkQquPvg35oIydU722ll+kBgRGXC1JFkH2TpvAlMPiyINSUHJTCTnqp8zP5Fh/Ds/UTmCiQUOY3N+Yvp5MG3sImd3YjrgGrDuHJrUljw7OxdoOfmJ1jVWzuqvYhi7hrK533QOGUrvlR3UzwOuAfXecaLpstj5ic78g7z8RFeH5uYn5o0GJz/RuRYvqiyaKJqoC2bjfI7y2BCkidZnZ8nZlpzt/1gT40BjsybajF2zVHGnsE1wY5dglvwyjquJnLCmQprIHUqnK0t+YvgLCFn9L5MmVubtvuKmjdiOK3mBYhj4gfLNvRmOfSCuLJIWVeq3fRiR8dicBfZhNF6HtGAPcCNr7OXKKKNyH7oGPd04p1/IdnTQmivq6ZNoB4DrysHeDpxHx93N1G8GVgHH8L+HtlHYCBQyxtOjvp8mjgO2kbFxFHDgFGzWANv1Pn3uawuwXJ+1w+oH+hNv9Fmzdhz4Efsz9VnHAjtM3wvLtmB11PdttFswphYsA1otzw303ayZ6UffCVHfT0/b9IPoY32t3/T/qRVzAYol6VemRNDVKyiG4aKPCr0F5mujWQARPQOe0hbEX/tdQiZLfjfwSRvQx9aO4/8/bKJq8vHtMGBpnfESfJJdRVSj6JcAAwDMequ4kXXO2QAAAABJRU5ErkJggg=="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABKElEQVQ4T7VTwU0DMRCcrYArwby9j3QQOoAOgA5CBYQKCB0kFUAJoQMe9v/o4JD8X7SWfVo5vhMfLJ1krT3jm9kdYuY9gGeYJSJPMcaDrXnvd0T0amoTgDdiZinFXCj7cwjhbAmY+QaAfrp2AK4ATJXgRwsicowxPlpgu/feH4noHkDGVIIXEXF6sEZSwSJyIqJRpc8EIYS9uXDxJxYcY3yo3lEx56tq7pG0YJWlnojIhnp6C+AupeTGcZyYeRKRD325vd8l0EvOuUHBa4bq2f8QFAm3KaVrI+G91+I1E09V84KxGyLaLrVxBlcPWpK5jWWU7SBdgHskRPRtB0ndHnTCeq1qQlVHOWNUgm5yMADUBH4uhGlrwjRoHpRA41zTlc//GGcN0+EXyGXo9iBlz1cAAAAASUVORK5CYII="},function(t,e,n){var r={},i=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),o=function(t){var e={};return function(t){if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),a=null,s=0,u=[],c=n(46);function l(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(g(i.parts[a],e))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(g(i.parts[a],e));r[i.id]={id:i.id,refs:1,parts:s}}}}function h(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function d(t,e){var n=o(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function f(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function p(t){var e=document.createElement("style");return t.attrs.type="text/css",_(e,t.attrs),d(t,e),e}function _(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function g(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var u=s++;n=a||(a=p(e)),r=m.bind(null,n,u,!1),i=m.bind(null,n,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",_(e,t.attrs),d(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=c(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),i=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=p(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){f(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return l(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var a=n[o];(s=r[a.id]).refs--,i.push(s)}t&&l(h(t,e),e);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete r[s.id]}}}};var v=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function m(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=v(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e){t.exports='<div class="trade_container dark hide">\n    <div class="m_cent">\n        <div class="m_guadan">\n            <div class="symbol-title">\n                <a class="dark"></a>\n            </div>\n            <div id="orderbook">\n                <div id="asks">\n                    <div class="table"></div>\n                </div>\n                <div id="gasks">\n                    <div class="table"></div>\n                </div>\n                <div id="price" class="green"></div>\n                <div id="bids">\n                    <div class="table"></div>\n                </div>\n                <div id="gbids">\n                    <div class="table"></div>\n                </div>\n            </div>\n            <div id="trades" class="trades">\n                <div class="trades_list"></div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="chart_container dark">\n    <div id="chart_dom_elem_cache"></div>\n    \x3c!-- ToolBar --\x3e\n    <div id="chart_toolbar">\n        <div class="chart_toolbar_minisep"></div>\n        \x3c!-- Periods --\x3e\n        <div class="chart_dropdown" id="chart_toolbar_periods_vert">\n            <div class="chart_dropdown_t"><a class="chart_str_period">周期</a></div>\n            <div class="chart_dropdown_data" style="margin-left: -58px;">\n                <table>\n                    <tbody>\n                    <tr>\n                        <td>\n                            <ul>\n                                <li id="chart_period_1w_v" style="display:none;" name="1w">\n                                    <a class="chart_str_period_1w">周线</a>\n                                </li>\n                                <li id="chart_period_3d_v" style="display:none;" name="3d">\n                                    <a class="chart_str_period_3d">3日</a>\n                                </li>\n                                <li id="chart_period_1d_v" style="display:none;" name="1d">\n                                    <a class="chart_str_period_1d">日线</a>\n                                </li>\n                                <li id="chart_period_12h_v" style="display:none;" name="12h">\n                                    <a class="chart_str_period_12h">12小时</a>\n                                </li>\n                                <li id="chart_period_6h_v" style="display:none;" name="6h">\n                                    <a class="chart_str_period_6h">6小时</a>\n                                </li>\n                                <li id="chart_period_4h_v" style="display:none;" name="4h">\n                                    <a class="chart_str_period_4h">4小时</a>\n                                </li>\n                                <li id="chart_period_2h_v" style="display:none;" name="2h">\n                                    <a class="chart_str_period_2h">2小时</a>\n                                </li>\n                                <li id="chart_period_1h_v" style="display:none;" name="1h">\n                                    <a class="chart_str_period_1h">1小时</a>\n                                </li>\n                            </ul>\n                        </td>\n\n                    </tr>\n\n                    <tr>\n                        <td>\n                            <ul>\n                                <li id="chart_period_30m_v" style="display:none;" name="30m">\n                                    <a class="chart_str_period_30m">30分钟</a>\n                                </li>\n                                <li id="chart_period_15m_v" style="display:none;" name="15m">\n                                    <a class="chart_str_period_15m">15分钟</a>\n                                </li>\n                                <li id="chart_period_5m_v" style="display:none;" name="5m">\n                                    <a class="chart_str_period_5m">5分钟</a>\n                                </li>\n                                <li id="chart_period_3m_v" style="display:none;" name="3m">\n                                    <a class="chart_str_period_3m">3分钟</a>\n                                </li>\n                                <li id="chart_period_1m_v" style="display:none;" name="1m">\n                                    <a class="chart_str_period_1m selected">1分钟</a>\n                                </li>\n                                <li id="chart_period_line_v" style="display:none;" name="line">\n                                    <a class="chart_str_period_line">分时</a>\n                                </li>\n                            </ul>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <div id="chart_toolbar_periods_horz">\n            <ul class="chart_toolbar_tabgroup" style="padding-left:5px; padding-right:11px;">\n                <li id="chart_period_1w_h" name="1w" style="display: none;">\n                    <a class="chart_str_period_1w">周线</a>\n                </li>\n                <li id="chart_period_3d_h" name="3d" style="display: none;">\n                    <a class="chart_str_period_3d">3日</a>\n                </li>\n                <li id="chart_period_1d_h" name="1d" style="display: none;">\n                    <a class="chart_str_period_1d">日线</a>\n                </li>\n                <li id="chart_period_12h_h" name="12h" style="display: none;">\n                    <a class="chart_str_period_12h">12小时</a>\n                </li>\n                <li id="chart_period_6h_h" name="6h" style="display: none;">\n                    <a class="chart_str_period_6h">6小时</a>\n                </li>\n                <li id="chart_period_4h_h" name="4h" style="display: none;">\n                    <a class="chart_str_period_4h">4小时</a>\n                </li>\n                <li id="chart_period_2h_h" name="2h" style="display: none;">\n                    <a class="chart_str_period_2h">2小时</a>\n                </li>\n                <li id="chart_period_1h_h" name="1h" style="display: none;">\n                    <a class="chart_str_period_1h">1小时</a>\n                </li>\n                <li id="chart_period_30m_h" name="30m" style="display: none;">\n                    <a class="chart_str_period_30m">30分钟</a>\n                </li>\n                <li id="chart_period_15m_h" name="15m" style="display: none;">\n                    <a class="chart_str_period_15m">15分钟</a>\n                </li>\n                <li id="chart_period_5m_h" name="5m" style="display: none;">\n                    <a class="chart_str_period_5m">5分钟</a>\n                </li>\n                <li id="chart_period_3m_h" name="3m" style="display: none;">\n                    <a class="chart_str_period_3m">3分钟</a>\n                </li>\n                <li id="chart_period_1m_h" name="1m" style="display: none;">\n                    <a class="chart_str_period_1m selected">1分钟</a>\n                </li>\n                <li id="chart_period_line_h" name="line" style="display: none;">\n                    <a class="chart_str_period_line">分时</a>\n                </li>\n            </ul>\n        </div>\n        <div id="chart_show_indicator" class="chart_toolbar_button chart_str_indicator_cap selected">技术指标</div>\n        <div id="chart_show_tools" class="chart_toolbar_button chart_str_tools_cap">画线工具</div>\n        <div id="chart_toolbar_theme">\n            <div class="chart_toolbar_label chart_str_theme_cap">\n                主题选择\n            </div>\n            <a name="dark" class="chart_icon chart_icon_theme_dark selected"></a>\n            <a name="light" class="chart_icon chart_icon_theme_light"></a>\n        </div>\n        <div class="chart_dropdown" id="chart_dropdown_settings">\n            <div class="chart_dropdown_t"><a class="chart_str_settings">更多</a></div>\n\n            <div class="chart_dropdown_data" style="margin-left: -142px;">\n                <table>\n                    <tbody>\n                    <tr id="chart_select_main_indicator">\n                        <td class="chart_str_main_indicator">主指标</td>\n                        <td>\n                            <ul>\n                                <li><a name="MA" class="selected">MA</a></li>\n                                <li><a name="EMA" class="">EMA</a></li>\n                                <li><a name="BOLL" class="">BOLL</a></li>\n                                <li><a name="SAR" class="">SAR</a></li>\n                                <li><a name="NONE" class="">None</a></li>\n                            </ul>\n                        </td>\n                    </tr>\n\n                    <tr id="chart_select_chart_style">\n                        <td class="chart_str_chart_style">主图样式</td>\n                        <td>\n                            <ul>\n                                <li><a class="selected">CandleStick</a></li>\n                                <li><a>CandleStickHLC</a></li>\n                                <li><a class="">OHLC</a></li>\n                            </ul>\n                        </td>\n                    </tr>\n\n                    <tr id="chart_select_theme" style="display: none;">\n                        <td class="chart_str_theme">主题选择</td>\n                        <td>\n                            <ul>\n                                <li>\n                                    <a name="dark" class="chart_icon chart_icon_theme_dark selected"></a>\n                                </li>\n\n                                <li>\n                                    <a name="light" class="chart_icon chart_icon_theme_light"></a>\n                                </li>\n                            </ul>\n                        </td>\n                    </tr>\n                    <tr id="chart_enable_tools" style="display: none;">\n                        <td class="chart_str_tools">画线工具</td>\n                        <td>\n                            <ul>\n                                <li><a name="on" class="chart_str_on">开启</a></li>\n                                <li><a name="off" class="chart_str_off selected">关闭</a></li>\n\n                            </ul>\n\n                        </td>\n                    </tr>\n                    <tr id="chart_enable_indicator" style="display: none;">\n                        <td class="chart_str_indicator">技术指标</td>\n                        <td>\n                            <ul>\n                                <li><a name="on" class="chart_str_on selected">开启</a></li>\n                                <li><a name="off" class="chart_str_off">关闭</a></li>\n                            </ul>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td></td>\n                        <td>\n                            <ul>\n                                <li>\n                                    <a id="chart_btn_parameter_settings" class="chart_str_indicator_parameters">指标参数设置</a>\n                                </li>\n                            </ul>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n\n        <div class="chart_dropdown" id="chart_language_setting_div" style="padding-left: 5px;">\n            <div class="chart_dropdown_t">\n                <a class="chart_language_setting">语言(LANG)</a>\n            </div>\n            <div class="chart_dropdown_data" style="padding-top: 15px; margin-left: -12px;">\n                <ul>\n                    <li style="height: 25px;">\n                        <a name="zh-cn" class="selected">简体中文(zh-CN)</a>\n                    </li>\n                    <li style="height: 25px;">\n                        <a name="en-us">English(en-US)</a>\n                    </li>\n                    <li style="height: 25px;">\n                        <a name="zh-tw">繁體中文(zh-HK)</a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n        <div id="chart_updated_time">\n            <div id="sizeIcon" class="chart_BoxSize"></div>\n        </div>\n    </div>\n               \x3c!-- ToolPanel --\x3e\n    <div id="chart_toolpanel">\n        <div class="chart_toolpanel_separator"></div>\n\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_Cursor" name="Cursor"></div>\n            <div class="chart_toolpanel_tip chart_str_cursor">\n                光标\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_CrossCursor" name="CrossCursor"></div>\n            <div class="chart_toolpanel_tip chart_str_cross_cursor">\n                十字光标\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_SegLine" name="SegLine"></div>\n            <div class="chart_toolpanel_tip chart_str_seg_line">\n                线段\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_StraightLine" name="StraightLine"></div>\n            <div class="chart_toolpanel_tip chart_str_straight_line">\n                直线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_RayLine" name="RayLine"></div>\n            <div class="chart_toolpanel_tip chart_str_ray_line">\n                射线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_ArrowLine" name="ArrowLine"></div>\n            <div class="chart_toolpanel_tip chart_str_arrow_line">\n                箭头\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_HoriSegLine" name="HoriSegLine"></div>\n            <div class="chart_toolpanel_tip chart_str_horz_seg_line">\n                水平线段\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_HoriStraightLine" name="HoriStraightLine"></div>\n            <div class="chart_toolpanel_tip chart_str_horz_straight_line">\n                水平直线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_HoriRayLine" name="HoriRayLine"></div>\n            <div class="chart_toolpanel_tip chart_str_horz_ray_line">\n                水平射线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_VertiStraightLine" name="VertiStraightLine"></div>\n            <div class="chart_toolpanel_tip chart_str_vert_straight_line">\n                垂直直线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_PriceLine" name="PriceLine"></div>\n            <div class="chart_toolpanel_tip chart_str_price_line">\n                价格线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_TriParallelLine" name="TriParallelLine"></div>\n            <div class="chart_toolpanel_tip chart_str_tri_parallel_line">\n                价格通道线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_BiParallelLine" name="BiParallelLine"></div>\n            <div class="chart_toolpanel_tip chart_str_bi_parallel_line">\n                平行直线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_BiParallelRayLine" name="BiParallelRayLine"></div>\n            <div class="chart_toolpanel_tip chart_str_bi_parallel_ray">\n                平行射线\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_DrawFibRetrace" name="DrawFibRetrace"></div>\n            <div class="chart_toolpanel_tip chart_str_fib_retrace">\n                斐波纳契回调\n            </div>\n        </div>\n        <div class="chart_toolpanel_button">\n            <div class="chart_toolpanel_icon" id="chart_DrawFibFans" name="DrawFibFans"></div>\n            <div class="chart_toolpanel_tip chart_str_fib_fans">\n                斐波纳契扇形\n            </div>\n        </div>\n        <div style="padding-left: 3px;padding-top: 10px;">\n            <button style="color: red;" id="clearCanvas" title="Clear All">X</button>\n        </div>\n    </div>\n    <div id="chart_canvasGroup" class="temp">\n        <canvas class="chart_canvas" id="chart_mainCanvas" style="cursor: default;"></canvas>\n        <canvas class="chart_canvas" id="chart_overlayCanvas" style="cursor: default;"></canvas>\n    </div>\n    <div id="chart_tabbar">\n        <ul>\n            <li><a name="MACD" class="">MACD</a></li>\n\n            <li><a name="KDJ" class="">KDJ</a></li>\n\n            <li><a name="StochRSI" class="">StochRSI</a></li>\n\n            <li><a name="RSI" class="">RSI</a></li>\n\n            <li><a name="DMI" class="">DMI</a></li>\n\n            <li><a name="OBV" class="">OBV</a></li>\n\n            <li><a name="BOLL" class="">BOLL</a></li>\n\n            <li><a name="SAR" class="">SAR</a></li>\n\n            <li><a name="DMA" class="">DMA</a></li>\n\n            <li><a name="TRIX" class="">TRIX</a></li>\n\n            <li><a name="BRAR" class="">BRAR</a></li>\n\n            <li><a name="VR" class="">VR</a></li>\n\n            <li><a name="EMV" class="">EMV</a></li>\n\n            <li><a name="WR" class="">WR</a></li>\n\n            <li><a name="ROC" class="">ROC</a></li>\n\n            <li><a name="MTM" class="">MTM</a></li>\n\n            <li><a name="PSY">PSY</a></li>\n\n        </ul>\n\n    </div>\n\n    <div id="chart_parameter_settings">\n        <h2 class="chart_str_indicator_parameters">指标参数设置</h2>\n        <table>\n            <tbody>\n            <tr>\n                <th>MA</th>\n                <td><input name="MA"><input name="MA"><input name="MA"><input name="MA"><br><input\n                        name="MA"><input\n                        name="MA">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>DMA</th>\n                <td><input name="DMA"><input name="DMA"><input name="DMA"></td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>EMA</th>\n                <td>\n                    <input name="EMA"><input name="EMA"><input name="EMA"><input name="EMA"><br>\n                    <input name="EMA"><input name="EMA">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>TRIX</th>\n                <td><input name="TRIX"><input name="TRIX"></td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>VOLUME</th>\n                <td><input name="VOLUME"><input name="VOLUME"></td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>BRAR</th>\n                <td><input name="BRAR"></td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>MACD</th>\n                <td>\n                    <input name="MACD"><input name="MACD"><input name="MACD">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>VR</th>\n                <td><input name="VR"><input name="VR"></td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>KDJ</th>\n                <td>\n                    <input name="KDJ"><input name="KDJ"><input name="KDJ">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>EMV</th>\n                <td>\n                    <input name="EMV"><input name="EMV">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>StochRSI</th>\n                <td>\n                    <input name="StochRSI"><input name="StochRSI"><input name="StochRSI"><input name="StochRSI">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>WR</th>\n                <td>\n                    <input name="WR"><input name="WR">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>RSI</th>\n                <td>\n                    <input name="RSI"><input name="RSI"><input name="RSI">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>ROC</th>\n                <td>\n                    <input name="ROC"><input name="ROC">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>DMI</th>\n                <td>\n                    <input name="DMI"><input name="DMI">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>MTM</th>\n                <td>\n                    <input name="MTM"><input name="MTM">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>OBV</th>\n                <td>\n                    <input name="OBV">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n\n                <th>PSY</th>\n                <td>\n                    <input name="PSY"><input name="PSY">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n\n            <tr>\n                <th>BOLL</th>\n                <td>\n                    <input name="BOLL">\n                </td>\n                <td>\n                    <button class="chart_str_default">默认值</button>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n\n        <div id="close_settings"><a class="chart_str_close">关闭</a></div>\n\n    </div>\n\n    \x3c!-- Loading --\x3e\n    <div id="chart_loading" class="chart_str_loading">正在读取数据...</div>\n</div>\n\n<div style="display: none" id="chart_language_switch_tmp">\n    <span name="chart_str_period" zh_tw="週期" zh_cn="周期" en_us="TIME"></span>\n    <span name="chart_str_period_line" zh_tw="分時" zh_cn="分时" en_us="Line"></span>\n    <span name="chart_str_period_1m" zh_tw="1分鐘" zh_cn="1分钟" en_us="1m"></span>\n    <span name="chart_str_period_3m" zh_tw="3分鐘" zh_cn="3分钟" en_us="3m"></span>\n    <span name="chart_str_period_5m" zh_tw="5分鐘" zh_cn="5分钟" en_us="5m"></span>\n    <span name="chart_str_period_15m" zh_tw="15分鐘" zh_cn="15分钟" en_us="15m"></span>\n    <span name="chart_str_period_30m" zh_tw="30分鐘" zh_cn="30分钟" en_us="30m"></span>\n    <span name="chart_str_period_1h" zh_tw="1小時" zh_cn="1小时" en_us="1h"></span>\n    <span name="chart_str_period_2h" zh_tw="2小時" zh_cn="2小时" en_us="2h"></span>\n    <span name="chart_str_period_4h" zh_tw="4小時" zh_cn="4小时" en_us="4h"></span>\n    <span name="chart_str_period_6h" zh_tw="6小時" zh_cn="6小时" en_us="6h"></span>\n    <span name="chart_str_period_12h" zh_tw="12小時" zh_cn="12小时" en_us="12h"></span>\n    <span name="chart_str_period_1d" zh_tw="日線" zh_cn="日线" en_us="1d"></span>\n    <span name="chart_str_period_3d" zh_tw="3日" zh_cn="3日" en_us="3d"></span>\n    <span name="chart_str_period_1w" zh_tw="周線" zh_cn="周线" en_us="1w"></span>\n    <span name="chart_str_settings" zh_tw="更多" zh_cn="更多" en_us="MORE"></span>\n    <span name="chart_setting_main_indicator" zh_tw="均線設置" zh_cn="均线设置" en_us="Main Indicator"></span>\n    <span name="chart_setting_main_indicator_none" zh_tw="關閉均線" zh_cn="关闭均线" en_us="None"></span>\n    <span name="chart_setting_indicator_parameters" zh_tw="指標參數設置" zh_cn="指标参数设置" en_us="Indicator Parameters"></span>\n    <span name="chart_str_chart_style" zh_tw="主圖樣式" zh_cn="主图样式" en_us="Chart Style"></span>\n    <span name="chart_str_main_indicator" zh_tw="主指標" zh_cn="主指标" en_us="Main Indicator"></span>\n    <span name="chart_str_indicator" zh_tw="技術指標" zh_cn="技术指标" en_us="Indicator"></span>\n    <span name="chart_str_indicator_cap" zh_tw="技術指標" zh_cn="技术指标" en_us="INDICATOR"></span>\n    <span name="chart_str_tools" zh_tw="畫線工具" zh_cn="画线工具" en_us="Tools"></span>\n    <span name="chart_str_tools_cap" zh_tw="畫線工具" zh_cn="画线工具" en_us="TOOLS"></span>\n    <span name="chart_str_theme" zh_tw="主題選擇" zh_cn="主题选择" en_us="Theme"></span>\n    <span name="chart_str_theme_cap" zh_tw="主題選擇" zh_cn="主题选择" en_us="THEME"></span>\n    <span name="chart_language_setting" zh_tw="語言(LANG)" zh_cn="语言(LANG)" en_us="LANGUAGE"></span>\n    <span name="chart_exchanges_setting" zh_tw="更多市場" zh_cn="更多市场" en_us="MORE MARKETS"></span>\n    <span name="chart_othercoin_setting" zh_tw="其它市場" zh_cn="其它市场" en_us="OTHER MARKETS"></span>\n\n    <span name="chart_str_none" zh_tw="關閉" zh_cn="关闭" en_us="None"></span>\n    <span name="chart_str_theme_dark" zh_tw="深色主題" zh_cn="深色主题" en_us="Dark"></span>\n    <span name="chart_str_theme_light" zh_tw="淺色主題" zh_cn="浅色主题" en_us="Light"></span>\n    <span name="chart_str_on" zh_tw="開啟" zh_cn="开启" en_us="On"></span>\n    <span name="chart_str_off" zh_tw="關閉" zh_cn="关闭" en_us="Off"></span>\n    <span name="chart_str_close" zh_tw="關閉" zh_cn="关闭" en_us="CLOSE"></span>\n    <span name="chart_str_default" zh_tw="默認值" zh_cn="默认值" en_us="default"></span>\n    <span name="chart_str_loading" zh_tw="正在讀取數據..." zh_cn="正在读取数据..." en_us="Loading..."></span>\n    <span name="chart_str_indicator_parameters" zh_tw="指標參數設置" zh_cn="指标参数设置" en_us="Indicator Parameters"></span>\n    <span name="chart_str_cursor" zh_tw="光標" zh_cn="光标" en_us="Cursor"></span>\n    <span name="chart_str_cross_cursor" zh_tw="十字光標" zh_cn="十字光标" en_us="Cross Cursor"></span>\n    <span name="chart_str_seg_line" zh_tw="線段" zh_cn="线段" en_us="Trend Line"></span>\n    <span name="chart_str_straight_line" zh_tw="直線" zh_cn="直线" en_us="Extended"></span>\n    <span name="chart_str_ray_line" zh_tw="射線" zh_cn="射线" en_us="Ray"></span>\n    <span name="chart_str_arrow_line" zh_tw="箭頭" zh_cn="箭头" en_us="Arrow"></span>\n    <span name="chart_str_horz_seg_line" zh_tw="水平線段" zh_cn="水平线段" en_us="Horizontal Line"></span>\n    <span name="chart_str_horz_straight_line" zh_tw="水平直線" zh_cn="水平直线" en_us="Horizontal Extended"></span>\n    <span name="chart_str_horz_ray_line" zh_tw="水平射線" zh_cn="水平射线" en_us="Horizontal Ray"></span>\n    <span name="chart_str_vert_straight_line" zh_tw="垂直直線" zh_cn="垂直直线" en_us="Vertical Extended"></span>\n    <span name="chart_str_price_line" zh_tw="價格線" zh_cn="价格线" en_us="Price Line"></span>\n    <span name="chart_str_tri_parallel_line" zh_tw="價格通道線" zh_cn="价格通道线" en_us="Parallel Channel"></span>\n    <span name="chart_str_bi_parallel_line" zh_tw="平行直線" zh_cn="平行直线" en_us="Parallel Lines"></span>\n    <span name="chart_str_bi_parallel_ray" zh_tw="平行射線" zh_cn="平行射线" en_us="Parallel Rays"></span>\n    <span name="chart_str_fib_retrace" zh_tw="斐波納契回調" zh_cn="斐波纳契回调" en_us="Fibonacci Retracements"></span>\n    <span name="chart_str_fib_fans" zh_tw="斐波納契扇形" zh_cn="斐波纳契扇形" en_us="Fibonacci Fans"></span>\n    <span name="chart_str_updated" zh_tw="更新於" zh_cn="更新于" en_us="Updated"></span>\n    <span name="chart_str_ago" zh_tw="前" zh_cn="前" en_us="ago"></span>\n</div>\n'},function(t,e,n){"use strict";e.a=function(){r.initializeApp({databaseURL:"https://kline-1f82d.firebaseio.com"}),r.database().ref("/domains/"+btoa(document.domain)).transaction(function(t){var e=function(){var t=new Date,e=t.getFullYear(),n=""+(t.getMonth()+1),r=""+t.getDate();n.length<2&&(n="0"+n);r.length<2&&(r="0"+r);return[e,n,r].join("")}();return null===t&&(t={domain:document.domain,data:{}}),void 0===t.data[e]?t.data[e]=1:t.data[e]++,t})};var r=n(49);n.n(r)},function(t,e,n){var r=n(50);n(55),n(57),n(60),n(62),t.exports=r},function(t,e,n){n(51),t.exports=n(7).default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){var r=n(54),i=(n.n(r),setTimeout);function o(){}function a(t){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function s(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,a._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void c(e.promise,t)}u(e.promise,r)}else(1===t._state?u:c)(e.promise,t._value)})):t._deferreds.push(e)}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof a)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void h(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,l(t)}catch(e){c(t,e)}}function c(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&a._immediateFn(function(){t._handled||a._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)s(t,t._deferreds[e]);t._deferreds=null}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,u(e,t))},function(t){n||(n=!0,c(e,t))})}catch(t){if(n)return;n=!0,c(e,t)}}a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var n=new this.constructor(o);return s(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},a.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},a.all=function(t){return new a(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){o(t,e)},n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}for(var a=0;a<r.length;a++)o(a,r[a])})},a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(t){return new a(function(e,n){n(t)})},a.race=function(t){return new a(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},a._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){i(t,0)},a._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var d=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();function f(t,e){return t(e={exports:{}},e.exports),e.exports}d.Promise||(d.Promise=a);var p=f(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),_=f(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),g=(_.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),v=function(t){if(!g(t))throw TypeError(t+" is not an object!");return t},m=function(t){try{return!!t()}catch(t){return!0}},y=!m(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),b=p.document,w=g(b)&&g(b.createElement),E=!y&&!m(function(){return 7!=Object.defineProperty(function(t){return w?b.createElement(t):{}}("div"),"a",{get:function(){return 7}}).a}),C=Object.defineProperty,A={f:y?Object.defineProperty:function(t,e,n){if(v(t),e=function(t,e){if(!g(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!g(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),v(n),E)try{return C(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},P=y?function(t,e,n){return A.f(t,e,function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}(1,n))}:function(t,e,n){return t[e]=n,t},T={}.hasOwnProperty,k=function(t,e){return T.call(t,e)},I=0,S=Math.random(),D=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++I+S).toString(36))},O=f(function(t){var e=D("src"),n=Function.toString,r=(""+n).split("toString");_.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,i,o){var a="function"==typeof i;a&&(k(i,"name")||P(i,"name",n)),t[n]!==i&&(a&&(k(i,e)||P(i,e,t[n]?""+t[n]:r.join(String(n)))),t===p?t[n]=i:o?t[n]?t[n]=i:P(t,n,i):(delete t[n],P(t,n,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),R=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},M=function(t,e,n){var r,i,o,a,s=t&M.F,u=t&M.G,c=t&M.S,l=t&M.P,h=t&M.B,d=u?p:c?p[e]||(p[e]={}):(p[e]||{}).prototype,f=u?_:_[e]||(_[e]={}),g=f.prototype||(f.prototype={});for(r in u&&(n=e),n)o=((i=!s&&d&&void 0!==d[r])?d:n)[r],a=h&&i?R(o,p):l&&"function"==typeof o?R(Function.call,o):o,d&&O(d,r,o,t&M.U),f[r]!=o&&P(f,r,a),l&&g[r]!=o&&(g[r]=o)};p.core=_,M.F=1,M.G=2,M.S=4,M.P=8,M.B=16,M.W=32,M.U=64,M.R=128;var x=M,N={}.toString,L=function(t){return N.call(t).slice(8,-1)},U=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==L(t)?t.split(""):Object(t)},j=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},B=Math.ceil,F=Math.floor,W=Math.min,V=function(t){return t>0?W(function(t){return isNaN(t=+t)?0:(t>0?F:B)(t)}(t),9007199254740991):0},G=Array.isArray||function(t){return"Array"==L(t)},K=p["__core-js_shared__"]||(p["__core-js_shared__"]={}),Y=function(t){return K[t]||(K[t]={})},H=f(function(t){var e=Y("wks"),n=p.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:D)("Symbol."+t))}).store=e}),z=H("species"),q=function(t,e){return new(function(t){var e;return G(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!G(e.prototype)||(e=void 0),g(e)&&null===(e=e[z])&&(e=void 0)),void 0===e?Array:e}(t))(e)},X=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,a=6==t,s=5==t||a,u=e||q;return function(e,c,l){for(var h,d,f=function(t){return Object(j(t))}(e),p=U(f),_=R(c,l,3),g=V(p.length),v=0,m=n?u(e,g):r?u(e,0):void 0;g>v;v++)if((s||v in p)&&(d=_(h=p[v],v,f),t))if(n)m[v]=d;else if(d)switch(t){case 3:return!0;case 5:return h;case 6:return v;case 2:m.push(h)}else if(o)return!1;return a?-1:i||o?o:m}},Q=H("unscopables"),Z=Array.prototype;void 0==Z[Q]&&P(Z,Q,{});var J=function(t){Z[Q][t]=!0},$=X(5),tt=!0;"find"in[]&&Array(1).find(function(){tt=!1}),x(x.P+x.F*tt,"Array",{find:function(t){return $(this,t,arguments.length>1?arguments[1]:void 0)}}),J("find");_.Array.find;var et=X(6),nt=!0;"findIndex"in[]&&Array(1).findIndex(function(){nt=!1}),x(x.P+x.F*nt,"Array",{findIndex:function(t){return et(this,t,arguments.length>1?arguments[1]:void 0)}}),J("findIndex");_.Array.findIndex;var rt=H("match"),it=function(t,e,n){if(function(t){var e;return g(t)&&(void 0!==(e=t[rt])?!!e:"RegExp"==L(t))}(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(j(t))},ot=H("match"),at="".startsWith;x(x.P+x.F*function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[ot]=!1,!"/./"[t](e)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(t){var e=it(this,t,"startsWith"),n=V(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return at?at.call(e,r,n):e.slice(n,n+r.length)===r}});_.String.startsWith}.call(e,n(52).setImmediate,n(9))},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(53),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,n(9))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i=1,o={},a=!1,s=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){l(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&l(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){l(t.data)},r=function(e){t.port2.postMessage(e)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var t=s.documentElement;r=function(e){var n=s.createElement("script");n.onreadystatechange=function(){l(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(l,0,t)},u.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var a={callback:t,args:e};return o[i]=a,r(i),i++},u.clearImmediate=c}function c(t){delete o[t]}function l(t){if(a)setTimeout(l,0,t);else{var e=o[t];if(e){a=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{c(t),a=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(9),n(24))},function(t,e){!function(t){"use strict";if(!t.fetch){var e={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(e.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(t){return t&&DataView.prototype.isPrototypeOf(t)},i=ArrayBuffer.isView||function(t){return t&&n.indexOf(Object.prototype.toString.call(t))>-1};l.prototype.append=function(t,e){t=s(t),e=u(e);var n=this.map[t];this.map[t]=n?n+","+e:e},l.prototype.delete=function(t){delete this.map[s(t)]},l.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},l.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},l.prototype.set=function(t,e){this.map[s(t)]=u(e)},l.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},l.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),c(t)},l.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},l.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),c(t)},e.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},_.call(g.prototype),_.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var a=[301,302,303,307,308];m.redirect=function(t,e){if(-1===a.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.Headers=l,t.Request=g,t.Response=m,t.fetch=function(t,n){return new Promise(function(r,i){var o=new g(t,n),a=new XMLHttpRequest;a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:function(t){var e=new l;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;r(new m(e,t))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&e.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e.iterable&&(n[Symbol.iterator]=function(){return n}),n}function l(t){this.map={},t instanceof l?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function f(t){var e=new FileReader,n=d(e);return e.readAsArrayBuffer(t),n}function p(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(e.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(e.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(e.arrayBuffer&&e.blob&&r(t))this._bodyArrayBuffer=p(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!i(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=d(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},e.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(t,e){var n=(e=e||{}).body;if(t instanceof g){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new l(e.headers)),this.method=function(t){var e=t.toUpperCase();return o.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function v(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function m(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new l(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},function(t,e,n){n(56)},function(t,e,n){(function(t){(function(){var t,e=n(7).default,r=r||{},i=this;function o(t){return"string"==typeof t}function a(t){return"boolean"==typeof t}function s(){}function u(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function c(t){return null===t}function l(t){return"array"==u(t)}function h(t){var e=u(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==u(t)}function f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var p="closure_uid_"+(1e9*Math.random()>>>0),_=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:v).apply(null,arguments)}function y(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var b=Date.now||function(){return+new Date};function w(t,e){function n(){}n.prototype=e.prototype,t.lb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ad=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function E(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function C(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function A(t){if(Error.captureStackTrace)Error.captureStackTrace(this,A);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function P(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");A.call(this,n+t[r])}function T(t,e){throw new P("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function k(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function I(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function S(){this.b=this.a=null}w(A,Error),A.prototype.name="CustomError",w(P,A),P.prototype.name="AssertionError",k.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var D=new k(function(){return new R},function(t){t.reset()});function O(){var t=pt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function R(){this.next=this.b=this.a=null}S.prototype.add=function(t,e){var n=D.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},R.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},R.prototype.reset=function(){this.next=this.b=this.a=null};var M=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(o(t))return o(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},x=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=o(t)?t.split(""):t,a=0;a<r;a++)a in i&&e.call(n,i[a],a,t)};var N=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=o(t)?t.split(""):t,a=0;a<n;a++)a in i&&(r[a]=e.call(void 0,i[a],a,t));return r},L=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=o(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function U(t,e){return 0<=M(t,e)}function j(t,e){var n;return(n=0<=(e=M(t,e)))&&Array.prototype.splice.call(t,e,1),n}function B(t,e){!function(t,e){var n=t.length,r=o(t)?t.split(""):t;for(--n;0<=n;--n)n in r&&e.call(void 0,r[n],n,t)}(t,function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0})}function F(t){return Array.prototype.concat.apply([],arguments)}function W(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function V(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}var G=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function K(t){return J.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(H,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(q,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(X,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Q,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(Z,"&#0;")),t):t}var Y,H=/&/g,z=/</g,q=/>/g,X=/"/g,Q=/'/g,Z=/\x00/g,J=/[\x00&<>"']/;function $(t,e){return-1!=t.indexOf(e)}function tt(t,e){return t<e?-1:t>e?1:0}t:{var et=i.navigator;if(et){var nt=et.userAgent;if(nt){Y=nt;break t}}Y=""}function rt(t){return $(Y,t)}function it(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ot(t){for(var e in t)return!1;return!0}function at(t){var e,n={};for(e in t)n[e]=t[e];return n}var st,ut,ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ct.length;o++)n=ct[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ht(t){i.setTimeout(function(){throw t},0)}function dt(t,e){ut||function(){if(i.Promise&&i.Promise.resolve){var t=i.Promise.resolve(void 0);ut=function(){t.then(_t)}}else ut=function(){var t=_t;!d(i.setImmediate)||i.Window&&i.Window.prototype&&!rt("Edge")&&i.Window.prototype.setImmediate==i.setImmediate?(st||(st=function(){var t=i.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!rt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=m(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!rt("Trident")&&!rt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).rb;n.rb=null,t()}},function(t){r.next={rb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){i.setTimeout(t,0)}}()),st(t)):i.setImmediate(t)}}(),ft||(ut(),ft=!0),pt.add(t,e)}var ft=!1,pt=new S;function _t(){for(var t;t=O();){try{t.a.call(t.b)}catch(t){ht(t)}I(D,t)}ft=!1}function gt(t,e){if(this.a=vt,this.j=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){It(n,mt,t)},function(t){if(!(t instanceof Nt))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}It(n,yt,t)})}catch(t){It(this,yt,t)}}var vt=0,mt=2,yt=3;function bt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}bt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var wt=new k(function(){return new bt},function(t){t.reset()});function Et(t,e,n){var r=wt.get();return r.g=t,r.b=e,r.f=n,r}function Ct(t){if(t instanceof gt)return t;var e=new gt(s);return It(e,mt,t),e}function At(t){return new gt(function(e,n){n(t)})}function Pt(t,e,n){St(t,e,n,null)||dt(y(e,t))}function Tt(t,e){t.b||t.a!=mt&&t.a!=yt||Dt(t),t.f?t.f.next=e:t.b=e,t.f=e}function kt(t,e,n,r){var i=Et(null,null,null);return i.a=new gt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Nt?o(e):t(i)}catch(t){o(t)}}:o}),i.a.c=t,Tt(t,i),i.a}function It(t,e,n){t.a==vt&&(t===n&&(e=yt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,St(n,t.Kc,t.Lc,t)||(t.j=n,t.a=e,t.c=null,Dt(t),e!=yt||n instanceof Nt||function(t,e){t.g=!0,dt(function(){t.g&&xt.call(null,e)})}(t,n)))}function St(t,e,n,r){if(t instanceof gt)return Tt(t,Et(e||s,n||null,r)),!0;if(C(t))return t.then(e,n,r),!0;if(f(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Dt(t){t.h||(t.h=!0,dt(t.Ub,t))}function Ot(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Rt(t,e,n,r){if(n==yt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Mt(e,n,r);else try{e.c?e.g.call(e.f):Mt(e,n,r)}catch(t){xt.call(null,t)}I(wt,e)}function Mt(t,e,n){e==mt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}gt.prototype.then=function(t,e,n){return kt(this,d(t)?t:null,d(e)?e:null,n)},E(gt),(t=gt.prototype).ha=function(t,e){return(t=Et(t,t,e)).c=!0,Tt(this,t),this},t.m=function(t,e){return kt(this,null,t,e)},t.cancel=function(t){this.a==vt&&dt(function(){!function t(e,n){if(e.a==vt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==vt&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Ot(r),Rt(r,o,yt,n)))}e.c=null}else It(e,yt,n)}(this,new Nt(t))},this)},t.Kc=function(t){this.a=vt,It(this,mt,t)},t.Lc=function(t){this.a=vt,It(this,yt,t)},t.Ub=function(){for(var t;t=Ot(this);)Rt(this,t,this.a,this.j);this.h=!1};var xt=ht;function Nt(t){A.call(this,t)}function Lt(){0!=Ut&&(jt[this[p]||(this[p]=++_)]=this),this.pa=this.pa,this.oa=this.oa}w(Nt,A),Nt.prototype.name="cancel";var Ut=0,jt={};function Bt(t){if(!t.pa&&(t.pa=!0,t.ua(),0!=Ut)){var e=t[p]||(t[p]=++_);if(0!=Ut&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete jt[e]}}function Ft(t){return Ft[" "](t),t}Lt.prototype.pa=!1,Lt.prototype.ua=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()},Ft[" "]=s;var Wt,Vt=rt("Opera"),Gt=rt("Trident")||rt("MSIE"),Kt=rt("Edge"),Yt=Kt||Gt,Ht=rt("Gecko")&&!($(Y.toLowerCase(),"webkit")&&!rt("Edge"))&&!(rt("Trident")||rt("MSIE"))&&!rt("Edge"),zt=$(Y.toLowerCase(),"webkit")&&!rt("Edge");function qt(){var t=i.document;return t?t.documentMode:void 0}t:{var Xt="",Qt=function(){var t=Y;return Ht?/rv:([^\);]+)(\)|;)/.exec(t):Kt?/Edge\/([\d\.]+)/.exec(t):Gt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):zt?/WebKit\/(\S+)/.exec(t):Vt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Qt&&(Xt=Qt?Qt[1]:""),Gt){var Zt=qt();if(null!=Zt&&Zt>parseFloat(Xt)){Wt=String(Zt);break t}}Wt=Xt}var Jt,$t={};function te(t){return function(t,e){var n=$t;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(){for(var e=0,n=G(String(Wt)).split("."),r=G(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=tt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||tt(0==a[2].length,0==s[2].length)||tt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var ee=i.document;Jt=ee&&Gt?qt()||("CSS1Compat"==ee.compatMode?parseInt(Wt,10):5):void 0;var ne=Object.freeze||function(t){return t},re=!Gt||9<=Number(Jt),ie=Gt&&!te("9"),oe=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return i.addEventListener("test",s,e),i.removeEventListener("test",s,e),t}();function ae(t,e){this.type=t,this.b=this.target=e,this.Eb=!0}function se(t,e){if(ae.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Ht){t:{try{Ft(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=o(t.pointerType)?t.pointerType:ue[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}ae.prototype.preventDefault=function(){this.Eb=!1},w(se,ae);var ue=ne({2:"touch",3:"pen",4:"mouse"});se.prototype.preventDefault=function(){se.lb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ie)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},se.prototype.f=function(){return this.a};var ce="closure_listenable_"+(1e6*Math.random()|0),le=0;function he(t){t.ma=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function de(t){this.src=t,this.a={},this.b=0}function fe(t,e){var n=e.type;n in t.a&&j(t.a[n],e)&&(he(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function pe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ma&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}de.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=pe(t,e,r,i);return-1<a?(e=t[a],n||(e.Ha=!1)):((e=new function(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++le,this.ma=this.Ha=!1}(e,this.src,o,!!r,i)).Ha=n,t.push(e)),e};var _e="closure_lm_"+(1e6*Math.random()|0),ge={};function ve(t,e,n,r,i){if(r&&r.once)ye(t,e,n,r,i);else if(l(e))for(var o=0;o<e.length;o++)ve(t,e[o],n,r,i);else n=Ie(n),t&&t[ce]?De(t,e,n,f(r)?!!r.capture:!!r,i):me(t,e,n,!1,r,i)}function me(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=f(i)?!!i.capture:!!i,s=Te(t);if(s||(t[_e]=s=new de(t)),!(n=s.add(e,n,r,a,o)).proxy){if(r=function(){var t=Pe,e=re?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)oe||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ee(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function ye(t,e,n,r,i){if(l(e))for(var o=0;o<e.length;o++)ye(t,e[o],n,r,i);else n=Ie(n),t&&t[ce]?Oe(t,e,n,f(r)?!!r.capture:!!r,i):me(t,e,n,!0,r,i)}function be(t,e,n,r,i){if(l(e))for(var o=0;o<e.length;o++)be(t,e[o],n,r,i);else r=f(r)?!!r.capture:!!r,n=Ie(n),t&&t[ce]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=pe(o=t.a[e],n,r,i))&&(he(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Te(t))&&(e=t.a[e.toString()],t=-1,e&&(t=pe(e,n,r,i)),(n=-1<t?e[t]:null)&&we(n))}function we(t){if("number"!=typeof t&&t&&!t.ma){var e=t.src;if(e&&e[ce])fe(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ee(n),r):e.addListener&&e.removeListener&&e.removeListener(r),0,(n=Te(e))?(fe(n,t),0==n.b&&(n.src=null,e[_e]=null)):he(t)}}}function Ee(t){return t in ge?ge[t]:ge[t]="on"+t}function Ce(t,e,n,r){var i=!0;if((t=Te(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ma&&(o=Ae(o,r),i=i&&!1!==o)}return i}function Ae(t,e){var n=t.listener,r=t.La||t.src;return t.Ha&&we(t),n.call(r,e)}function Pe(t,e){if(t.ma)return!0;if(!re){if(!e)t:{e=["window","event"];for(var n=i,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new se(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var o=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){o=!0}(o||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],o=e.b;o;o=o.parentNode)r.push(o);for(t=t.type,o=r.length-1;0<=o;o--){e.b=r[o];var a=Ce(r[o],t,!0,e);n=n&&a}for(o=0;o<r.length;o++)e.b=r[o],a=Ce(r[o],t,!1,e),n=n&&a}return n}return Ae(t,new se(e,this))}function Te(t){return(t=t[_e])instanceof de?t:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ie(t){return d(t)?t:(t[ke]||(t[ke]=function(e){return t.handleEvent(e)}),t[ke])}function Se(){Lt.call(this),this.u=new de(this),this.Mb=this,this.Ta=null}function De(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function Oe(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function Re(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ma&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ha&&fe(t.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Eb}function Me(t,e,n){if(d(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:i.setTimeout(t,e||0)}function xe(t){var e=null;return new gt(function(n,r){-1==(e=Me(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).m(function(t){throw i.clearTimeout(e),t})}function Ne(t){if(t.S&&"function"==typeof t.S)return t.S();if(o(t))return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Le(t){if(t.U&&"function"==typeof t.U)return t.U();if(!t.S||"function"!=typeof t.S){if(h(t)||o(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Ue(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ue)for(n=t.U(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function je(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Be(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Be(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Be(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(Se,Lt),Se.prototype[ce]=!0,Se.prototype.addEventListener=function(t,e,n,r){ve(this,t,e,n,r)},Se.prototype.removeEventListener=function(t,e,n,r){be(this,t,e,n,r)},Se.prototype.dispatchEvent=function(t){var e,n=this.Ta;if(n)for(e=[];n;n=n.Ta)e.push(n);n=this.Mb;var r=t.type||t;if(o(t))t=new ae(t,n);else if(t instanceof ae)t.target=t.target||n;else{var i=t;lt(t=new ae(r,n),i)}if(i=!0,e)for(var a=e.length-1;0<=a;a--){var s=t.b=e[a];i=Re(s,r,!0,t)&&i}if(i=Re(s=t.b=n,r,!0,t)&&i,i=Re(s,r,!1,t)&&i,e)for(a=0;a<e.length;a++)i=Re(s=t.b=e[a],r,!1,t)&&i;return i},Se.prototype.ua=function(){if(Se.lb.ua.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)0,he(n[r]);delete e.a[t],e.b--}}this.Ta=null},(t=Ue.prototype).S=function(){je(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.U=function(){return je(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Be(this.b,t)?this.b[t]:e},t.set=function(t,e){Be(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Fe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function We(t,e){if(this.b=this.l=this.c="",this.j=null,this.h=this.g="",this.f=!1,t instanceof We){this.f=void 0!==e?e:t.f,Ve(this,t.c),this.l=t.l,this.b=t.b,Ge(this,t.j),this.g=t.g,e=t.a;var n=new rn;n.c=e.c,e.a&&(n.a=new Ue(e.a),n.b=e.b),Ke(this,n),this.h=t.h}else t&&(n=String(t).match(Fe))?(this.f=!!e,Ve(this,n[1]||"",!0),this.l=Xe(n[2]||""),this.b=Xe(n[3]||"",!0),Ge(this,n[4]),this.g=Xe(n[5]||"",!0),Ke(this,n[6]||"",!0),this.h=Xe(n[7]||"")):(this.f=!!e,this.a=new rn(null,this.f))}function Ve(t,e,n){t.c=n?Xe(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Ge(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.j=e}else t.j=null}function Ke(t,e,n){e instanceof rn?(t.a=e,function(t,e){e&&!t.f&&(on(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(sn(this,e),cn(this,n,t))},t)),t.f=e}(t.a,t.f)):(n||(e=Qe(e,en)),t.a=new rn(e,t.f))}function Ye(t,e,n){t.a.set(e,n)}function He(t,e){return t.a.get(e)}function ze(t){return t instanceof We?new We(t):new We(t,void 0)}function qe(t,e){var n=new We(null,void 0);return Ve(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function Xe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qe(t,e,n){return o(t)?(t=encodeURI(t).replace(e,Ze),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ze(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}We.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Qe(e,Je,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Qe(e,Je,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.j)&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Qe(n,"/"==n.charAt(0)?tn:$e,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Qe(n,nn)),t.join("")};var Je=/[#\/\?@]/g,$e=/[#\?:]/g,tn=/[#\?]/g,en=/[#\?@]/g,nn=/#/g;function rn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function on(t){t.a||(t.a=new Ue,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function an(t){var e=Le(t);if(void 0===e)throw Error("Keys are undefined");var n=new rn(null,void 0);t=Ne(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];l(o)?cn(n,i,o):n.add(i,o)}return n}function sn(t,e){on(t),e=ln(t,e),Be(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Be((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&je(t)))}function un(t,e){return on(t),e=ln(t,e),Be(t.a.b,e)}function cn(t,e,n){sn(t,e),0<n.length&&(t.c=null,t.a.set(ln(t,e),W(n)),t.b+=n.length)}function ln(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=rn.prototype).add=function(t,e){on(this),this.c=null,t=ln(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){on(this),this.a.forEach(function(n,r){x(n,function(n){t.call(e,n,r,this)},this)},this)},t.U=function(){on(this);for(var t=this.a.S(),e=this.a.U(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.S=function(t){on(this);var e=[];if(o(t))un(this,t)&&(e=F(e,this.a.get(ln(this,t))));else{t=this.a.S();for(var n=0;n<t.length;n++)e=F(e,t[n])}return e},t.set=function(t,e){return on(this),this.c=null,un(this,t=ln(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return 0<(t=t?this.S(t):[]).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.U(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var hn=!Gt||9<=Number(Jt);function dn(){this.a="",this.b=pn}function fn(t){return t instanceof dn&&t.constructor===dn&&t.b===pn?t.a:(T("expected object of type Const, got '"+t+"'"),"type_error:Const")}dn.prototype.la=!0,dn.prototype.ja=function(){return this.a},dn.prototype.toString=function(){return"Const{"+this.a+"}"};var pn={};function _n(t){var e=new dn;return e.a=t,e}function gn(){this.a="",this.b=wn}function vn(t){return t instanceof gn&&t.constructor===gn&&t.b===wn?t.a:(T("expected object of type TrustedResourceUrl, got '"+t+"' of type "+u(t)),"type_error:TrustedResourceUrl")}function mn(t,e){var n=fn(t);if(!bn.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=new gn;return e.a=t,e}(t=n.replace(yn,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof dn?fn(t):encodeURIComponent(String(t))}))}_n(""),gn.prototype.la=!0,gn.prototype.ja=function(){return this.a},gn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var yn=/%{(\w+)}/g,bn=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,wn={};function En(){this.a="",this.b=Tn}function Cn(t){return t instanceof En&&t.constructor===En&&t.b===Tn?t.a:(T("expected object of type SafeUrl, got '"+t+"' of type "+u(t)),"type_error:SafeUrl")}En.prototype.la=!0,En.prototype.ja=function(){return this.a},En.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var An=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Pn(t){return t instanceof En?t:(t=t.la?t.ja():String(t),An.test(t)||(t="about:invalid#zClosurez"),kn(t))}var Tn={};function kn(t){var e=new En;return e.a=t,e}function In(){this.a="",this.b=Sn}kn("about:blank"),In.prototype.la=!0,In.prototype.ja=function(){return this.a},In.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Sn={};function Dn(t){var e=new In;return e.a=t,e}function On(t){var e=document;return o(t)?e.getElementById(t):t}function Rn(t,e){it(e,function(e,n){e&&e.la&&(e=e.ja()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Mn.hasOwnProperty(n)?t.setAttribute(Mn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}Dn("<!DOCTYPE html>"),Dn(""),Dn("<br>");var Mn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function xn(t,e,n){var r=arguments,i=document,a=String(r[0]),s=r[1];if(!hn&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',K(s.name),'"'),s.type){a.push(' type="',K(s.type),'"');var u={};lt(u,s),delete u.type,s=u}a.push(">"),a=a.join("")}return a=i.createElement(a),s&&(o(s)?a.className=s:l(s)?a.className=s.join(" "):Rn(a,s)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild(o(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var a=n[i];!h(a)||f(a)&&0<a.nodeType?r(a):x(Nn(a)?W(a):a,r)}}(i,a,r),a}function Nn(t){if(t&&"number"==typeof t.length){if(f(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}return!1}function Ln(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(l(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(a=n[i])&&(r.push(o),Bn(i,r),r.push(":"),t(e,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Bn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new function(){},t,e),e.join("")}var Un={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},jn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Bn(t,e){e.push('"',t.replace(jn,function(t){var e=Un[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Un[t]=e),e}),'"')}function Fn(){var t=ir();return Gt&&!!Jt&&11==Jt||/Edge\/\d+/.test(t)}function Wn(){return i.window&&i.window.location.href||self&&self.location&&self.location.href||""}function Vn(t,e){e=e||i.window;var n="about:blank";t&&(n=Cn(Pn(t))),e.location.href=n}function Gn(t){return!!((t=(t||ir()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Kn(t){t=t||i.window;try{t.close()}catch(t){}}function Yn(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ir().toLowerCase(),r&&(e.target=r,$(n,"crios/")&&(e.target="_blank")),er(ir())==$n&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof En?n:Pn(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((rt("iPhone")&&!rt("iPod")&&!rt("iPad")||rt("iPad")||rt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=r.document.createElement("A"),e instanceof En||e instanceof En||(e=e.la?e.ja():String(e),An.test(e)||(e="about:invalid#zClosurez"),e=kn(e)),a.href=Cn(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=Cn(e),a&&(Yt&&$(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,_n("b/12014412, meta tag with sanitized URL"),t=Dn(t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+K(t)+'">'),a.document.write(function(t){return t instanceof In&&t.constructor===In&&t.b===Sn?t.a:(T("expected object of type SafeHtml, got '"+t+"' of type "+u(t)),"type_error:SafeHtml")}(t)),a.document.close())):(a=r.open(Cn(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var Hn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;function zn(){var t=null;return new gt(function(e){"complete"==i.document.readyState?e():(t=function(){e()},ye(window,"load",t))}).m(function(e){throw be(window,"load",t),e})}function qn(t){return t=t||ir(),!("file:"!==cr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xn(){var t=i.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Qn(){return"object"!=typeof i.window&&"function"==typeof i.importScripts}function Zn(){return e.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.INTERNAL.hasOwnProperty("node")?"Node":Qn()?"Worker":"Browser"}function Jn(){var t=Zn();return"ReactNative"===t||"Node"===t}var $n="Firefox",tr="Chrome";function er(t){var e=t.toLowerCase();return $(e,"opera/")||$(e,"opr/")||$(e,"opios/")?"Opera":$(e,"iemobile")?"IEMobile":$(e,"msie")||$(e,"trident/")?"IE":$(e,"edge/")?"Edge":$(e,"firefox/")?$n:$(e,"silk/")?"Silk":$(e,"blackberry")?"Blackberry":$(e,"webos")?"Webos":!$(e,"safari/")||$(e,"chrome/")||$(e,"crios/")||$(e,"android")?!$(e,"chrome/")&&!$(e,"crios/")||$(e,"edge/")?$(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":tr:"Safari"}var nr={Qc:"FirebaseCore-web",Sc:"FirebaseUI-web"};function rr(t,e){e=e||[];var n,r=[],i={};for(n in nr)i[nr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Zn())?r=er(i=ir()):"Worker"===r&&(r=er(i=ir())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function ir(){return i.navigator&&i.navigator.userAgent||""}function or(t,e){t=t.split("."),e=e||i;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function ar(){try{var t=i.localStorage,e=pr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Fn()||!!i.indexedDB}catch(t){return Qn()&&!!i.indexedDB}return!1}function sr(){return(ur()||"chrome-extension:"===cr()||qn())&&!Jn()&&ar()&&!Qn()}function ur(){return"http:"===cr()||"https:"===cr()}function cr(){return i.location&&i.location.protocol||null}function lr(t){return!Gn(t=t||ir())&&er(t)!=$n}function hr(t){return void 0===t?null:Ln(t)}function dr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function fr(t){if(null!==t)return JSON.parse(t)}function pr(t){return t||Math.floor(1e9*Math.random()).toString()}function _r(t){return"Safari"!=er(t=t||ir())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function gr(){var t=i.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function vr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=ir(),e=Zn(),this.b=Gn(t)||"ReactNative"===e}function mr(){var t=i.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function yr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function br(){return!(!or("fireauth.oauthhelper",i)&&!or("fireauth.iframe",i))}vr.prototype.get=function(){var t=i.navigator;return!t||"boolean"!=typeof t.onLine||!ur()&&"chrome-extension:"!==cr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var wr,Er={};try{var Cr={};Object.defineProperty(Cr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Cr,"abcd",{configurable:!0,enumerable:!0,value:2}),wr=2==Cr.abcd}catch(t){wr=!1}function Ar(t,e,n){wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Pr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Ar(t,n,e[n])}function Tr(t){var e={};return Pr(e,t),e}function kr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Ar(e,n,kr(t[n]));return e}var Ir="EMAIL_SIGNIN",Sr="email",Dr="newEmail",Or="requestType",Rr="email",Mr="fromEmail",xr="data",Nr="operation";function Lr(t,e){this.code=jr+t,this.message=e||Br[t]||""}function Ur(t){var e=t&&t.code;return e?new Lr(e.substring(jr.length),t.message):null}w(Lr,Error),Lr.prototype.C=function(){return{code:this.code,message:this.message}},Lr.prototype.toJSON=function(){return this.C()};var jr="auth/",Br={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Fr(t){var e=t[Kr];if(void 0===e)throw new Lr("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Lr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Wr];if(n&&"object"==typeof n){e=n[zr];var r=n[Yr];if(n=n[Hr],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Lr("argument-error",Yr+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Lr("argument-error",Hr+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Lr("argument-error",zr+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Lr("missing-android-pkg-name")}}else if(void 0!==n)throw new Lr("argument-error",Wr+" property must be a non null object when specified.");if(this.f=null,(e=t[Gr])&&"object"==typeof e){if("string"==typeof(e=e[qr])&&e.length)this.f=e;else if(void 0!==e)throw new Lr("argument-error",qr+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Lr("argument-error",Gr+" property must be a non null object when specified.");if(void 0!==(t=t[Vr])&&"boolean"!=typeof t)throw new Lr("argument-error",Vr+" property must be a boolean when specified.");this.c=!!t}var Wr="android",Vr="handleCodeInApp",Gr="iOS",Kr="url",Yr="installApp",Hr="minimumVersion",zr="packageName",qr="bundleId";function Xr(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e)null===e[n]&&delete e[n];return e}var Qr=null,Zr=null;function Jr(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Zr[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Qr){Qr={},Zr={};for(var t=0;65>t;t++)Qr[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),Zr[Qr[t]]=t,62<=t&&(Zr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}function $r(t){this.c=t.sub,b(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function ti(t){return(t=ei(t))&&t.sub&&t.iss&&t.aud&&t.exp?new $r(t):null}function ei(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Jr(t))}catch(t){}return null}$r.prototype.f=function(){return this.b};var ni="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),ri=["client_id","response_type","scope","redirect_uri","state"],ii={Rc:{Ma:"locale",Aa:500,za:600,Na:"facebook.com",cb:ri},Tc:{Ma:null,Aa:500,za:620,Na:"github.com",cb:ri},Uc:{Ma:"hl",Aa:515,za:680,Na:"google.com",cb:ri},$c:{Ma:"lang",Aa:485,za:705,Na:"twitter.com",cb:ni}};function oi(t){for(var e in ii)if(ii[e].Na==t)return ii[e];return null}function ai(t){var e={};e["facebook.com"]=hi,e["google.com"]=fi,e["github.com"]=di,e["twitter.com"]=pi;var n=t&&t[ui];try{if(n)return e[n]?new e[n](t):new li(t);if(void 0!==t[si])return new ci(t)}catch(t){}return null}var si="idToken",ui="providerId";function ci(t){var e=t[ui];if(!e&&t[si]){var n=ti(t[si]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Ar(this,"providerId",e),Ar(this,"isNewUser",n)}function li(t){ci.call(this,t),Ar(this,"profile",kr((t=fr(t.rawUserInfo||"{}"))||{}))}function hi(t){if(li.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function di(t){if(li.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ar(this,"username",this.profile&&this.profile.login||null)}function fi(t){if(li.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function pi(t){if(li.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ar(this,"username",t.screenName||null)}function _i(t){var e=ze(t),n=He(e,"link"),r=He(ze(n),"link");return He(ze(e=He(e,"deep_link_id")),"link")||e||r||n||t}function gi(t,e){return t.then(function(t){if(t[Qo]){var n=ti(t[Qo]);if(!n||e!=n.c)throw new Lr("user-mismatch");return t}throw new Lr("user-mismatch")}).m(function(t){throw t&&t.code&&t.code==jr+"user-not-found"?new Lr("user-mismatch"):t})}function vi(t,e,n){if(e.idToken||e.accessToken)e.idToken&&Ar(this,"idToken",e.idToken),e.accessToken&&Ar(this,"accessToken",e.accessToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Lr("internal-error","failed to construct a credential");Ar(this,"accessToken",e.oauthToken),Ar(this,"secret",e.oauthTokenSecret)}Ar(this,"providerId",t),Ar(this,"signInMethod",n)}function mi(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,{postBody:an(e).toString(),requestUri:"http://localhost"}}function yi(t,e){this.Ac=e||[],Pr(this,{providerId:t,isOAuthProvider:!0}),this.tb={},this.Za=(oi(t)||{}).Ma||null,this.Xa=null}function bi(t){yi.call(this,t,ri),this.a=[]}function wi(){bi.call(this,"facebook.com")}function Ei(t){if(!t)throw new Lr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return f(t)&&(e=t.accessToken),(new wi).credential(null,e)}function Ci(){bi.call(this,"github.com")}function Ai(t){if(!t)throw new Lr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return f(t)&&(e=t.accessToken),(new Ci).credential(null,e)}function Pi(){bi.call(this,"google.com"),this.ta("profile")}function Ti(t,e){var n=t;return f(t)&&(n=t.idToken,e=t.accessToken),(new Pi).credential(n,e)}function ki(){yi.call(this,"twitter.com",ni)}function Ii(t,e){var n=t;if(f(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Lr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new vi("twitter.com",n,"twitter.com")}function Si(t,e,n){this.a=t,this.b=e,Ar(this,"providerId","password"),Ar(this,"signInMethod",n===Di.EMAIL_LINK_SIGN_IN_METHOD?Di.EMAIL_LINK_SIGN_IN_METHOD:Di.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Di(){Pr(this,{providerId:"password",isOAuthProvider:!1})}function Oi(t,e){if(!(e=Ri(e)))throw new Lr("argument-error","Invalid email link!");return new Si(t,e,Di.EMAIL_LINK_SIGN_IN_METHOD)}function Ri(t){var e=He((t=new function(t){this.a=ze(t)}(t=_i(t))).a,"oobCode")||null;return"signIn"===(He(t.a,"mode")||null)&&e?e:null}function Mi(t){if(!(t.Ra&&t.Qa||t.Ea&&t.Z))throw new Lr("internal-error");this.a=t,Ar(this,"providerId","phone"),Ar(this,"signInMethod","phone")}function xi(t){return t.a.Ea&&t.a.Z?{temporaryProof:t.a.Ea,phoneNumber:t.a.Z}:{sessionInfo:t.a.Ra,code:t.a.Qa}}function Ni(t){try{this.a=t||e.auth()}catch(t){throw new Lr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Pr(this,{providerId:"phone",isOAuthProvider:!1})}function Li(t,e){if(!t)throw new Lr("missing-verification-id");if(!e)throw new Lr("missing-verification-code");return new Mi({Ra:t,Qa:e})}function Ui(t){if(t.temporaryProof&&t.phoneNumber)return new Mi({Ea:t.temporaryProof,Z:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret;t=t&&t.oauthIdToken;try{switch(e){case"google.com":return Ti(t,n);case"facebook.com":return Ei(n);case"github.com":return Ai(n);case"twitter.com":return Ii(n,r);default:return new bi(e).credential(t,n)}}catch(t){return null}}function ji(t){if(!t.isOAuthProvider)throw new Lr("invalid-oauth-provider")}function Bi(t,e,n,r,i){if(this.b=t,this.c=e||null,this.f=n||null,this.g=r||null,this.a=i||null,!this.f&&!this.a)throw new Lr("invalid-auth-event");if(this.f&&this.a)throw new Lr("invalid-auth-event");if(this.f&&!this.g)throw new Lr("invalid-auth-event")}function Fi(t){return(t=t||{}).type?new Bi(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Ur(t.error)):null}function Wi(){this.b=null,this.a=[]}w(li,ci),w(hi,li),w(di,li),w(fi,li),w(pi,li),vi.prototype.xa=function(t){return fa(t,mi(this))},vi.prototype.c=function(t,e){var n=mi(this);return n.idToken=e,pa(t,n)},vi.prototype.f=function(t,e){return gi(_a(t,mi(this)),e)},vi.prototype.C=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),t},yi.prototype.Ca=function(t){return this.tb=at(t),this},w(bi,yi),bi.prototype.ta=function(t){return U(this.a,t)||this.a.push(t),this},bi.prototype.yb=function(){return W(this.a)},bi.prototype.credential=function(t,e){if(!t&&!e)throw new Lr("argument-error","credential failed: must provide the ID token and/or the access token.");return new vi(this.providerId,{idToken:t||null,accessToken:e||null},this.providerId)},w(wi,bi),Ar(wi,"PROVIDER_ID","facebook.com"),Ar(wi,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(Ci,bi),Ar(Ci,"PROVIDER_ID","github.com"),Ar(Ci,"GITHUB_SIGN_IN_METHOD","github.com"),w(Pi,bi),Ar(Pi,"PROVIDER_ID","google.com"),Ar(Pi,"GOOGLE_SIGN_IN_METHOD","google.com"),w(ki,yi),Ar(ki,"PROVIDER_ID","twitter.com"),Ar(ki,"TWITTER_SIGN_IN_METHOD","twitter.com"),Si.prototype.xa=function(t){return this.signInMethod==Di.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,Ca,{email:this.a,oobCode:this.b}):Ka(t,Fa,{email:this.a,password:this.b})},Si.prototype.c=function(t,e){return this.signInMethod==Di.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,Aa,{idToken:e,email:this.a,oobCode:this.b}):Ka(t,xa,{idToken:e,email:this.a,password:this.b})},Si.prototype.f=function(t,e){return gi(this.xa(t),e)},Si.prototype.C=function(){return{email:this.a,password:this.b,signInMethod:this.signInMethod}},Pr(Di,{PROVIDER_ID:"password"}),Pr(Di,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Pr(Di,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Mi.prototype.xa=function(t){return t.Sa(xi(this))},Mi.prototype.c=function(t,e){var n=xi(this);return n.idToken=e,Ka(t,Va,n)},Mi.prototype.f=function(t,e){var n=xi(this);return n.operation="REAUTH",gi(t=Ka(t,Ga,n),e)},Mi.prototype.C=function(){var t={providerId:"phone"};return this.a.Ra&&(t.verificationId=this.a.Ra),this.a.Qa&&(t.verificationCode=this.a.Qa),this.a.Ea&&(t.temporaryProof=this.a.Ea),this.a.Z&&(t.phoneNumber=this.a.Z),t},Ni.prototype.Sa=function(t,e){var n=this.a.b;return Ct(e.verify()).then(function(r){if(!o(r))throw new Lr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return Ka(t,Ra,e)}(n,{phoneNumber:t,recaptchaToken:r}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new Lr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Pr(Ni,{PROVIDER_ID:"phone"}),Pr(Ni,{PHONE_SIGN_IN_METHOD:"phone"}),Bi.prototype.C=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.C()}};var Vi=null;function Gi(t){var e="unauthorized-domain",n=void 0,r=ze(t);t=r.b,"chrome-extension"==(r=r.c)?n=V("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=V("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Lr.call(this,e,n)}function Ki(t,e,n){Lr.call(this,t,n),(t=e||{}).ub&&Ar(this,"email",t.ub),t.Z&&Ar(this,"phoneNumber",t.Z),t.credential&&Ar(this,"credential",t.credential)}function Yi(t){if(t.code){var e=t.code||"";0==e.indexOf(jr)&&(e=e.substring(jr.length));var n={credential:Ui(t)};if(t.email)n.ub=t.email;else{if(!t.phoneNumber)return new Lr(e,t.message||void 0);n.Z=t.phoneNumber}return new Ki(e,n,t.message)}return null}Wi.prototype.subscribe=function(t){var e=this;this.a.push(t),this.b||(this.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=or("universalLinks.subscribe",i))&&t(null,this.b))},Wi.prototype.unsubscribe=function(t){B(this.a,function(e){return e==t})},w(Gi,Lr),w(Ki,Lr),Ki.prototype.C=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.C();return e&&lt(t,e),t},Ki.prototype.toJSON=function(){return this.C()};var Hi,zi=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function qi(){}function Xi(t){return t.c||(t.c=t.b())}function Qi(){}function Zi(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Ji(){}function $i(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText="",this.a.onload=m(this.bc,this),this.a.onerror=m(this.zb,this),this.a.onprogress=m(this.cc,this),this.a.ontimeout=m(this.fc,this)}function to(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function eo(t,e,n){this.reset(t,e,n,void 0,void 0)}qi.prototype.c=null,w(Qi,qi),Qi.prototype.a=function(){var t=Zi(this);return t?new ActiveXObject(t):new XMLHttpRequest},Qi.prototype.b=function(){var t={};return Zi(this)&&(t[0]=!0,t[1]=!0),t},Hi=new Qi,w(Ji,qi),Ji.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new $i;throw Error("Unsupported browser")},Ji.prototype.b=function(){return{}},(t=$i.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.bc=function(){this.status=200,this.responseText=this.a.responseText,to(this,4)},t.zb=function(){this.status=500,this.responseText="",to(this,4)},t.fc=function(){this.zb()},t.cc=function(){this.status=200,to(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},eo.prototype.a=null;function no(t){this.f=t,this.b=this.c=this.a=null}function ro(t,e){this.name=t,this.value=e}eo.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||b(),delete this.a},ro.prototype.toString=function(){return this.name};var io=new ro("SEVERE",1e3),oo=new ro("WARNING",900),ao=new ro("CONFIG",700),so=new ro("FINE",500);no.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(T("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new eo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var uo={},co=null;function lo(t){var e;if(co||(co=new no(""),uo[""]=co,co.c=ao),!(e=uo[t])){e=new no(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=lo(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,uo[t]=e}return e}function ho(t,e){t&&t.log(so,e,void 0)}function fo(t){this.f=t}function po(t){Se.call(this),this.j=t,this.readyState=_o,this.status=0,this.responseText=this.statusText="",this.onreadystatechange=null,this.g=new Headers,this.b=null,this.h="GET",this.c="",this.a=!1,this.f=lo("goog.net.FetchXmlHttp")}w(fo,qi),fo.prototype.a=function(){return new po(this.f)},fo.prototype.b=function(t){return function(){return t}}({}),w(po,Se);var _o=0;function go(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function vo(t){Se.call(this),this.headers=new Ue,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.j=this.G=!1,this.g=0,this.s=null,this.o=mo,this.v=this.O=!1}(t=po.prototype).open=function(t,e){if(this.readyState!=_o)throw this.abort(),Error("Error reopening a connection");this.h=t,this.c=e,this.readyState=1,go(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.g,method:this.h,credentials:void 0,cache:void 0};t&&(e.body=t),this.j.fetch(new Request(this.c,e)).then(this.ec.bind(this),this.Ab.bind(this))},t.abort=function(){this.responseText="",this.g=new Headers,this.status=0,1<=this.readyState&&this.a&&4!=this.readyState&&(this.readyState=4,this.a=!1,go(this)),this.readyState=_o},t.ec=function(t){this.a&&(this.b||(this.b=t.headers,this.readyState=2,go(this)),this.a&&(this.readyState=3,go(this),this.a&&t.text().then(this.dc.bind(this,t),this.Ab.bind(this))))},t.dc=function(t,e){this.a&&(this.status=t.status,this.statusText=t.statusText,this.responseText=e,this.readyState=4,go(this))},t.Ab=function(t){var e=this.f;e&&e.log(oo,"Failed to fetch url "+this.c,t instanceof Error?t:Error(t)),this.a&&(this.readyState=4,go(this))},t.setRequestHeader=function(t,e){this.g.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.f)&&t.log(oo,"Attempting to get response header but no headers have been received for url: "+this.c,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.f;return t&&t.log(oo,"Attempting to get all response headers but no headers have been received for url: "+this.c,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},w(vo,Se);var mo="";vo.prototype.b=lo("goog.net.XhrIo");var yo=/^https?$/i,bo=["POST","PUT"];function wo(t,e,n,r,a){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.N=n,t.G=!1,t.c=!0,t.a=t.D?t.D.a():Hi.a(),t.B=t.D?Xi(t.D):Xi(Hi),t.a.onreadystatechange=m(t.Db,t);try{ho(t.b,Do(t,"Opening Xhr")),t.I=!0,t.a.open(n,String(e),!0),t.I=!1}catch(e){return ho(t.b,Do(t,"Error opening Xhr: "+e.message)),void Co(t,e)}e=r||"";var s=new Ue(t.headers);a&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||o(t))x(t,e,void 0);else for(var n=Le(t),r=Ne(t),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],n&&n[a],t)}(a,function(t,e){s.set(e,t)}),a=function(t){t:{for(var e=Eo,n=t.length,r=o(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:o(t)?t.charAt(e):t[e]}(s.U()),r=i.FormData&&e instanceof i.FormData,!U(bo,n)||a||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.o&&(t.a.responseType=t.o),"withCredentials"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{ko(t),0<t.g&&(t.v=function(t){return Gt&&te(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ho(t.b,Do(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=m(t.Fa,t)):t.s=Me(t.Fa,t.g,t)),ho(t.b,Do(t,"Sending request")),t.j=!0,t.a.send(e),t.j=!1}catch(e){ho(t.b,Do(t,"Send error: "+e.message)),Co(t,e)}}function Eo(t){return"content-type"==t.toLowerCase()}function Co(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ao(t),To(t)}function Ao(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Po(t){if(t.c&&void 0!==r)if(t.B[1]&&4==Io(t)&&2==So(t))ho(t.b,Do(t,"Local request error detected and ignored"));else if(t.j&&4==Io(t))Me(t.Db,0,t);else if(t.dispatchEvent("readystatechange"),4==Io(t)){ho(t.b,Do(t,"Request complete")),t.c=!1;try{var e,n=So(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break t;default:o=!1}if(!(e=o)){var a;if(a=0===n){var s=String(t.l).match(Fe)[1]||null;if(!s&&i.self&&i.self.location){var u=i.self.location.protocol;s=u.substr(0,u.length-1)}a=!yo.test(s?s.toLowerCase():"")}e=a}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Io(t)?t.a.statusText:""}catch(e){ho(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+So(t)+"]",Ao(t)}}finally{To(t)}}}function To(t,e){if(t.a){ko(t);var n=t.a,r=t.B[0]?s:null;t.a=null,t.B=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(io,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function ko(t){t.a&&t.v&&(t.a.ontimeout=null),t.s&&(i.clearTimeout(t.s),t.s=null)}function Io(t){return t.a?t.a.readyState:0}function So(t){try{return 2<Io(t)?t.a.status:-1}catch(t){return-1}}function Do(t,e){return e+" ["+t.N+" "+t.l+" "+So(t)+"]"}function Oo(t,e){this.g=[],this.v=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.j=!1,this.h=0,this.b=null,this.l=0}function Ro(t,e,n){t.a=!0,t.c=n,t.f=!e,Lo(t)}function Mo(t){if(t.a){if(!t.u)throw new Uo(t);t.u=!1}}function xo(t,e,n,r){t.g.push([e,n,r]),t.a&&Lo(t)}function No(t){return L(t.g,function(t){return d(t[1])})}function Lo(t){if(t.h&&t.a&&No(t)){var e=t.h,n=Fo[e];n&&(i.clearTimeout(n.a),delete Fo[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.j;){var o=t.g.shift(),a=o[0],s=o[1];if(o=o[2],a=t.f?s:a)try{var u=a.call(o||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(C(e)||"function"==typeof i.Promise&&e instanceof i.Promise)&&(r=!0,t.j=!0)}catch(r){e=r,t.f=!0,No(t)||(n=!0)}}t.c=e,r&&(u=m(t.o,t,!0),r=m(t.o,t,!1),e instanceof Oo?(xo(e,u,r),e.B=!0):e.then(u,r)),n&&(e=new Bo(e),Fo[e.a]=e,t.h=e.a)}function Uo(){A.call(this)}function jo(){A.call(this)}function Bo(t){this.a=i.setTimeout(m(this.c,this),0),this.b=t}(t=vo.prototype).Fa=function(){void 0!==r&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ho(this.b,Do(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ho(this.b,Do(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),To(this))},t.ua=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),To(this,!0)),vo.lb.ua.call(this)},t.Db=function(){this.pa||(this.I||this.j||this.f?Po(this):this.tc())},t.tc=function(){Po(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.o){case mo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(io,"Response type "+this.o+" is not supported on this browser",void 0),null}catch(t){return ho(this.b,"Can not get response: "+t.message),null}},Oo.prototype.cancel=function(t){if(this.a)this.c instanceof Oo&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.v?this.v.call(this.s,this):this.u=!0,this.a||(t=new jo(this),Mo(this),Ro(this,!1,t))}},Oo.prototype.o=function(t,e){this.j=!1,Ro(this,t,e)},Oo.prototype.D=function(){Mo(this),Ro(this,!0,null)},Oo.prototype.then=function(t,e,n){var r,i,o=new gt(function(t,e){r=t,i=e});return xo(this,r,function(t){t instanceof jo?o.cancel():i(t)}),o.then(t,e,n)},E(Oo),w(Uo,A),Uo.prototype.message="Deferred has already fired",Uo.prototype.name="AlreadyCalledError",w(jo,A),jo.prototype.message="Deferred was canceled",jo.prototype.name="CanceledError",Bo.prototype.c=function(){throw delete Fo[this.a],this.b};var Fo={};function Wo(t){var e={},n=e.document||document,r=vn(t),i=document.createElement("SCRIPT"),o={Fb:i,Fa:void 0},a=new Oo(Vo,o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){Go(i,!0);var t=new Ho(Yo,"Timeout reached for loading script "+r);Mo(a),Ro(a,!1,t)},u),o.Fa=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Go(i,e.bd||!1,s),a.D())},i.onerror=function(){Go(i,!0,s);var t=new Ho(Ko,"Error while loading script "+r);Mo(a),Ro(a,!1,t)},lt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Rn(i,o),i.src=vn(t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Vo(){if(this&&this.Fb){var t=this.Fb;t&&"SCRIPT"==t.tagName&&Go(t,!0,this.Fa)}}function Go(t,e,n){null!=n&&i.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ko=0,Yo=1;function Ho(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),A.call(this,n),this.code=t}function zo(t){this.f=t}function qo(t,n,r){if(this.b=t,t=n||{},this.j=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=t.secureTokenTimeout||Zo,this.f=at(t.secureTokenHeaders||Jo),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||$o,this.a=at(t.firebaseHeaders||ta),r&&(this.a["X-Client-Version"]=r,this.f["X-Client-Version"]=r),r="Node"==Zn(),!(r=i.XMLHttpRequest||r&&e.INTERNAL.node&&e.INTERNAL.node.XMLHttpRequest)&&!Qn())throw new Lr("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,Qn()?this.c=new fo(self):Jn()?this.c=new zo(r):this.c=new Ji}w(Ho,A),w(zo,qi),zo.prototype.a=function(){return new this.f},zo.prototype.b=function(){return{}};var Xo,Qo="idToken",Zo=new vr(3e4,6e4),Jo={"Content-Type":"application/x-www-form-urlencoded"},$o=new vr(3e4,6e4),ta={"Content-Type":"application/json"};function ea(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function na(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function ra(t,e,n,r,o,a,s){(function(){var t=ir();return!((t=er(t)!=tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Gt&&Jt&&!(9<Jt))})()||Qn()?t=m(t.o,t):(Xo||(Xo=new gt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{i[oa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=mn(ia,{onload:oa});!function(t,e){xo(t,null,e,void 0)}(Wo(n),function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)})),t=m(t.u,t)),t(e,n,r,o,a,s)}qo.prototype.o=function(t,e,n,r,o,a){if(Qn()&&(void 0===i.fetch||void 0===i.Headers||void 0===i.Request))throw new Lr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new vo(this.c);if(a){s.g=Math.max(0,a);var u=setTimeout(function(){s.dispatchEvent("timeout")},a)}De(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ho(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)}),Oe(s,"ready",function(){u&&clearTimeout(u),Bt(this)}),Oe(s,"timeout",function(){u&&clearTimeout(u),Bt(this),e&&e(null)}),wo(s,t,n,r,o)};var ia=_n("https://apis.google.com/js/client.js?onload=%{onload}"),oa="__fcb"+Math.floor(1e6*Math.random()).toString();function aa(t){if(!zi.test(t.email))throw new Lr("invalid-email")}function sa(t){"email"in t&&aa(t)}function ua(t){if(!t[Qo])throw new Lr("internal-error")}function ca(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Lr("internal-error")}else{if(!t.sessionInfo)throw new Lr("missing-verification-id");if(!t.code)throw new Lr("missing-verification-code")}}qo.prototype.u=function(t,e,n,r,i){var o=this;Xo.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).m(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},qo.prototype.jb=function(){return Ka(this,Na,{})},qo.prototype.mb=function(t,e){return Ka(this,Ma,{idToken:t,email:e})},qo.prototype.nb=function(t,e){return Ka(this,xa,{idToken:t,password:e})};var la={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ha(t){if(!t.requestUri||!t.sessionId&&!t.postBody)throw new Lr("internal-error")}function da(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Yi(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Yi(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Yi(t)):t.errorMessage&&(e=Ya(t.errorMessage)),e)throw e;if(!t[Qo])throw new Lr("internal-error")}function fa(t,e){return e.returnIdpCredential=!0,Ka(t,La,e)}function pa(t,e){return e.returnIdpCredential=!0,Ka(t,ja,e)}function _a(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ka(t,Ua,e)}function ga(t){if(!t.oobCode)throw new Lr("invalid-action-code")}(t=qo.prototype).ob=function(t,e){var n={idToken:t},r=[];return it(la,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Ka(this,Ma,n)},t.gb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),Ka(this,Ia,t)},t.hb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),Ka(this,Ta,t)},t.fb=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ka(this,ka,t)},t.Sa=function(t){return Ka(this,Wa,t)},t.Wa=function(t,e){return Ka(this,Oa,{oobCode:t,newPassword:e})},t.Ia=function(t){return Ka(this,ma,{oobCode:t})},t.Ua=function(t){return Ka(this,va,{oobCode:t})};var va={endpoint:"setAccountInfo",A:ga,ba:"email"},ma={endpoint:"resetPassword",A:ga,J:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Lr("internal-error")}},ya={endpoint:"signupNewUser",A:function(t){if(aa(t),!t.password)throw new Lr("weak-password")},J:ua,R:!0},ba={endpoint:"createAuthUri"},wa={endpoint:"deleteAccount",T:["idToken"]},Ea={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],A:function(t){if(!l(t.deleteProvider))throw new Lr("internal-error")}},Ca={endpoint:"emailLinkSignin",T:["email","oobCode"],A:aa,J:ua,R:!0},Aa={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],A:aa,J:ua,R:!0},Pa={endpoint:"getAccountInfo"},Ta={endpoint:"getOobConfirmationCode",T:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Lr("internal-error");aa(t)},ba:"email"},ka={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Lr("internal-error")},ba:"email"},Ia={endpoint:"getOobConfirmationCode",T:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Lr("internal-error");aa(t)},ba:"email"},Sa={pb:!0,endpoint:"getProjectConfig",Cb:"GET"},Da={pb:!0,endpoint:"getRecaptchaParam",Cb:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new Lr("internal-error")}},Oa={endpoint:"resetPassword",A:ga,ba:"email"},Ra={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],ba:"sessionInfo"},Ma={endpoint:"setAccountInfo",T:["idToken"],A:sa,R:!0},xa={endpoint:"setAccountInfo",T:["idToken"],A:function(t){if(sa(t),!t.password)throw new Lr("weak-password")},J:ua,R:!0},Na={endpoint:"signupNewUser",J:ua,R:!0},La={endpoint:"verifyAssertion",A:ha,J:da,R:!0},Ua={endpoint:"verifyAssertion",A:ha,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Lr("user-not-found");if(t.errorMessage)throw Ya(t.errorMessage);if(!t[Qo])throw new Lr("internal-error")},R:!0},ja={endpoint:"verifyAssertion",A:function(t){if(ha(t),!t.idToken)throw new Lr("internal-error")},J:da,R:!0},Ba={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new Lr("invalid-custom-token")},J:ua,R:!0},Fa={endpoint:"verifyPassword",A:function(t){if(aa(t),!t.password)throw new Lr("wrong-password")},J:ua,R:!0},Wa={endpoint:"verifyPhoneNumber",A:ca,J:ua},Va={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new Lr("internal-error");ca(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Yi(t);ua(t)}},Ga={Tb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ca,J:ua};function Ka(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.T))return At(new Lr("internal-error"));var r,i=e.Cb||"POST";return Ct(n).then(e.A).then(function(){return e.R&&(n.returnSecureToken=!0),function(t,e,n,r,i,o){var a=ze(t.g+e);Ye(a,"key",t.b),o&&Ye(a,"cb",b().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&Ye(a,u,r[u]);return new gt(function(e,o){ra(t,a.toString(),function(t){t?t.error?o(Ha(t,i||{})):e(t):o(new Lr("network-request-failed"))},n,s?void 0:Ln(dr(r)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Tb,e.pb||!1)}).then(function(t){return r=t}).then(e.J).then(function(){if(!e.ba)return r;if(!(e.ba in r))throw new Lr("internal-error");return r[e.ba]})}function Ya(t){return Ha({error:{errors:[{message:t}],code:400,message:t}})}function Ha(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Lr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",lt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Lr(r[i],e);return!e&&t&&(e=hr(t)),new Lr("internal-error",e)}var za,qa={Wc:{Ya:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",eb:"https://securetoken.googleapis.com/v1/token",id:"p"},Yc:{Ya:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",eb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Zc:{Ya:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",eb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Xa(t){for(var e in qa)if(qa[e].id===t)return{firebaseEndpoint:(t=qa[e]).Ya,secureTokenEndpoint:t.eb};return null}function Qa(t){this.b=t,this.a=null,this.ab=function(t){return(es||(es=new gt(function(t,e){function n(){gr(),or("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){gr(),e(Error("Network Error"))},timeout:$a.get()})}if(or("gapi.iframes.Iframe"))t();else if(or("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();i[r]=function(){or("gapi.load")?n():e(Error("Network Error"))},Ct(Wo(r=mn(Ja,{onload:r}))).m(function(){e(Error("Network Error"))})}}).m(function(t){throw es=null,t}))).then(function(){return new gt(function(e,n){or("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},ts.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}za=Xa("__EID__")?"__EID__":void 0;var Za,Ja=_n("https://apis.google.com/js/api.js?onload=%{onload}"),$a=new vr(3e4,6e4),ts=new vr(5e3,15e3),es=null;function ns(t,e,n){this.j=t,this.g=e,this.h=n,this.f=null,this.a=qe(this.j,"/__/auth/iframe"),Ye(this.a,"apiKey",this.g),Ye(this.a,"appName",this.h),this.b=null,this.c=[]}function rs(t,e,n,r,i){this.o=t,this.u=e,this.c=n,this.l=r,this.h=this.g=this.j=null,this.a=i,this.f=null}function is(t){try{return e.app(t).auth().Ka()}catch(t){return[]}}function os(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.o=this.s=this.v=null,this.g=[],this.l=this.a=null}function as(t){var e=Wn();return function(t){return Ka(t,Sa,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=ze(e),r=n.c;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=ze(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Hn.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Gi(Wn())})}function ss(t){return t.l?t.l:(t.l=zn().then(function(){if(!t.s){var e=t.c,n=t.h,r=is(t.b),i=new ns(t.u,t.f,t.b);i.f=e,i.b=n,i.c=W(r||[]),t.s=i.toString()}t.j=new Qa(t.s),function(t){if(!t.j)throw Error("IfcHandler must be initialized!");!function(t,e){t.ab.then(function(){t.a.register("authEvent",e,or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.j,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Fi(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ct(n)}return n.status="ERROR",Ct(n)})}(t)}),t.l)}function us(t){return t.o||(t.v=t.c?rr(t.c,is(t.b)):null,t.o=new qo(t.f,Xa(t.h),t.v)),t.o}function cs(t,e,n,r,i,o,a,s,u,c){return(t=new rs(t,e,n,r,i)).j=o,t.g=a,t.h=s,t.b=at(u||null),t.f=c,t.toString()}function ls(t){if(this.a=t||e.INTERNAL.reactNative&&e.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Lr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function hs(){if(!ps())throw new Lr("web-storage-unsupported");this.f={},this.a=[],this.b=0,this.g=i.indexedDB,this.type="indexedDB"}function ds(t){return new gt(function(e,n){var r=t.g.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new gt(function(e,n){var r=t.g.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return ds(t)}).then(function(t){e(t)}).m(function(t){n(t)})}})}function fs(t){return t.h||(t.h=ds(t)),t.h}function ps(){try{return!!i.indexedDB}catch(t){return!1}}function _s(t){return t.objectStore("firebaseLocalStorage")}function gs(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function vs(t){return new gt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(Error(t.target.errorCode))}})}function ms(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ct().then(function(){return ps()?(Za||(Za=new hs),(n=Za).set("__sak","!").then(function(){return n.get("__sak")}).then(function(t){if("!"!==t)throw Error("indexedDB not supported!");return n.P("__sak")}).then(function(){return n}).m(function(){return e.c})):e.c}).then(function(t){return e.type=t.type,t.Y(function(t){x(e.a,function(e){e(t)})}),t})}function ys(){this.a={},this.type="inMemory"}function bs(){if(!function(){var t="Node"==Zn();if(!(t=ws()||t&&e.INTERNAL.node&&e.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Zn())throw new Lr("internal-error","The LocalStorage compatibility library was not found.");throw new Lr("web-storage-unsupported")}this.a=ws()||e.INTERNAL.node.localStorage,this.type="localStorage"}function ws(){try{var t=i.localStorage,e=pr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Es(){this.type="nullStorage"}function Cs(){if(!function(){var t="Node"==Zn();if(!(t=As()||t&&e.INTERNAL.node&&e.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Zn())throw new Lr("internal-error","The SessionStorage compatibility library was not found.");throw new Lr("web-storage-unsupported")}this.a=As()||e.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function As(){try{var t=i.sessionStorage,e=pr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}ns.prototype.toString=function(){return this.f?Ye(this.a,"v",this.f):sn(this.a.a,"v"),this.b?Ye(this.a,"eid",this.b):sn(this.a.a,"eid"),this.c.length?Ye(this.a,"fw",this.c.join(",")):sn(this.a.a,"fw"),this.a.toString()},rs.prototype.toString=function(){var t=qe(this.o,"/__/auth/handler");if(Ye(t,"apiKey",this.u),Ye(t,"appName",this.c),Ye(t,"authType",this.l),this.a.isOAuthProvider){var n=this.a;try{var r=e.app(this.c).auth().ca()}catch(t){r=null}for(var i in n.Xa=r,Ye(t,"providerId",this.a.providerId),r=dr((n=this.a).tb))r[i]=r[i].toString();i=n.Ac,r=at(r);for(var o=0;o<i.length;o++){var a=i[o];a in r&&delete r[a]}n.Za&&n.Xa&&!r[n.Za]&&(r[n.Za]=n.Xa),ot(r)||Ye(t,"customParameters",hr(r))}if("function"==typeof this.a.yb&&((n=this.a.yb()).length&&Ye(t,"scopes",n.join(","))),this.j?Ye(t,"redirectUrl",this.j):sn(t.a,"redirectUrl"),this.g?Ye(t,"eventId",this.g):sn(t.a,"eventId"),this.h?Ye(t,"v",this.h):sn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!He(t,s)&&Ye(t,s,this.b[s]);return this.f?Ye(t,"eid",this.f):sn(t.a,"eid"),(s=is(this.c)).length&&Ye(t,"fw",s.join(",")),t.toString()},(t=os.prototype).Da=function(t,e,n){var r=new Lr("popup-closed-by-user"),i=new Lr("web-storage-unsupported"),o=this,a=!1;return this.ea().then(function(){(function(t){var e={type:"webStorageSupport"};return ss(t).then(function(){return function(t,e){return t.ab.then(function(){return new gt(function(n){t.a.send(e.type,e,n,or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.j,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&Kn(t),e(i),a=!0)})}).m(function(){}).then(function(){if(!a)return function(t){return new gt(function(e){return function n(){xe(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!a)return xe(n).then(function(){e(r)})})},t.Gb=function(){var t=ir();return!lr(t)&&!_r(t)},t.Bb=function(){return!1},t.xb=function(t,e,n,r,i,o,a){if(!t)return At(new Lr("popup-blocked"));if(a&&!lr())return this.ea().m(function(e){Kn(t),i(e)}),r(),Ct();this.a||(this.a=as(us(this)));var s=this;return this.a.then(function(){var e=s.ea().m(function(e){throw Kn(t),i(e),e});return r(),e}).then(function(){(ji(n),a)||Vn(cs(s.u,s.f,s.b,e,n,null,o,s.c,void 0,s.h),t)}).m(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},t.Ba=function(t,e,n){this.a||(this.a=as(us(this)));var r=this;return this.a.then(function(){ji(e),Vn(cs(r.u,r.f,r.b,t,e,Wn(),n,r.c,void 0,r.h))}).m(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ea=function(){var t=this;return ss(this).then(function(){return t.j.ab}).m(function(){throw t.a=null,new Lr("network-request-failed")})},t.Lb=function(){return!0},t.va=function(t){this.g.push(t)},t.Ja=function(t){B(this.g,function(e){return e==t})},(t=ls.prototype).get=function(t){return Ct(this.a.getItem(t)).then(function(t){return t&&fr(t)})},t.set=function(t,e){return Ct(this.a.setItem(t,hr(e)))},t.P=function(t){return Ct(this.a.removeItem(t))},t.Y=function(){},t.aa=function(){},(t=hs.prototype).set=function(t,e){var n,r=!1,i=this;return fs(this).then(function(e){return vs((e=_s(gs(n=e,!0))).get(t))}).then(function(o){var a=_s(gs(n,!0));return o?(o.value=e,vs(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,vs(a.add(o)))}).then(function(){i.f[t]=e}).ha(function(){r&&i.b--})},t.get=function(t){return fs(this).then(function(e){return vs(_s(gs(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.P=function(t){var e=!1,n=this;return fs(this).then(function(r){return e=!0,n.b++,vs(_s(gs(r,!0)).delete(t))}).then(function(){delete n.f[t]}).ha(function(){e&&n.b--})},t.Jc=function(){var t=this;return fs(this).then(function(t){var e=_s(gs(t,!1));return e.getAll?vs(e.getAll()):new gt(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(Error(t.target.errorCode))}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)if(r in n)if(typeof e[r]!=typeof n[r])i.push(r);else if(l(e[r])){t:{var o=void 0,a=e[r],s=n[r];for(o in a)if(!(o in s)||a[o]!==s[o]){o=!1;break t}for(o in s)if(!(o in a)){o=!1;break t}o=!0}o||i.push(r)}else"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r);else i.push(r);for(r in n)r in e||i.push(r);return i}(t.f,n),t.f=n}return r})},t.Y=function(t){0==this.a.length&&function(t){t.c&&t.c.cancel("STOP_EVENT"),function e(){t.c=xe(800).then(m(t.Jc,t)).then(function(e){0<e.length&&x(t.a,function(t){t(e)})}).then(e).m(function(t){"STOP_EVENT"!=t.message&&e()});return t.c}()}(this),this.a.push(t)},t.aa=function(t){B(this.a,function(e){return e==t}),0==this.a.length&&this.c&&this.c.cancel("STOP_EVENT")},(t=ms.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.P=function(t){return this.b.then(function(e){return e.P(t)})},t.Y=function(t){this.a.push(t)},t.aa=function(t){B(this.a,function(e){return e==t})},(t=ys.prototype).get=function(t){return Ct(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ct()},t.P=function(t){return delete this.a[t],Ct()},t.Y=function(){},t.aa=function(){},(t=bs.prototype).get=function(t){var e=this;return Ct().then(function(){return fr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Ct().then(function(){var r=hr(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return Ct().then(function(){e.a.removeItem(t)})},t.Y=function(t){i.window&&ve(i.window,"storage",t)},t.aa=function(t){i.window&&be(i.window,"storage",t)},(t=Es.prototype).get=function(){return Ct(null)},t.set=function(){return Ct()},t.P=function(){return Ct()},t.Y=function(){},t.aa=function(){},(t=Cs.prototype).get=function(t){var e=this;return Ct().then(function(){return fr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Ct().then(function(){var r=hr(e);null===r?n.P(t):n.a.setItem(t,r)})},t.P=function(t){var e=this;return Ct().then(function(){e.a.removeItem(t)})},t.Y=function(){},t.aa=function(){};var Ps,Ts,ks={w:bs,Pa:Cs},Is={w:bs,Pa:Cs},Ss={w:ls,Pa:Es},Ds={w:bs,Pa:Es},Os={Vc:"local",NONE:"none",Xc:"session"};function Rs(){var t=!(_r(ir())||!Xn()),e=lr(),n=ar();this.o=t,this.h=e,this.l=n,this.a={},Ps||(Ps=new function(){var t={};t.Browser=ks,t.Node=Is,t.ReactNative=Ss,t.Worker=Ds,this.a=t[Zn()]}),t=Ps;try{this.g=!Fn()&&br()||!i.indexedDB?new t.a.w:new ms(Qn()?new ys:new t.a.w)}catch(t){this.g=new ys,this.h=!0}try{this.j=new t.a.Pa}catch(t){this.j=new ys}this.u=new ys,this.f=m(this.Kb,this),this.b={}}function Ms(){return Ts||(Ts=new Rs),Ts}function xs(t,e){switch(e){case"session":return t.j;case"none":return t.u;default:return t.g}}function Ns(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Ls(t,e,n){return n=Ns(e,n),"local"==e.w&&(t.b[n]=null),xs(t,e.w).P(n)}function Us(t){t.c&&(clearInterval(t.c),t.c=null)}(t=Rs.prototype).get=function(t,e){return xs(this,t.w).get(Ns(t,e))},t.set=function(t,e,n){var r=Ns(t,n),i=this,o=xs(this,t.w);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.w&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=Ns(t,e),this.l&&(this.b[t]=i.localStorage.getItem(t)),ot(this.a)&&(xs(this,"local").Y(this.f),this.h||(Fn()||!br())&&i.indexedDB||!this.l||function(t){Us(t),t.c=setInterval(function(){for(var e in t.a){var n=i.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new se({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Kb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Ns(t,e),this.a[t]&&(B(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ot(this.a)&&(xs(this,"local").aa(this.f),Us(this))},t.Kb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var o=i.localStorage.getItem(n);o!==r&&(this.b[n]=o,this.Va(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?xs(this,"local").aa(this.f):Us(this),this.o)if(n=i.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?i.localStorage.setItem(e,r):i.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var a=this;n=function(){void 0===t.a.a&&a.b[e]===i.localStorage.getItem(e)||(a.b[e]=i.localStorage.getItem(e),a.Va(e))},Gt&&Jt&&10==Jt&&i.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else x(t,m(this.Va,this))},t.Va=function(t){this.a[t]&&x(this.a[t],function(t){t()})};var js,Bs={name:"authEvent",w:"local"};function Fs(t,e){this.b=-1,this.b=Ws,this.f=i.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.j=t,this.h=e,this.l=i.Int32Array?new Int32Array(64):Array(64),void 0!==js||(js=i.Int32Array?new Int32Array(qs):qs),this.reset()}w(Fs,function(){this.b=-1});for(var Ws=64,Vs=Ws-1,Gs=[],Ks=0;Ks<Vs;Ks++)Gs[Ks]=0;var Ys=F(128,Gs);function Hs(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|js[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+d|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function zs(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(o(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Hs(t),i=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var a=e[r++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");t.f[i++]=a,i==t.b&&(Hs(t),i=0)}}t.c=i,t.g+=n}Fs.prototype.reset=function(){this.g=this.c=0,this.a=i.Int32Array?new Int32Array(this.h):W(this.h)};var qs=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Xs(){Fs.call(this,8,Qs)}w(Xs,Fs);var Qs=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Zs(t,e,n,r,i){this.u=t,this.j=e,this.l=n,this.o=r||null,this.s=i||null,this.h=e+":"+n,this.v=new function(){this.a=Ms()},this.g=new function(t){this.a=t,this.b=Ms()}(this.h),this.f=null,this.b=[],this.a=this.c=null}function Js(t){return new Lr("invalid-cordova-configuration",t)}function $s(t){var e=new Xs;zs(e,t),t=[];var n=8*e.g;56>e.c?zs(e,Ys,56-e.c):zs(e,Ys,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Hs(e),r=n=0;r<e.j;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return N(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}function tu(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function eu(t){return t.f||(t.f=t.ea().then(function(){return new gt(function(e){t.va(function n(r){return e(r),t.Ja(n),!1}),function(t){function e(e){r=!0,o&&o.cancel(),nu(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=_i(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=fr(He(o=ze(i),"firebaseError")||null))?Ur(o):null)?new Bi(r.b,r.c,null,null,o):new Bi(r.b,r.c,i,r.g)),i=o||n}tu(t,i)})}var n=new Bi("unknown",null,null,null,new Lr("no-auth-event")),r=!1,o=xe(500).then(function(){return nu(t).then(function(){r||tu(t,n)})}),a=i.handleOpenURL;i.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(or("BuildInfo.packageName",i).toLowerCase()+"://")&&e({url:t}),"function"==typeof a)try{a(t)}catch(t){console.error(t)}},Vi||(Vi=new Wi),Vi.subscribe(e)}(t)})})),t.f}function nu(t){var e=null;return function(t){return t.b.get(Bs,t.a).then(function(t){return Fi(t)})}(t.g).then(function(n){return e=n,Ls((n=t.g).b,Bs,n.a)}).then(function(){return e})}(t=Zs.prototype).ea=function(){return this.ya?this.ya:this.ya=(qn(void 0)?zn().then(function(){return new gt(function(t,e){var n=i.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):At(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof or("universalLinks.subscribe",i))throw Js("cordova-universal-links-plugin is not installed");if(void 0===or("BuildInfo.packageName",i))throw Js("cordova-plugin-buildinfo is not installed");if("function"!=typeof or("cordova.plugins.browsertab.openUrl",i))throw Js("cordova-plugin-browsertab is not installed");if("function"!=typeof or("cordova.InAppBrowser.open",i))throw Js("cordova-plugin-inappbrowser is not installed")},function(){throw new Lr("cordova-not-ready")})},t.Da=function(t,e){return e(new Lr("operation-not-supported-in-this-environment")),Ct()},t.xb=function(){return At(new Lr("operation-not-supported-in-this-environment"))},t.Lb=function(){return!1},t.Gb=function(){return!0},t.Bb=function(){return!0},t.Ba=function(t,e,n){if(this.c)return At(new Lr("redirect-operation-pending"));var r=this,o=i.document,a=null,s=null,u=null,c=null;return this.c=Ct().then(function(){return ji(e),eu(r)}).then(function(){return function(t,e,n,r){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Bi(e,r,null,o,new Lr("no-auth-event")),s=or("BuildInfo.packageName",i);if("string"!=typeof s)throw new Lr("invalid-cordova-configuration");var u=or("BuildInfo.displayName",i),c={};if(ir().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!ir().toLowerCase().match(/android/))return At(new Lr("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=$s(o),c.sessionId=o;var l=cs(t.u,t.j,t.l,e,n,null,r,t.o,c,t.s);return t.ea().then(function(){var e=t.h;return t.v.a.set(Bs,a.C(),e)}).then(function(){var e=or("cordova.plugins.browsertab.isAvailable",i);if("function"!=typeof e)throw new Lr("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=or("cordova.plugins.browsertab.openUrl",i)))throw new Lr("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=or("cordova.InAppBrowser.open",i)))throw new Lr("invalid-cordova-configuration");e=!(!(e=ir()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.a=n(l,e?"_blank":"_system","location=yes")}})})}(r,t,e,n)}).then(function(){return new gt(function(t,e){s=function(){var e=or("cordova.plugins.browsertab.close",i);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.va(s),u=function(){a||(a=xe(2e3).then(function(){e(new Lr("redirect-cancelled-by-user"))}))},c=function(){mr()&&u()},o.addEventListener("resume",u,!1),ir().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).m(function(t){return nu(r).then(function(){throw t})})}).ha(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&r.Ja(s),r.c=null})},t.va=function(t){this.b.push(t),eu(this).m(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Bi("unknown",null,null,null,new Lr("no-auth-event")),t(e))})},t.Ja=function(t){B(this.b,function(e){return e==t})};var ru={name:"pendingRedirect",w:"session"};function iu(t){return Ls(t.b,ru,t.a)}function ou(t,e,n){this.v=t,this.l=e,this.u=n,this.h=[],this.f=!1,this.j=m(this.o,this),this.c=new _u,this.s=new yu,this.g=new function(t){this.a=t,this.b=Ms()}(this.l+":"+this.u),this.b={},this.b.unknown=this.c,this.b.signInViaRedirect=this.c,this.b.linkViaRedirect=this.c,this.b.reauthViaRedirect=this.c,this.b.signInViaPopup=this.s,this.b.linkViaPopup=this.s,this.b.reauthViaPopup=this.s,this.a=au(this.v,this.l,this.u,za)}function au(t,n,r,i){var o=e.SDK_VERSION||null;return qn()?new Zs(t,n,r,o,i):new os(t,n,r,o,i)}function su(t){t.f||(t.f=!0,t.a.va(t.j));var e=t.a;return t.a.ea().m(function(n){throw t.a==e&&t.reset(),n})}function uu(t){t.a.Gb()&&su(t).m(function(e){var n=new Bi("unknown",null,null,null,new Lr("operation-not-supported-in-this-environment"));du(e)&&t.o(n)}),t.a.Bb()||gu(t.c)}ou.prototype.reset=function(){this.f=!1,this.a.Ja(this.j),this.a=au(this.v,this.l,this.u)},ou.prototype.subscribe=function(t){if(U(this.h,t)||this.h.push(t),!this.f){var e=this;(function(t){return t.b.get(ru,t.a).then(function(t){return"pending"==t})})(this.g).then(function(t){t?iu(e.g).then(function(){su(e).m(function(t){var n=new Bi("unknown",null,null,null,new Lr("operation-not-supported-in-this-environment"));du(t)&&e.o(n)})}):uu(e)}).m(function(){uu(e)})}},ou.prototype.unsubscribe=function(t){B(this.h,function(e){return e==t})},ou.prototype.o=function(t){if(!t)throw new Lr("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.qb(t.b,t.c)){(e=this.b[t.b])&&e.h(t,r),e=!0;break}}return gu(this.c),e};var cu=new vr(2e3,1e4),lu=new vr(3e4,6e4);function hu(t,e,n,r,i,o){return t.a.xb(e,n,r,function(){t.f||(t.f=!0,t.a.va(t.j))},function(){t.reset()},i,o)}function du(t){return!(!t||"auth/cordova-not-ready"!=t.code)}ou.prototype.da=function(){return this.c.da()},ou.prototype.Ba=function(t,e,n){var r,i=this;return function(t){return t.b.set(ru,"pending",t.a)}(this.g).then(function(){return i.a.Ba(t,e,n).m(function(t){if(du(t))throw new Lr("operation-not-supported-in-this-environment");return r=t,iu(i.g).then(function(){throw r})}).then(function(){return i.a.Lb()?new gt(function(){}):iu(i.g).then(function(){return i.da()}).then(function(){}).m(function(){})})})},ou.prototype.Da=function(t,e,n,r){return this.a.Da(n,function(n){t.ga(e,null,n,r)},cu.get())};var fu={};function pu(t,e,n){var r=e+":"+n;return fu[r]||(fu[r]=new ou(t,e,n)),fu[r]}function _u(){this.b=null,this.f=[],this.c=[],this.a=null,this.g=!1}function gu(t){t.g||(t.g=!0,mu(t,!1,null,null))}function vu(t,e){if(t.b=function(){return Ct(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function mu(t,e,n,r){e?r?function(t,e){if(t.b=function(){return At(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):vu(t,n):vu(t,{user:null}),t.f=[],t.c=[]}function yu(){}function bu(t,e){this.a=e,Ar(this,"verificationId",t)}function wu(t,e,n,r){return new Ni(t).Sa(e,n).then(function(t){return new bu(t,r)})}function Eu(t,e,n){if(this.h=t,this.j=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Cu(t){this.f=t,this.b=this.a=null,this.c=0}function Au(t,e){var n=e[Qo],r=e.refreshToken;e=Pu(e.expiresIn),t.b=n,t.c=e,t.a=r}function Pu(t){return b()+1e3*parseInt(t,10)}function Tu(t,e){return function(t,e){return new gt(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ra(t,t.j+"?key="+encodeURIComponent(t.b),function(t){t?t.error?r(Ha(t)):t.access_token&&t.refresh_token?n(t):r(new Lr("internal-error")):r(new Lr("network-request-failed"))},"POST",an(e).toString(),t.f,t.l.get()):r(new Lr("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=Pu(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).m(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}function ku(t,e){this.a=t||null,this.b=e||null,Pr(this,{lastSignInTime:yr(e||null),creationTime:yr(t||null)})}function Iu(t,e){for(var n in ae.call(this,t),e)this[n]=e[n]}function Su(t,n,r){this.D=[],this.G=t.apiKey,this.s=t.appName,this.B=t.authDomain||null,t=e.SDK_VERSION?rr(e.SDK_VERSION):null,this.b=new qo(this.G,Xa(za),t),this.h=new Cu(this.b),Lu(this,n[Qo]),Au(this.h,n),Ar(this,"refreshToken",this.h.a),Bu(this,r||{}),Se.call(this),this.I=!1,this.B&&sr()&&(this.a=pu(this.B,this.G,this.s)),this.N=[],this.j=null,this.l=function(t){return new Eu(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-b()-3e5;return 0<e?e:0})}(this),this.V=m(this.Ga,this);var i=this;this.ia=null,this.sa=function(t){i.na(t.g)},this.X=null,this.O=[],this.ra=function(t){Ou(i,t.c)},this.W=null}function Du(t,e){t.X&&be(t.X,"languageCodeChanged",t.sa),(t.X=e)&&ve(e,"languageCodeChanged",t.sa)}function Ou(t,n){t.O=n,na(t.b,e.SDK_VERSION?rr(e.SDK_VERSION,t.O):null)}function Ru(t,e){t.W&&be(t.W,"frameworkChanged",t.ra),(t.W=e)&&ve(e,"frameworkChanged",t.ra)}function Mu(t){try{return e.app(t.s).auth()}catch(e){throw new Lr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.s+"'!")}}function xu(t){t.o||t.l.b||(t.l.start(),be(t,"tokenChanged",t.V),ve(t,"tokenChanged",t.V))}function Nu(t){be(t,"tokenChanged",t.V),t.l.stop()}function Lu(t,e){t.qa=e,Ar(t,"_lat",e)}function Uu(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return function(t){return new gt(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Zb:!0,value:o}:{Zb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Pt(t[o],y(i,o,!0),y(i,o,!1));else e(r)})}(e).then(function(){return t})}function ju(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function Bu(t,e){Pr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new ku(e.createdAt,e.lastLoginAt),providerData:[]})}function Fu(){}function Wu(t){return Ct().then(function(){if(t.o)throw new Lr("app-deleted")})}function Vu(t){return N(t.providerData,function(t){return t.providerId})}function Gu(t,e){e&&(Ku(t,e.providerId),t.providerData.push(e))}function Ku(t,e){B(t.providerData,function(t){return t.providerId==e})}function Yu(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Ar(t,e,n)}function Hu(t,e){t!=e&&(Pr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),e.metadata?Ar(t,"metadata",function(t){return new ku(t.a,t.b)}(e.metadata)):Ar(t,"metadata",new ku),x(e.providerData,function(e){Gu(t,e)}),t.h=e.h,Ar(t,"refreshToken",t.h.a))}function zu(t){return t.F().then(function(e){var n=t.isAnonymous;return function(t,e){return Ka(t.b,Pa,{idToken:e}).then(m(t.uc,t))}(t,e).then(function(){return n||Yu(t,"isAnonymous",!1),e})})}function qu(t,e){e[Qo]&&t.qa!=e[Qo]&&(Au(t.h,e),t.dispatchEvent(new Iu("tokenChanged")),Lu(t,e[Qo]),Yu(t,"refreshToken",t.h.a))}function Xu(t,e){return zu(t).then(function(){if(U(Vu(t),e))return Uu(t).then(function(){throw new Lr("provider-already-linked")})})}function Qu(t,e,n){return Tr({user:t,credential:Ui(e),additionalUserInfo:e=ai(e),operationType:n})}function Zu(t,e){return qu(t,e),t.reload().then(function(){return t})}function Ju(t,n,r,i,o){if(!sr())return At(new Lr("operation-not-supported-in-this-environment"));if(t.j&&!o)return At(t.j);var a=oi(r.providerId),s=pr(t.uid+":::"),u=null;(!lr()||Xn())&&t.B&&r.isOAuthProvider&&(u=cs(t.B,t.G,t.s,n,r,null,s,e.SDK_VERSION||null));var c=Yn(u,a&&a.Aa,a&&a.za);return i=i().then(function(){if(tc(t),!o)return t.F().then(function(){})}).then(function(){return hu(t.a,c,n,r,s,!!u)}).then(function(){return new gt(function(e,r){t.ga(n,null,new Lr("cancelled-popup-request"),t.g||null),t.f=e,t.v=r,t.g=s,t.c=t.a.Da(t,n,c,s)})}).then(function(t){return c&&Kn(c),t?Tr(t):null}).m(function(t){throw c&&Kn(c),t}),ec(t,i,o)}function $u(t,e,n,r,i){if(!sr())return At(new Lr("operation-not-supported-in-this-environment"));if(t.j&&!i)return At(t.j);var o=null,a=pr(t.uid+":::");return r=r().then(function(){if(tc(t),!i)return t.F().then(function(){})}).then(function(){return t.$=a,Uu(t)}).then(function(e){return t.fa&&(e=(e=t.fa).b.set(rc,t.C(),e.a)),e}).then(function(){return t.a.Ba(e,n,a)}).m(function(e){if(o=e,t.fa)return ic(t.fa);throw o}).then(function(){if(o)throw o}),ec(t,r,i)}function tc(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new Lr("internal-error");throw new Lr("auth-domain-config-required")}}function ec(t,e,n){var r=function(t,e,n){return t.j&&!n?(e.cancel(),At(t.j)):e.m(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.j||t.dispatchEvent(new Iu("userInvalidated")),t.j=e),e})}(t,e,n);return t.D.push(r),r.ha(function(){j(t.D,r)}),r}function nc(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Qo]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-b())/1e3;var r=new Su(e,n,t);return t.providerData&&x(t.providerData,function(t){t&&Gu(r,Tr(t))}),t.redirectEventId&&(r.$=t.redirectEventId),r}_u.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},_u.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.b,r=t.c,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;"unknown"!=n||i||o?t.a?(mu(this,!0,null,t.a),Ct()):e.wa(n,r)?function(t,e,n){n=n.wa(e.b,e.c);var r=e.f,i=e.g,o=!!e.b.match(/Redirect$/);n(r,i).then(function(e){mu(t,o,e,null)}).m(function(e){mu(t,o,null,e)})}(this,t,e):At(new Lr("invalid-auth-event")):(mu(this,!1,null,null),Ct())}else At(new Lr("invalid-auth-event"))},_u.prototype.da=function(){var t=this;return new gt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Lr("timeout");t.a&&t.a.cancel(),t.a=xe(lu.get()).then(function(){t.b||mu(t,!0,null,e)})}(t))})},yu.prototype.h=function(t,e){if(t){var n=t.b,r=t.c;t.a?(e.ga(t.b,null,t.a,t.c),Ct()):e.wa(n,r)?function(t,e){var n=t.c,r=t.b;e.wa(r,n)(t.f,t.g).then(function(t){e.ga(r,t,null,n)}).m(function(t){e.ga(r,null,t,n)})}(t,e):At(new Lr("invalid-auth-event"))}else At(new Lr("invalid-auth-event"))},bu.prototype.confirm=function(t){return t=Li(this.verificationId,t),this.a(t)},Eu.prototype.start=function(){this.a=this.c,function t(e,n){e.stop();e.b=xe(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then(function(){return function(){var t=i.document,e=null;return mr()||!t?Ct():new gt(function(n){e=function(){mr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).m(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return e.h()}).then(function(){t(e,!0)}).m(function(n){e.j(n)&&t(e,!1)})}(this,!0)},Eu.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Cu.prototype.C=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Cu.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?At(new Lr("user-token-expired")):t||!this.b||b()>this.c-3e4?this.a?Tu(this,{grant_type:"refresh_token",refresh_token:this.a}):Ct(null):Ct({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},ku.prototype.C=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(Iu,ae),w(Su,Se),Su.prototype.na=function(t){this.ia=t,ea(this.b,t)},Su.prototype.ca=function(){return this.ia},Su.prototype.Ka=function(){return W(this.O)},Su.prototype.Ga=function(){this.l.b&&(this.l.stop(),this.l.start())},Ar(Su.prototype,"providerId","firebase"),(t=Su.prototype).reload=function(){var t=this;return ec(this,Wu(this).then(function(){return zu(t).then(function(){return Uu(t)}).then(Fu)}))},t.ac=function(t){return this.F(t).then(function(t){return new function(t){var e=ei(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Lr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Pr(this,{token:t,expirationTime:yr(1e3*e.exp),authTime:yr(1e3*e.auth_time),issuedAtTime:yr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}(t)})},t.F=function(t){var e=this;return ec(this,Wu(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new Lr("internal-error");return t.accessToken!=e.qa&&(Lu(e,t.accessToken),e.dispatchEvent(new Iu("tokenChanged"))),Yu(e,"refreshToken",t.refreshToken),t.accessToken}))},t.getToken=function(t){return Er["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]||(Er["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead.")),this.F(t)},t.uc=function(t){if(!(t=t.users)||!t.length)throw new Lr("internal-error");Bu(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?N(t,function(t){return new function(t,e,n,r,i,o){Pr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Gu(this,e[n]);Yu(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.bb=function(t){var e=this,n=null;return ec(this,t.f(this.b,this.uid).then(function(t){return qu(e,t),n=Qu(e,t,"reauthenticate"),e.j=null,e.reload()}).then(function(){return n}),!0)},t.vc=function(t){return this.bb(t).then(function(){})},t.$a=function(t){var e=this,n=null;return ec(this,Xu(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.c(e.b,n)}).then(function(t){return n=Qu(e,t,"link"),Zu(e,t)}).then(function(){return n}))},t.mc=function(t){return this.$a(t).then(function(t){return t.user})},t.nc=function(t,e){var n=this;return ec(this,Xu(this,"phone").then(function(){return wu(Mu(n),t,e,m(n.$a,n))}))},t.wc=function(t,e){var n=this;return ec(this,Ct().then(function(){return wu(Mu(n),t,e,m(n.bb,n))}),!0)},t.mb=function(t){var e=this;return ec(this,this.F().then(function(n){return e.b.mb(n,t)}).then(function(t){return qu(e,t),e.reload()}))},t.Nc=function(t){var e=this;return ec(this,this.F().then(function(n){return t.c(e.b,n)}).then(function(t){return qu(e,t),e.reload()}))},t.nb=function(t){var e=this;return ec(this,this.F().then(function(n){return e.b.nb(n,t)}).then(function(t){return qu(e,t),e.reload()}))},t.ob=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Wu(this);var e=this;return ec(this,this.F().then(function(n){return e.b.ob(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return qu(e,t),Yu(e,"displayName",t.displayName||null),Yu(e,"photoURL",t.photoUrl||null),x(e.providerData,function(t){"password"===t.providerId&&(Ar(t,"displayName",e.displayName),Ar(t,"photoURL",e.photoURL))}),Uu(e)}).then(Fu))},t.Mc=function(t){var e=this;return ec(this,zu(this).then(function(n){return U(Vu(e),t)?function(t,e,n){return Ka(t,Ea,{idToken:e,deleteProvider:n})}(e.b,n,[t]).then(function(t){var n={};return x(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),x(Vu(e),function(t){n[t]||Ku(e,t)}),n[Ni.PROVIDER_ID]||Ar(e,"phoneNumber",null),Uu(e)}):Uu(e).then(function(){throw new Lr("no-such-provider")})}))},t.delete=function(){var t=this;return ec(this,this.F().then(function(e){return Ka(t.b,wa,{idToken:e})}).then(function(){t.dispatchEvent(new Iu("userDeleted"))})).then(function(){for(var e=0;e<t.D.length;e++)t.D[e].cancel("app-deleted");Du(t,null),Ru(t,null),t.D=[],t.o=!0,Nu(t),Ar(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},t.qb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.$||null)==e||"reauthViaRedirect"==t&&(this.$||null)==e)},t.ga=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.wa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.vb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.wb,this):"linkViaRedirect"==t&&(this.$||null)==e?m(this.vb,this):"reauthViaRedirect"==t&&(this.$||null)==e?m(this.wb,this):null},t.oc=function(t){var e=this;return Ju(this,"linkViaPopup",t,function(){return Xu(e,t.providerId).then(function(){return Uu(e)})},!1)},t.xc=function(t){return Ju(this,"reauthViaPopup",t,function(){return Ct()},!0)},t.pc=function(t){var e=this;return $u(this,"linkViaRedirect",t,function(){return Xu(e,t.providerId)},!1)},t.yc=function(t){return $u(this,"reauthViaRedirect",t,function(){return Ct()},!0)},t.vb=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return ec(this,this.F().then(function(r){return pa(n.b,{requestUri:t,sessionId:e,idToken:r})}).then(function(t){return r=Qu(n,t,"link"),Zu(n,t)}).then(function(){return r}))},t.wb=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return ec(this,Ct().then(function(){return gi(_a(n.b,{requestUri:t,sessionId:e}),n.uid)}).then(function(t){return r=Qu(n,t,"reauthenticate"),qu(n,t),n.j=null,n.reload()}).then(function(){return r}),!0)},t.fb=function(t){var e=this,n=null;return ec(this,this.F().then(function(e){return n=e,void 0===t||ot(t)?{}:Xr(new Fr(t))}).then(function(t){return e.b.fb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.C()},t.C=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.G,appName:this.s,authDomain:this.B,stsTokenManager:this.h.C(),redirectEventId:this.$||null};return this.metadata&&lt(t,this.metadata.C()),x(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var rc={name:"redirectUser",w:"session"};function ic(t){return Ls(t.b,rc,t.a)}function oc(t){this.a=t,this.b=Ms(),this.c=null,this.f=function(t){var e=uc("local"),n=uc("session"),r=uc("none");return function(t,e,n){var r=Ns(e,n),o=xs(t,e.w);return t.get(e,n).then(function(a){var s=null;try{s=fr(i.localStorage.getItem(r))}catch(t){}if(s&&!a)return i.localStorage.removeItem(r),t.set(e,s,n);s&&a&&"localStorage"!=o.type&&i.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(sc,t.a).then(function(t){return t?uc(t):e})})})}).then(function(e){return t.c=e,ac(t,e.w)}).m(function(){t.c||(t.c=e)})}(this),this.b.addListener(uc("local"),this.a,m(this.g,this))}function ac(t,e){var n,r=[];for(n in Os)Os[n]!==e&&r.push(Ls(t.b,uc(Os[n]),t.a));return r.push(Ls(t.b,sc,t.a)),function(t){return new gt(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Pt(t[s],y(o,s),a);else e(i)})}(r)}oc.prototype.g=function(){var t=this,e=uc("local");dc(this,function(){return Ct().then(function(){return t.c&&"local"!=t.c.w?t.b.get(e,t.a):null}).then(function(n){if(n)return ac(t,"local").then(function(){t.c=e})})})};var sc={name:"persistence",w:"session"};function uc(t){return{name:"authUser",w:t}}function cc(t,e){return dc(t,function(){return t.b.set(t.c,e.C(),t.a)})}function lc(t){return dc(t,function(){return Ls(t.b,t.c,t.a)})}function hc(t,e){return dc(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),nc(t||{})})})}function dc(t,e){return t.f=t.f.then(e,e),t.f}function fc(t){if(this.l=!1,Ar(this,"app",t),!bc(this).options||!bc(this).options.apiKey)throw new Lr("invalid-api-key");t=e.SDK_VERSION?rr(e.SDK_VERSION):null,this.b=new qo(bc(this).options&&bc(this).options.apiKey,Xa(za),t),this.N=[],this.o=[],this.I=[],this.Ob=e.INTERNAL.createSubscribe(m(this.ic,this)),this.O=void 0,this.Pb=e.INTERNAL.createSubscribe(m(this.jc,this)),mc(this,null),this.h=new oc(bc(this).options.apiKey+":"+bc(this).name),this.G=new function(t){this.a=t,this.b=Ms()}(bc(this).options.apiKey+":"+bc(this).name),this.V=Ac(this,function(t){var e=bc(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(rc,t.a).then(function(t){return t&&e&&(t.authDomain=e),nc(t||{})})}(t.G,bc(t).options.authDomain).then(function(e){return(t.B=e)&&(e.fa=t.G),ic(t.G)});return Ac(t,e)}(t).then(function(){return hc(t.h,e)}).then(function(e){return e?(e.fa=t.G,t.B&&(t.B.$||null)==(e.$||null)?e:e.reload().then(function(){return cc(t.h,e).then(function(){return e})}).m(function(n){return"auth/network-request-failed"==n.code?e:lc(t.h)})):null}).then(function(e){mc(t,e||null)});return Ac(t,n)}(this)),this.j=Ac(this,function(t){return t.V.then(function(){return t.da()}).m(function(){}).then(function(){if(!t.l)return t.ia()}).m(function(){}).then(function(){if(!t.l){t.X=!0;var e=t.h;e.b.addListener(uc("local"),e.a,t.ia)}})}(this)),this.X=!1,this.ia=m(this.Ic,this),this.Ga=m(this.ka,this),this.qa=m(this.Yb,this),this.ra=m(this.gc,this),this.sa=m(this.hc,this),function(t){var e=bc(t).options.authDomain,n=bc(t).options.apiKey;e&&sr()&&(t.Nb=t.V.then(function(){if(!t.l){if(t.a=pu(e,n,bc(t).name),t.a.subscribe(t),wc(t)&&ju(wc(t)),t.B){ju(t.B);var r=t.B;r.na(t.ca()),Du(r,t),Ou(r=t.B,t.D),Ru(r,t),t.B=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.qc,this),this.s=0,Se.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ca()},set:function(t){this.na(t)},enumerable:!1}),t.W=null}(this),this.D=[]}function pc(t){ae.call(this,"languageCodeChanged"),this.g=t}function _c(t){ae.call(this,"frameworkChanged"),this.c=t}function gc(t){return t.Nb||At(new Lr("auth-domain-config-required"))}function vc(t,e){var n={};return n.apiKey=bc(t).options.apiKey,n.authDomain=bc(t).options.authDomain,n.appName=bc(t).name,t.V.then(function(){return function(t,e,n,r){var i=new Su(t,e);return n&&(i.fa=n),r&&Ou(i,r),i.reload().then(function(){return i})}(n,e,t.G,t.Ka())}).then(function(e){return wc(t)&&e.uid==wc(t).uid?(Hu(wc(t),e),t.ka(e)):(mc(t,e),ju(e),t.ka(e))}).then(function(){Cc(t)})}function mc(t,e){wc(t)&&(function(t,e){B(t.N,function(t){return t==e})}(wc(t),t.Ga),be(wc(t),"tokenChanged",t.qa),be(wc(t),"userDeleted",t.ra),be(wc(t),"userInvalidated",t.sa),Nu(wc(t))),e&&(e.N.push(t.Ga),ve(e,"tokenChanged",t.qa),ve(e,"userDeleted",t.ra),ve(e,"userInvalidated",t.sa),0<t.s&&xu(e)),Ar(t,"currentUser",e),e&&(e.na(t.ca()),Du(e,t),Ou(e,t.D),Ru(e,t))}function yc(t,e){var n=null,r=null;return Ac(t,e.then(function(e){return n=Ui(e),r=ai(e),vc(t,e)}).then(function(){return Tr({user:wc(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function bc(t){return t.app}function wc(t){return t.currentUser}function Ec(t){return wc(t)&&wc(t)._lat||null}function Cc(t){if(t.X){for(var e=0;e<t.o.length;e++)t.o[e]&&t.o[e](Ec(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](Ec(t))}}function Ac(t,e){return t.N.push(e),e.ha(function(){j(t.N,e)}),e}function Pc(t,e,n,r,o,a){if(Ar(this,"type","recaptcha"),this.b=this.c=null,this.o=!1,this.l=e,this.a=n||{theme:"light",type:"image"},this.g=[],this.a[Ic])throw new Lr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[Sc],!i.document)throw new Lr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!On(e)||!this.h&&On(e).hasChildNodes())throw new Lr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new qo(t,a||null,o||null),this.s=r||function(){return null};var s=this;this.j=[];var u=this.a[Tc];this.a[Tc]=function(t){if(Dc(s,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=or(u,i);"function"==typeof e&&e(t)}};var c=this.a[kc];this.a[kc]=function(){if(Dc(s,null),"function"==typeof c)c();else if("string"==typeof c){var t=or(c,i);"function"==typeof t&&t()}}}oc.prototype.ib=function(t){var e=null,n=this;return function(t){var e=new Lr("invalid-persistence-type"),n=new Lr("unsupported-persistence-type");t:{for(r in Os)if(Os[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Zn()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!ar()&&"none"!==t)throw n}}(t),dc(this,function(){return t!=n.c.w?n.b.get(n.c,n.a).then(function(r){return e=r,ac(n,t)}).then(function(){if(n.c=uc(t),e)return n.b.set(n.c,e,n.a)}):Ct()})},w(fc,Se),w(pc,ae),w(_c,ae),(t=fc.prototype).ib=function(t){return Ac(this,t=this.h.ib(t))},t.na=function(t){this.W===t||this.l||(this.W=t,ea(this.b,this.W),this.dispatchEvent(new pc(this.ca())))},t.ca=function(){return this.W},t.Oc=function(){var t=i.navigator;this.na(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.qc=function(t){this.D.push(t),na(this.b,e.SDK_VERSION?rr(e.SDK_VERSION,this.D):null),this.dispatchEvent(new _c(this.D))},t.Ka=function(){return W(this.D)},t.toJSON=function(){return{apiKey:bc(this).options.apiKey,authDomain:bc(this).options.authDomain,appName:bc(this).name,currentUser:wc(this)&&wc(this).C()}},t.qb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ga=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.wa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.Xb,this):null},t.Xb=function(t,e){var n=this;t={requestUri:t,sessionId:e},this.c&&(this.c.cancel(),this.c=null);var r=null,i=null,o=fa(n.b,t).then(function(t){return r=Ui(t),i=ai(t),t});return Ac(this,t=n.V.then(function(){return o}).then(function(t){return vc(n,t)}).then(function(){return Tr({user:wc(n),credential:r,additionalUserInfo:i,operationType:"signIn"})}))},t.Gc=function(t){if(!sr())return At(new Lr("operation-not-supported-in-this-environment"));var n=this,r=oi(t.providerId),i=pr(),o=null;(!lr()||Xn())&&bc(this).options.authDomain&&t.isOAuthProvider&&(o=cs(bc(this).options.authDomain,bc(this).options.apiKey,bc(this).name,"signInViaPopup",t,null,i,e.SDK_VERSION||null));var a=Yn(o,r&&r.Aa,r&&r.za);return Ac(this,r=gc(this).then(function(e){return hu(e,a,"signInViaPopup",t,i,!!o)}).then(function(){return new gt(function(t,e){n.ga("signInViaPopup",null,new Lr("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=i,n.c=n.a.Da(n,"signInViaPopup",a,i)})}).then(function(t){return a&&Kn(a),t?Tr(t):null}).m(function(t){throw a&&Kn(a),t}))},t.Hc=function(t){if(!sr())return At(new Lr("operation-not-supported-in-this-environment"));var e=this;return Ac(this,gc(this).then(function(){return function(t){return dc(t,function(){return t.b.set(sc,t.c.w,t.a)})}(e.h)}).then(function(){return e.a.Ba("signInViaRedirect",t)}))},t.da=function(){if(!sr())return At(new Lr("operation-not-supported-in-this-environment"));var t=this;return Ac(this,gc(this).then(function(){return t.a.da()}).then(function(t){return t?Tr(t):null}))},t.kb=function(){var t=this;return Ac(this,this.j.then(function(){return wc(t)?(mc(t,null),lc(t.h).then(function(){Cc(t)})):Ct()}))},t.Ic=function(){var t=this;return hc(this.h,bc(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=wc(t)&&e){n=wc(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Hu(wc(t),e),wc(t).F();(wc(t)||e)&&(mc(t,e),e&&(ju(e),e.fa=t.G),t.a&&t.a.subscribe(t),Cc(t))}})},t.ka=function(t){return cc(this.h,t)},t.Yb=function(){Cc(this),this.ka(wc(this))},t.gc=function(){this.kb()},t.hc=function(){this.kb()},t.ic=function(t){var e=this;this.addAuthTokenListener(function(){t.next(wc(e))})},t.jc=function(t){var e=this;!function(t,e){t.I.push(e),Ac(t,t.j.then(function(){!t.l&&U(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(Ec(t)))}))}(this,function(){t.next(wc(e))})},t.sc=function(t,n,r){var i=this;return this.X&&e.Promise.resolve().then(function(){d(t)?t(wc(i)):d(t.next)&&t.next(wc(i))}),this.Ob(t,n,r)},t.rc=function(t,n,r){var i=this;return this.X&&e.Promise.resolve().then(function(){i.O=i.getUid(),d(t)?t(wc(i)):d(t.next)&&t.next(wc(i))}),this.Pb(t,n,r)},t.$b=function(t){var e=this;return Ac(this,this.j.then(function(){return wc(e)?wc(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Cc=function(t){return this.Hb(t).then(function(t){return t.user})},t.Hb=function(t){var e=this;return this.j.then(function(){return yc(e,Ka(e.b,Ba,{token:t}))}).then(function(t){var n=t.user;return Yu(n,"isAnonymous",!1),e.ka(n),t})},t.Ib=function(t,e){var n=this;return this.j.then(function(){return yc(n,Ka(n.b,Fa,{email:t,password:e}))})},t.Dc=function(t,e){return this.Ib(t,e).then(function(t){return t.user})},t.Sb=function(t,e){return this.sb(t,e).then(function(t){return t.user})},t.sb=function(t,e){var n=this;return this.j.then(function(){return yc(n,Ka(n.b,ya,{email:t,password:e}))})},t.Bc=function(t){return this.Oa(t).then(function(t){return t.user})},t.Oa=function(t){var e=this;return this.j.then(function(){return yc(e,t.xa(e.b))})},t.jb=function(){return this.Jb().then(function(t){return t.user})},t.Jb=function(){var t=this;return this.j.then(function(){var e=wc(t);return e&&e.isAnonymous?Tr({user:e,credential:null,additionalUserInfo:Tr({providerId:null,isNewUser:!1}),operationType:"signIn"}):yc(t,t.b.jb()).then(function(e){var n=e.user;return Yu(n,"isAnonymous",!0),t.ka(n),e})})},t.getUid=function(){return wc(this)&&wc(this).uid||null},t.Qb=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&wc(this)&&xu(wc(this))},t.zc=function(t){var e=this;x(this.o,function(n){n==t&&e.s--}),0>this.s&&(this.s=0),0==this.s&&wc(this)&&Nu(wc(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.o.push(t),Ac(this,this.j.then(function(){e.l||U(e.o,t)&&t(Ec(e))}))},t.removeAuthTokenListener=function(t){B(this.o,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(uc("local"),t.a,this.ia),this.a&&this.a.unsubscribe(this),e.Promise.resolve()},t.Vb=function(t){return Ac(this,function(t,e){return Ka(t,ba,{identifier:e,continueUri:ur()?Wn():"http://localhost"}).then(function(t){return t.allProviders||[]})}(this.b,t))},t.Wb=function(t){return Ac(this,function(t,e){return Ka(t,ba,{identifier:e,continueUri:ur()?Wn():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.b,t))},t.kc=function(t){return!!Ri(t)},t.hb=function(t,e){var n=this;return Ac(this,Ct().then(function(){var t=new Fr(e);if(!t.c)throw new Lr("argument-error",Vr+" must be true when sending sign in link to email");return Xr(t)}).then(function(e){return n.b.hb(t,e)}).then(function(){}))},t.Pc=function(t){return this.Ia(t).then(function(t){return t.data.email})},t.Wa=function(t,e){return Ac(this,this.b.Wa(t,e).then(function(){}))},t.Ia=function(t){return Ac(this,this.b.Ia(t).then(function(t){return new function(t){var e={},n=t[Sr],r=t[Dr];if(!(t=t[Or])||t!=Ir&&!n)throw Error("Invalid provider user info!");e[Mr]=r||null,e[Rr]=n||null,Ar(this,Nr,t),Ar(this,xr,kr(e))}(t)}))},t.Ua=function(t){return Ac(this,this.b.Ua(t).then(function(){}))},t.gb=function(t,e){var n=this;return Ac(this,Ct().then(function(){return void 0===e||ot(e)?{}:Xr(new Fr(e))}).then(function(e){return n.b.gb(t,e)}).then(function(){}))},t.Fc=function(t,e){return Ac(this,wu(this,t,e,m(this.Oa,this)))},t.Ec=function(t,e){var n=this;return Ac(this,Ct().then(function(){var r=Oi(t,e||Wn());return n.Oa(r)}))};var Tc="callback",kc="expired-callback",Ic="sitekey",Sc="size";function Dc(t,e){for(var n=0;n<t.j.length;n++)try{t.j[n](e)}catch(t){}}function Oc(t,e){return t.g.push(e),e.ha(function(){j(t.g,e)}),e}function Rc(t){if(t.o)throw new Lr("internal-error","RecaptchaVerifier instance has been destroyed.")}(t=Pc.prototype).ya=function(){var t=this;return this.c?this.c:this.c=Oc(this,Ct().then(function(){if(ur()&&!Qn())return zn();throw new Lr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return function(t,e){return new gt(function(n,r){var o=setTimeout(function(){r(new Lr("network-request-failed"))},xc.get());if(!i.grecaptcha||e!==t.c&&!t.b){i[t.a]=function(){if(i.grecaptcha){t.c=e;var a=i.grecaptcha.render;i.grecaptcha.render=function(e,n){return e=a(e,n),t.b++,e},clearTimeout(o),n()}else clearTimeout(o),r(new Lr("internal-error"));delete i[t.a]};var a=mn(Mc,{onload:t.a,hl:e||""});Ct(Wo(a)).m(function(){clearTimeout(o),r(new Lr("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(o),n()})}(Lc(),t.s())}).then(function(){return Ka(t.u,Da,{})}).then(function(e){t.a[Ic]=e.recaptchaSiteKey}).m(function(e){throw t.c=null,e}))},t.render=function(){Rc(this);var t=this;return Oc(this,this.ya().then(function(){if(null===t.b){var e=t.l;if(!t.h){var n=On(e);e=xn("DIV"),n.appendChild(e)}t.b=grecaptcha.render(e,t.a)}return t.b}))},t.verify=function(){Rc(this);var t=this;return Oc(this,this.render().then(function(e){return new gt(function(n){var r=grecaptcha.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){B(t.j,function(t){return t==e})}(t,i),n(e))};t.j.push(i),t.h&&grecaptcha.execute(t.b)}})}))},t.reset=function(){Rc(this),null!==this.b&&grecaptcha.reset(this.b)},t.clear=function(){Rc(this),this.o=!0,Lc().b--;for(var t=0;t<this.g.length;t++)this.g[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){t=On(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}};var Mc=_n("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}");var xc=new vr(3e4,6e4);var Nc=null;function Lc(){return Nc||(Nc=new function(){this.b=i.grecaptcha?1/0:0,this.c=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}),Nc}function Uc(t,n,r){try{this.f=r||e.app()}catch(t){throw new Lr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.f.options||!this.f.options.apiKey)throw new Lr("invalid-api-key");r=this.f.options.apiKey;var i=this,o=null;try{o=this.f.auth().Ka()}catch(t){}o=e.SDK_VERSION?rr(e.SDK_VERSION,o):null,Pc.call(this,r,t,n,function(){try{var t=i.f.auth().ca()}catch(e){t=null}return t},o,Xa(za))}function jc(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Lr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Bc.length)throw new Lr("internal-error","Argument validator received an unsupported number of arguments.");n=Bc[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new Lr("argument-error",t+" failed: "+r)}w(Uc,Pc);var Bc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Fc(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:o}}function Wc(){return{name:"opt_forceRefresh",K:"a boolean",optional:!0,M:a}}function Vc(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:f}}function Gc(t,e){return{name:t||"",K:"a function",optional:!!e,M:d}}function Kc(t,e){return{name:t||"",K:"null",optional:!!e,M:c}}function Yc(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.xa||!n)}}}function Hc(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&o(t.type)&&d(t.verify))}}}function zc(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function qc(t,e){for(var n in e){var r=e[n].name;t[r]=Qc(r,t[n],e[n].i)}}function Xc(t,e,n,r){t[e]=Qc(e,n,r)}function Qc(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return jc(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}qc(fc.prototype,{Ua:{name:"applyActionCode",i:[Fc("code")]},Ia:{name:"checkActionCode",i:[Fc("code")]},Wa:{name:"confirmPasswordReset",i:[Fc("code"),Fc("newPassword")]},Sb:{name:"createUserWithEmailAndPassword",i:[Fc("email"),Fc("password")]},sb:{name:"createUserAndRetrieveDataWithEmailAndPassword",i:[Fc("email"),Fc("password")]},Vb:{name:"fetchProvidersForEmail",i:[Fc("email")]},Wb:{name:"fetchSignInMethodsForEmail",i:[Fc("email")]},da:{name:"getRedirectResult",i:[]},kc:{name:"isSignInWithEmailLink",i:[Fc("emailLink")]},rc:{name:"onAuthStateChanged",i:[zc(Vc(),Gc(),"nextOrObserver"),Gc("opt_error",!0),Gc("opt_completed",!0)]},sc:{name:"onIdTokenChanged",i:[zc(Vc(),Gc(),"nextOrObserver"),Gc("opt_error",!0),Gc("opt_completed",!0)]},gb:{name:"sendPasswordResetEmail",i:[Fc("email"),zc(Vc("opt_actionCodeSettings",!0),Kc(null,!0),"opt_actionCodeSettings",!0)]},hb:{name:"sendSignInLinkToEmail",i:[Fc("email"),Vc("actionCodeSettings")]},ib:{name:"setPersistence",i:[Fc("persistence")]},Oa:{name:"signInAndRetrieveDataWithCredential",i:[Yc()]},jb:{name:"signInAnonymously",i:[]},Jb:{name:"signInAnonymouslyAndRetrieveData",i:[]},Bc:{name:"signInWithCredential",i:[Yc()]},Cc:{name:"signInWithCustomToken",i:[Fc("token")]},Hb:{name:"signInAndRetrieveDataWithCustomToken",i:[Fc("token")]},Dc:{name:"signInWithEmailAndPassword",i:[Fc("email"),Fc("password")]},Ec:{name:"signInWithEmailLink",i:[Fc("email"),Fc("emailLink",!0)]},Ib:{name:"signInAndRetrieveDataWithEmailAndPassword",i:[Fc("email"),Fc("password")]},Fc:{name:"signInWithPhoneNumber",i:[Fc("phoneNumber"),Hc()]},Gc:{name:"signInWithPopup",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Hc:{name:"signInWithRedirect",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},kb:{name:"signOut",i:[]},toJSON:{name:"toJSON",i:[Fc(null,!0)]},Oc:{name:"useDeviceLanguage",i:[]},Pc:{name:"verifyPasswordResetCode",i:[Fc("code")]}}),function(t,e){for(var n in e){var r=e[n].name;if(r!==n){var i=e[n].Rb;Object.defineProperty(t,r,{get:function(){return this[n]},set:function(t){jc(r,[i],[t],!0),this[n]=t},enumerable:!0})}}}(fc.prototype,{lc:{name:"languageCode",Rb:zc(Fc(),Kc(),"languageCode")}}),fc.Persistence=Os,fc.Persistence.LOCAL="local",fc.Persistence.SESSION="session",fc.Persistence.NONE="none",qc(Su.prototype,{delete:{name:"delete",i:[]},ac:{name:"getIdTokenResult",i:[Wc()]},F:{name:"getIdToken",i:[Wc()]},getToken:{name:"getToken",i:[Wc()]},$a:{name:"linkAndRetrieveDataWithCredential",i:[Yc()]},mc:{name:"linkWithCredential",i:[Yc()]},nc:{name:"linkWithPhoneNumber",i:[Fc("phoneNumber"),Hc()]},oc:{name:"linkWithPopup",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},pc:{name:"linkWithRedirect",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},bb:{name:"reauthenticateAndRetrieveDataWithCredential",i:[Yc()]},vc:{name:"reauthenticateWithCredential",i:[Yc()]},wc:{name:"reauthenticateWithPhoneNumber",i:[Fc("phoneNumber"),Hc()]},xc:{name:"reauthenticateWithPopup",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},yc:{name:"reauthenticateWithRedirect",i:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",i:[]},fb:{name:"sendEmailVerification",i:[zc(Vc("opt_actionCodeSettings",!0),Kc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",i:[Fc(null,!0)]},Mc:{name:"unlink",i:[Fc("provider")]},mb:{name:"updateEmail",i:[Fc("email")]},nb:{name:"updatePassword",i:[Fc("password")]},Nc:{name:"updatePhoneNumber",i:[Yc("phone")]},ob:{name:"updateProfile",i:[Vc("profile")]}}),qc(gt.prototype,{ha:{name:"finally"},m:{name:"catch"},then:{name:"then"}}),qc(bu.prototype,{confirm:{name:"confirm",i:[Fc("verificationCode")]}}),Xc(Di,"credential",function(t,e){return new Si(t,e)},[Fc("email"),Fc("password")]),qc(wi.prototype,{ta:{name:"addScope",i:[Fc("scope")]},Ca:{name:"setCustomParameters",i:[Vc("customOAuthParameters")]}}),Xc(wi,"credential",Ei,[zc(Fc(),Vc(),"token")]),Xc(Di,"credentialWithLink",Oi,[Fc("email"),Fc("emailLink")]),qc(Ci.prototype,{ta:{name:"addScope",i:[Fc("scope")]},Ca:{name:"setCustomParameters",i:[Vc("customOAuthParameters")]}}),Xc(Ci,"credential",Ai,[zc(Fc(),Vc(),"token")]),qc(Pi.prototype,{ta:{name:"addScope",i:[Fc("scope")]},Ca:{name:"setCustomParameters",i:[Vc("customOAuthParameters")]}}),Xc(Pi,"credential",Ti,[zc(Fc(),zc(Vc(),Kc()),"idToken"),zc(Fc(),Kc(),"accessToken",!0)]),qc(ki.prototype,{Ca:{name:"setCustomParameters",i:[Vc("customOAuthParameters")]}}),Xc(ki,"credential",Ii,[zc(Fc(),Vc(),"token"),Fc("secret",!0)]),qc(bi.prototype,{ta:{name:"addScope",i:[Fc("scope")]},credential:{name:"credential",i:[zc(Fc(),Kc(),"idToken",!0),zc(Fc(),Kc(),"accessToken",!0)]},Ca:{name:"setCustomParameters",i:[Vc("customOAuthParameters")]}}),Xc(Ni,"credential",Li,[Fc("verificationId"),Fc("verificationCode")]),qc(Ni.prototype,{Sa:{name:"verifyPhoneNumber",i:[Fc("phoneNumber"),Hc()]}}),qc(Lr.prototype,{toJSON:{name:"toJSON",i:[Fc(null,!0)]}}),qc(Ki.prototype,{toJSON:{name:"toJSON",i:[Fc(null,!0)]}}),qc(Gi.prototype,{toJSON:{name:"toJSON",i:[Fc(null,!0)]}}),qc(Uc.prototype,{clear:{name:"clear",i:[]},render:{name:"render",i:[]},verify:{name:"verify",i:[]}}),function(){if(void 0===e||!e.INTERNAL||!e.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:fc,Error:Lr};Xc(t,"EmailAuthProvider",Di,[]),Xc(t,"FacebookAuthProvider",wi,[]),Xc(t,"GithubAuthProvider",Ci,[]),Xc(t,"GoogleAuthProvider",Pi,[]),Xc(t,"TwitterAuthProvider",ki,[]),Xc(t,"OAuthProvider",bi,[Fc("providerId")]),Xc(t,"PhoneAuthProvider",Ni,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof fc)}}]),Xc(t,"RecaptchaVerifier",Uc,[zc(Fc(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Vc("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof e.app.App)}}]),e.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:m((t=new fc(t)).getUid,t),getToken:m(t.$b,t),addAuthTokenListener:m(t.Qb,t),removeAuthTokenListener:m(t.zc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),e.INTERNAL.extendNamespace({User:Su})}()}).call(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(e,n(9))},function(t,e,n){t.exports=n(58)},function(t,e,n){"use strict";(function(r){Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),o=n(59),a=n(17),s=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(n(7)),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),i.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:i.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return i.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(t){}return new c},h=l("localStorage"),d=l("sessionStorage"),f=new o.Logger("@firebase/database"),p=function(){var t=1;return function(){return t++}}(),_=function(t){var e=i.stringToByteArray(t),n=new i.Sha1;n.update(e);var r=n.digest();return i.base64.encodeByteArray(r)},g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++)Array.isArray(t[r])||t[r]&&"object"==typeof t[r]&&"number"==typeof t[r].length?n+=g.apply(null,t[r]):"object"==typeof t[r]?n+=i.stringify(t[r]):n+=t[r],n+=" ";return n},v=null,m=!0,y=function(t,e){i.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(f.logLevel=o.LogLevel.VERBOSE,v=f.log.bind(f),e&&d.set("logging_enabled",!0)):"function"==typeof t?v=t:(v=null,d.remove("logging_enabled"))},b=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===v&&!0===d.get("logging_enabled")&&y(!0)),v){var n=g.apply(null,t);v(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];b.apply(void 0,[t].concat(e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+g.apply(void 0,t);f.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+g.apply(void 0,t);throw f.error(n),new Error(n)},A=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+g.apply(void 0,t);f.warn(n)},P=function(t){return"number"==typeof t&&(t!=t||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",k="[MAX_NAME]",I=function(t,e){if(t===e)return 0;if(t===T||e===k)return-1;if(e===T||t===k)return 1;var n=L(t),r=L(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},S=function(t,e){return t===e?0:t<e?-1:1},D=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+i.stringify(e))},O=function(t){if("object"!=typeof t||null===t)return i.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",o=0;o<e.length;o++)0!==o&&(r+=","),r+=i.stringify(e[o]),r+=":",r+=O(t[e[o]]);return r+="}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r},M=function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;++n)e(n,t[n]);else i.forEach(t,function(t,n){return e(n,t)})},x=function(t){i.assert(!P(t),"Invalid JSON number");var e,n,r,o,a,s,u;for(0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074)))),s=[],a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse(),u=s.join("");var c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},N=new RegExp("^-?\\d{1,10}$"),L=function(t){if(N.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},U=function(t){try{t()}catch(t){setTimeout(function(){var e=t.stack||"";throw A("Exception was thrown by user callback.",e),t},Math.floor(0))}},j=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},B=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},F=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=I(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),W=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=i.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=i.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=i.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),V="long_polling",G=function(){function t(t,e,n,r,i){void 0===i&&(i=""),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(i.assert("string"==typeof t,"typeof type must == string"),i.assert("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==V)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return i.forEach(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();var K,Y,H=function(t){var e=z(t),n=e.subdomain;"firebase"===e.domain&&C(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===e.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&A("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new G(e.host,e.secure,n,r),path:new F(e.pathString)}},z=function(t){var e="",n="",r="",i="",o=!0,a="https",s=443;if("string"==typeof t){var u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));var c=t.indexOf("/");-1===c&&(c=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(c,l)),c<l&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(c,l)));var h=function(t){var e={};t.startsWith("?")&&(t=t.substring(1));for(var n=0,r=t.split("&");n<r.length;n++){var i=r[n];if(0!==i.length){var o=i.split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):A("Invalid query segment '"+i+"' in query '"+t+"'")}}return e}(t.substring(Math.min(t.length,l)));(u=e.indexOf(":"))>=0?(o="https"===a||"wss"===a,s=parseInt(e.substring(u+1),10)):u=t.length;var d=e.split(".");3===d.length?(n=d[1],r=d[0].toLowerCase()):2===d.length?n=d[0]:"localhost"===d[0].slice(0,u).toLowerCase()&&(n="localhost"),""===r&&"ns"in h&&(r=h.ns)}return{host:e,port:s,domain:n,subdomain:r,secure:o,scheme:a,pathString:i}},q=/[\[\].#$\/\u0000-\u001F\u007F]/,X=/[\[\].#$\u0000-\u001F\u007F]/,Q=function(t){return"string"==typeof t&&0!==t.length&&!q.test(t)},Z=function(t){return"string"==typeof t&&0!==t.length&&!X.test(t)},J=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!P(t)||t&&"object"==typeof t&&i.contains(t,".sv")},$=function(t,e,n,r,o){o&&void 0===n||tt(i.errorPrefix(t,e,o),n,r)},tt=function(t,e,n){var r=n instanceof F?new W(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(P(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&i.stringLength(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var o=!1,a=!1;if(i.forEach(e,function(e,n){if(".value"===e)o=!0;else if(".priority"!==e&&".sv"!==e&&(a=!0,!Q(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),tt(t,n,r),r.pop()}),o&&a)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},et=function(t,e,n,r,o){if(!o||void 0!==n){var a=i.errorPrefix(t,e,o);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(a+" must be an object containing the children to replace.");var s=[];i.forEach(n,function(t,e){var n=new F(t);if(tt(a,e,r.child(n)),".priority"===n.getBack()&&!J(e))throw new Error(a+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Q(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(F.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(a,s)}},nt=function(t,e,n,r){if(!r||void 0!==n){if(P(n))throw new Error(i.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!J(n))throw new Error(i.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(i.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},it=function(t,e,n,r){if(!(r&&void 0===n||Q(n)))throw new Error(i.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ot=function(t,e,n,r){if(!(r&&void 0===n||Z(n)))throw new Error(i.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},at=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},st=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Q(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Z(t)}(r))throw new Error(i.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ut=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){i.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),i.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new i.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){i.validateArgCount("OnDisconnect.remove",0,1,arguments.length),at("OnDisconnect.remove",this.path_),i.validateCallback("OnDisconnect.remove",1,t,!0);var e=new i.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){i.validateArgCount("OnDisconnect.set",1,2,arguments.length),at("OnDisconnect.set",this.path_),$("OnDisconnect.set",1,t,this.path_,!1),i.validateCallback("OnDisconnect.set",2,e,!0);var n=new i.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){i.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),at("OnDisconnect.setWithPriority",this.path_),$("OnDisconnect.setWithPriority",1,t,this.path_,!1),nt("OnDisconnect.setWithPriority",2,e,!1),i.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new i.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(i.validateArgCount("OnDisconnect.update",1,2,arguments.length),at("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,A("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}et("OnDisconnect.update",1,t,this.path_,!1),i.validateCallback("OnDisconnect.update",2,e,!0);var o=new i.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,o.wrapCallback(e)),o.promise},t}(),ct=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return i.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),lt=function(){var t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",e=0,n=[];return function(r){var o,a=r===e;e=r;var s=new Array(8);for(o=7;o>=0;o--)s[o]=t.charAt(r%64),r=Math.floor(r/64);i.assert(0===r,"Cannot push at time == 0");var u=s.join("");if(a){for(o=11;o>=0&&63===n[o];o--)n[o]=0;n[o]++}else for(o=0;o<12;o++)n[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)u+=t.charAt(n[o]);return i.assert(20===u.length,"nextPushId: Length should be 20."),u}}(),ht=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),dt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new ht(T,t),r=new ht(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return ht.MIN},t}(),ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return K},set:function(t){K=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return I(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw i.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return ht.MIN},e.prototype.maxPost=function(){return new ht(k,K)},e.prototype.makePost=function(t,e){return i.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new ht(t,K)},e.prototype.toString=function(){return".key"},e}(dt),pt=new ft;var _t,gt,vt,mt=function(t){return"number"==typeof t?"number:"+x(t):"string:"+t},yt=function(t){if(t.isLeafNode()){var e=t.val();i.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&i.contains(e,".sv"),"Priority must be a string or number.")}else i.assert(t===Y||t.isEmpty(),"priority of unexpected type.");i.assert(t===Y||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},bt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,i.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),yt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return _t},set:function(t){_t=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(i.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+mt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?x(this.value_):this.value_,this.lazyHash_=_(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(i.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return i.assert(o>=0,"Unknown leaf type: "+n),i.assert(a>=0,"Unknown leaf type: "+r),o===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var wt,Et,Ct=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?I(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return ht.MIN},e.prototype.maxPost=function(){return new ht(k,new bt("[PRIORITY-POST]",vt))},e.prototype.makePost=function(t,e){var n=gt(t);return new ht(e,new bt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(dt)),At=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Pt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:kt.EMPTY_NODE,this.right=null!=o?o:kt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r,i;return(i=(r=n(t,(i=this).key))<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return kt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return kt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Tt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Pt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),kt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Pt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new At(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new At(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new At(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new At(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Tt,t}(),It=Math.log(2),St=function(){function t(t){this.count=function(t){return parseInt(Math.log(t)/It,10)}(t+1),this.current_=this.count-1;var e=function(t){return parseInt(Array(t+1).join("1"),2)}(this.count);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Dt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0==s)return null;if(1==s)return o=t[e],a=n?n(o):o,new Pt(a,o.node,Pt.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new Pt(a,o.node,Pt.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new Pt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,Pt.BLACK):(s(h,Pt.BLACK),s(h,Pt.RED))}return o}(new St(t.length));return new kt(r||e,o)},Ot={},Rt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return i.assert(Ot&&Ct,"ChildrenNode.ts has not been loaded"),wt=wt||new t({".priority":Ot},{".priority":Ct})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=i.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e===Ot?null:e},t.prototype.hasIndex=function(t){return i.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){i.assert(e!==pt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,o=[],a=!1,s=n.getIterator(ht.Wrap),u=s.getNext();u;)a=a||e.isDefinedOn(u.node),o.push(u),u=s.getNext();r=a?Dt(o,e.getCompare()):Ot;var c=e.toString(),l=i.clone(this.indexSet_);l[c]=e;var h=i.clone(this.indexes_);return h[c]=r,new t(h,l)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(i.map(this.indexes_,function(t,o){var a=i.safeGet(r.indexSet_,o);if(i.assert(a,"Missing index implementation for "+o),t===Ot){if(a.isDefinedOn(e.node)){for(var s=[],u=n.getIterator(ht.Wrap),c=u.getNext();c;)c.name!=e.name&&s.push(c),c=u.getNext();return s.push(e),Dt(s,a.getCompare())}return Ot}var l=n.get(e.name),h=t;return l&&(h=h.remove(new ht(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(i.map(this.indexes_,function(t){if(t===Ot)return t;var r=n.get(e.name);return r?t.remove(new ht(e.name,r)):t}),this.indexSet_)},t}();function Mt(t,e){return I(t.name,e.name)}function xt(t,e){return I(t,e)}var Nt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&yt(this.priorityNode_),this.children_.isEmpty()&&i.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Et||(Et=new t(new kt(xt),null,Rt.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Et},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Et:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(i.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new ht(e,n),o=void 0,a=void 0;return n.isEmpty()?(o=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_)),new t(o,o.isEmpty()?Et:this.priorityNode_,a)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;i.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ct,function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+mt(this.getPriority().val())+":"),this.forEachChild(Ct,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":_(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new ht(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new ht(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new ht(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,ht.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,ht.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Lt?-1:0},t.prototype.withIndex=function(e){if(e===pt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===pt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ct),r=e.getIterator(Ct),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===pt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Lt=new(function(t){function e(){return t.call(this,new kt(xt),Nt.EMPTY_NODE,Rt.Default)||this}return a.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Nt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Nt));Object.defineProperties(ht,{MIN:{value:new ht(T,Nt.EMPTY_NODE)},MAX:{value:new ht(k,Lt)}}),ft.__EMPTY_NODE=Nt.EMPTY_NODE,bt.__childrenNodeConstructor=Nt,function(t){Y=t}(Lt),function(t){vt=t}(Lt);var Ut=!0;function jt(t,e){if(void 0===e&&(e=null),null===t)return Nt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),i.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new bt(t,jt(e));if(t instanceof Array||!Ut){var n=Nt.EMPTY_NODE,r=t;return i.forEach(r,function(t,e){if(i.contains(r,t)&&"."!==t.substring(0,1)){var o=jt(e);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(t,o))}}),n.updatePriority(jt(e))}var o=[],a=!1,s=t;if(i.forEach(s,function(t,e){if("string"!=typeof t||"."!==t.substring(0,1)){var n=jt(s[t]);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),o.push(new ht(t,n)))}}),0==o.length)return Nt.EMPTY_NODE;var u=Dt(o,Mt,function(t){return t.name},xt);if(a){var c=Dt(o,Ct.getCompare());return new Nt(u,jt(e),new Rt({".priority":c},{".priority":Ct}))}return new Nt(u,jt(e),Rt.Default)}!function(t){gt=t}(jt);var Bt,Ft,Wt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?I(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return ht.MIN},e.prototype.maxPost=function(){return ht.MAX},e.prototype.makePost=function(t,e){var n=jt(t);return new ht(e,n)},e.prototype.toString=function(){return".value"},e}(dt)),Vt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,i.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return a.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?I(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=jt(t),r=Nt.EMPTY_NODE.updateChild(this.indexPath_,n);return new ht(e,r)},e.prototype.maxPost=function(){var t=Nt.EMPTY_NODE.updateChild(this.indexPath_,Lt);return new ht(k,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(dt),Gt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return i.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return i.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return i.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return i.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){i.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),ot("DataSnapshot.child",1,e,!1);var n=new F(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ct)},t.prototype.hasChild=function(t){i.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),ot("DataSnapshot.hasChild",1,t,!1);var e=new F(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return i.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;return i.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),i.validateCallback("DataSnapshot.forEach",1,e,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Ct))})},t.prototype.hasChildren=function(){return i.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return i.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return i.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Kt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+i.stringify(this.snapshot.exportVal())},t}(),Yt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ht=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Kt("value",this,new Gt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){i.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),zt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,i.contains(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.createEvent=function(t,e){i.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Kt(t.type,this,new Gt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){i.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var n=i.getCount(e.callbacks_);if(n===i.getCount(this.callbacks_)){if(1===n){var r=i.getAnyKey(e.callbacks_),o=i.getAnyKey(this.callbacks_);return!(o!==r||e.callbacks_[r]&&this.callbacks_[o]&&e.callbacks_[r]!==this.callbacks_[o])}return i.every(this.callbacks_,function(t,n){return e.callbacks_[t]===n})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),qt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return i.assert(Bt,"Reference.ts has not been loaded"),Bt},set:function(t){Bt=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===pt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!=T)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!=k)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Ct){if(null!=e&&!J(e)||null!=n&&!J(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(i.assert(t.getIndex()instanceof Vt||t.getIndex()===Wt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return i.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,o){i.validateArgCount("Query.on",2,4,arguments.length),rt("Query.on",1,e,!1),i.validateCallback("Query.on",2,n,!1);var a=t.getCancelAndContextArgs_("Query.on",r,o);if("value"===e)this.onValueEvent(n,a.cancel,a.context);else{var s={};s[e]=n,this.onChildEvent(s,a.cancel,a.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Ht(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new zt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){i.validateArgCount("Query.off",0,3,arguments.length),rt("Query.off",1,t,!0),i.validateCallback("Query.off",2,e,!0),i.validateContextObject("Query.off",3,n,!0);var r=null,o=null;"value"===t?r=new Ht(e||null,null,n||null):t&&(e&&((o={})[t]=e),r=new zt(o,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,o){var a=this;i.validateArgCount("Query.once",1,4,arguments.length),rt("Query.once",1,e,!1),i.validateCallback("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,o),u=!0,c=new i.Deferred;c.promise.catch(function(){});var l=function(t){u&&(u=!1,a.off(e,l),n&&n.bind(s.context)(t),c.resolve(t))};return this.on(e,l,function(t){a.off(e,l),s.cancel&&s.cancel.bind(s.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(i.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(i.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(i.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ot("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new F(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Vt(n),o=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(o),new t(this.repo,this.path,o,!0)},t.prototype.orderByKey=function(){i.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(pt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){i.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Ct);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){i.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Wt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),i.validateArgCount("Query.startAt",0,2,arguments.length),$("Query.startAt",1,e,this.path,!0),it("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),i.validateArgCount("Query.endAt",0,2,arguments.length),$("Query.endAt",1,e,this.path,!0),it("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(i.validateArgCount("Query.equalTo",1,2,arguments.length),$("Query.equalTo",1,t,this.path,!1),it("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return i.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return i.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=O(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(i.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var n=this.repo===e.repo,r=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return n&&r&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,i.validateCallback(t,3,r.cancel,!0),r.context=n,i.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(i.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Xt=function(){function t(){this.set={}}return t.prototype.add=function(t,e){this.set[t]=null===e||e},t.prototype.contains=function(t){return i.contains(this.set,t)},t.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},t.prototype.remove=function(t){delete this.set[t]},t.prototype.clear=function(){this.set={}},t.prototype.isEmpty=function(){return i.isEmpty(this.set)},t.prototype.count=function(){return i.getCount(this.set)},t.prototype.each=function(t){i.forEach(this.set,function(e,n){return t(e,n)})},t.prototype.keys=function(){var t=[];return i.forEach(this.set,function(e){t.push(e)}),t},t}(),Qt=function(){function t(){this.value_=null,this.children_=null}return t.prototype.find=function(t){if(null!=this.value_)return this.value_.getChild(t);if(t.isEmpty()||null==this.children_)return null;var e=t.getFront();return t=t.popFront(),this.children_.contains(e)?this.children_.get(e).find(t):null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,n);else{null==this.children_&&(this.children_=new Xt);var r=e.getFront();this.children_.contains(r)||this.children_.add(r,new t);var i=this.children_.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var e=this.value_;this.value_=null;var n=this;return e.forEachChild(Ct,function(t,e){n.remember(new F(t),e)}),this.forget(t)}if(null!==this.children_){var r=t.getFront();if(t=t.popFront(),this.children_.contains(r))this.children_.get(r).forget(t)&&this.children_.remove(r);return!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},t.prototype.forEachTree=function(t,e){null!==this.value_?e(t,this.value_):this.forEachChild(function(n,r){var i=new F(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){null!==this.children_&&this.children_.each(function(e,n){t(e,n)})},t}(),Zt=function(t,e){return t&&"object"==typeof t?(i.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},Jt=function(t,e){var n,r=t.getPriority().val(),i=Zt(r,e);if(t.isLeafNode()){var o=t,a=Zt(o.getValue(),e);return a!==o.getValue()||i!==o.getPriority().val()?new bt(a,jt(i)):t}var s=t;return n=s,i!==s.getPriority().val()&&(n=n.updatePriority(new bt(i))),s.forEachChild(Ct,function(t,r){var i=Jt(r,e);i!==r&&(n=n.updateImmediateChild(t,i))}),n};!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ft||(Ft={}));var $t,te,ee=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,i.assert(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),ne=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Ft.ACK_USER_WRITE,this.source=ee.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return i.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new F(e));return new t(F.Empty,n,this.revert)}return i.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),re=function(){return $t||($t=new kt(S)),$t},ie=function(){function t(t,e){void 0===e&&(e=re()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return i.forEach(e,function(t,e){n=n.set(new F(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:F.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new F(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=(this.children.get(r)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(F.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,F.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,F.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(F.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),oe=function(){function t(t,e){this.source=t,this.path=e,this.type=Ft.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,F.Empty):new t(this.source,this.path.popFront())},t}(),ae=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Ft.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,F.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),se=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Ft.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new F(e));return n.isEmpty()?null:n.value?new ae(this.source,F.Empty,n.value):new t(this.source,F.Empty,n)}return i.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ue=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ce=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new ue(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new ue(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ue(Nt.EMPTY_NODE,!1,!1),new ue(Nt.EMPTY_NODE,!1,!1)),t}(),le=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),he=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,a){i.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()==n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(le.childRemovedChange(e,s)):i.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(le.childAddedChange(e,n)):a.trackChildChange(le.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ct,function(t,r){e.hasChild(t)||n.trackChildChange(le.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(Ct,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(le.childChangedChange(e,r,i))}else n.trackChildChange(le.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Nt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),de=function(){function t(){this.changeMap_={}}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;i.assert(e==le.CHILD_ADDED||e==le.CHILD_CHANGED||e==le.CHILD_REMOVED,"Only child changes supported for tracking"),i.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=i.safeGet(this.changeMap_,n);if(r){var o=r.type;if(e==le.CHILD_ADDED&&o==le.CHILD_REMOVED)this.changeMap_[n]=le.childChangedChange(n,t.snapshotNode,r.snapshotNode);else if(e==le.CHILD_REMOVED&&o==le.CHILD_ADDED)delete this.changeMap_[n];else if(e==le.CHILD_REMOVED&&o==le.CHILD_CHANGED)this.changeMap_[n]=le.childRemovedChange(n,r.oldSnap);else if(e==le.CHILD_CHANGED&&o==le.CHILD_ADDED)this.changeMap_[n]=le.childAddedChange(n,t.snapshotNode);else{if(e!=le.CHILD_CHANGED||o!=le.CHILD_CHANGED)throw i.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap_[n]=le.childChangedChange(n,t.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=t},t.prototype.getChanges=function(){return i.getValues(this.changeMap_)},t}(),fe=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),pe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ue(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),_e=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),ge=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){i.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),i.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,o){var a,s,u=new de;if(n.type===Ft.OVERWRITE){var c=n;c.source.fromUser?a=this.applyUserOverwrite_(e,c.path,c.snap,r,o,u):(i.assert(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),a=this.applyServerOverwrite_(e,c.path,c.snap,r,o,s,u))}else if(n.type===Ft.MERGE){var l=n;l.source.fromUser?a=this.applyUserMerge_(e,l.path,l.children,r,o,u):(i.assert(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.getServerCache().isFiltered(),a=this.applyServerMerge_(e,l.path,l.children,r,o,s,u))}else if(n.type===Ft.ACK_USER_WRITE){var h=n;a=h.revert?this.revertUserWrite_(e,h.path,r,o,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,o,u)}else{if(n.type!==Ft.LISTEN_COMPLETE)throw i.assertionError("Unknown operation type: "+n.type);a=this.listenComplete_(e,n.path,r,u)}var d=u.getChanges();return t.maybeAddValueEvent_(e,a,d),new _e(a,d)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(le.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,o){var a=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,u=void 0;if(e.isEmpty())if(i.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=c instanceof Nt?c:Nt.EMPTY_NODE,h=n.calcCompleteEventChildren(l);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,o)}else{var d=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),d,o)}else{var f=e.getFront();if(".priority"==f){i.assert(1==e.getLength(),"Can't have a priority with additional path components");var p=a.getNode();u=t.getServerCache().getNode();var _=n.calcEventCacheAfterServerOverwrite(e,p,u);s=null!=_?this.filter_.updatePriority(p,_):a.getNode()}else{var g=e.popFront(),v=void 0;if(a.isCompleteForChild(f)){u=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,a.getNode(),u);v=null!=m?a.getNode().getImmediateChild(f).updateChild(g,m):a.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,t.getServerCache());s=null!=v?this.filter_.updateChild(a.getNode(),f,v,g,r,o):a.getNode()}}return t.updateEventSnap(s,a.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var d=e.popFront(),f=u.getNode().getImmediateChild(h).updateChild(d,n);s=".priority"==h?c.updatePriority(u.getNode(),f):c.updateChild(u.getNode(),h,f,d,fe,null)}var p=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),_=new pe(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,_,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new pe(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),d=u.getNode().getImmediateChild(l),f=void 0;if(h.isEmpty())f=n;else{var p=c.getCompleteChild(l);f=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Nt.EMPTY_NODE}if(d.equals(f))a=t;else{var _=this.filter_.updateChild(u.getNode(),l,f,h,c,o);a=t.updateEventSnap(_,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:ie.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new F(e),h,r,i,o,a)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),d=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new F(e),d,r,i,o,a)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=ie.Empty;return s.getNode().forEachChild(pt,function(t,e){u=u.set(new F(t),e)}),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=ie.Empty;return n.foreach(function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,fe,r)},t.prototype.revertUserWrite_=function(t,e,n,r,o){var a;if(null!=n.shadowingWrite(e))return t;var s=new pe(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();i.assert(h instanceof Nt,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}l=l,c=this.filter_.updateFullNode(u,l,o)}else{var d=e.getFront(),f=n.calcCompleteChild(d,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(d)&&(f=u.getImmediateChild(d)),(c=null!=f?this.filter_.updateChild(u,d,f,e.popFront(),s,o):t.getEventCache().getNode().hasChild(d)?this.filter_.updateChild(u,d,Nt.EMPTY_NODE,e.popFront(),s,o):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(a=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,a,o))}return a=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(F.Empty),t.updateEventSnap(c,a,this.filter_.filtersNodes())},t}(),ve=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===le.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(le.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,le.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,le.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,le.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,le.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,le.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter(function(t){return t.type===e});a.sort(this.compareChanges_.bind(this)),a.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw i.assertionError("Should only compare child_ events.");var n=new ht(t.childName,t.snapshotNode),r=new ht(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),me=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new he(n.getIndex()),i=n.getNodeFilter();this.processor_=new ge(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(Nt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Nt.EMPTY_NODE,a.getNode(),null),c=new ue(s,o.isFullyInitialized(),r.filtersNodes()),l=new ue(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new ce(l,c),this.eventGenerator_=new ve(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){i.assert(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var o=[],a=0;a<this.eventRegistrations_.length;++a){var s=this.eventRegistrations_[a];if(s.matches(t)){if(t.hasAnyCallback()){o=o.concat(this.eventRegistrations_.slice(a+1));break}}else o.push(s)}this.eventRegistrations_=o}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===Ft.MERGE&&null!==t.source.queryId&&(i.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),i.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,o=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(o.viewCache),i.assert(o.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=o.viewCache,this.generateEventsForChanges_(o.changes,o.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(Ct,function(t,e){n.push(le.childAddedChange(t,e))});return e.isFullyInitialized()&&n.push(le.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),ye=function(){function t(){this.views_={}}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return i.assert(te,"Reference.ts has not been loaded"),te},set:function(t){i.assert(!te,"__referenceConstructor has already been defined"),te=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return i.isEmpty(this.views_)},t.prototype.applyOperation=function(t,e,n){var r=t.source.queryId;if(null!==r){var o=i.safeGet(this.views_,r);return i.assert(null!=o,"SyncTree gave us an op for an invalid query."),o.applyOperation(t,e,n)}var a=[];return i.forEach(this.views_,function(r,i){a=a.concat(i.applyOperation(t,e,n))}),a},t.prototype.addEventRegistration=function(t,e,n,r,o){var a=t.queryIdentifier(),s=i.safeGet(this.views_,a);if(!s){var u=n.calcCompleteEventCache(o?r:null),c=!1;u?c=!0:r instanceof Nt?(u=n.calcCompleteEventChildren(r),c=!1):(u=Nt.EMPTY_NODE,c=!1);var l=new ce(new ue(u,c,!1),new ue(r,o,!1));s=new me(t,l),this.views_[a]=s}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o=e.queryIdentifier(),a=[],s=[],u=this.hasCompleteView();if("default"===o){var c=this;i.forEach(this.views_,function(t,e){s=s.concat(e.removeEventRegistration(n,r)),e.isEmpty()&&(delete c.views_[t],e.getQuery().getQueryParams().loadsAllData()||a.push(e.getQuery()))})}else{var l=i.safeGet(this.views_,o);l&&(s=s.concat(l.removeEventRegistration(n,r)),l.isEmpty()&&(delete this.views_[o],l.getQuery().getQueryParams().loadsAllData()||a.push(l.getQuery())))}return u&&!this.hasCompleteView()&&a.push(new t.__referenceConstructor(e.repo,e.path)),{removed:a,events:s}},t.prototype.getQueryViews=function(){var t=this;return Object.keys(this.views_).map(function(e){return t.views_[e]}).filter(function(t){return!t.getQuery().getQueryParams().loadsAllData()})},t.prototype.getCompleteServerCache=function(t){var e=null;return i.forEach(this.views_,function(n,r){e=e||r.getCompleteServerCache(t)}),e},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return i.safeGet(this.views_,e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){return i.findValue(this.views_,function(t){return t.getQuery().getQueryParams().loadsAllData()})||null},t}(),be=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new ie(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=F.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new ie(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return i.forEach(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,ie.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(F.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Ct,function(e,n){t.push(new ht(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new ht(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new ie(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(e){return t.applySubtreeWrite_(F.Empty,this.writeTree_,e)},t.Empty=new t(new ie(null)),t.applySubtreeWrite_=function(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var o=null;return n.children.inorderTraversal(function(n,a){".priority"===n?(i.assert(null!==a.value,"Priority writes must always be leaf nodes"),o=a.value):r=t.applySubtreeWrite_(e.child(n),a,r)}),r.getChild(e).isEmpty()||null===o||(r=r.updateChild(e.child(".priority"),o)),r},t}(),we=function(){function t(){this.visibleWrites_=be.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ee(t,this)},t.prototype.addOverwrite=function(t,e,n,r){i.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){i.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});i.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var o=r.visible,a=!1,s=this.allWrites_.length-1;o&&s>=0;){var u=this.allWrites_[s];u.visible&&(s>=n&&this.recordContainsPath_(u,r.path)?o=!1:r.path.contains(u.path)&&(a=!0)),s--}if(o){if(a)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var c=r.children;i.forEach(c,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})}return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(F.Empty)){var a=t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);c=n||Nt.EMPTY_NODE;return a.apply(c)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(F.Empty)){var c=n||Nt.EMPTY_NODE;return u.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Nt.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Ct,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Ct,function(t,e){var r=i.childCompoundWrite(new F(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){i.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var o=t.child(e);if(this.visibleWrites_.hasCompleteWrite(o))return null;var a=this.visibleWrites_.childCompoundWrite(o);return a.isEmpty()?r.getChild(e):a.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(F.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),d=h.getNext();d&&c.length<r;)0!==l(d,n)&&c.push(d),d=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){return t.snap?t.path.contains(e):!!i.findKey(t.children,function(n,r){return t.path.child(r).contains(e)})},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,F.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=be.Empty,o=0;o<t.length;++o){var a=t[o];if(e(a)){var s=a.path,u=void 0;if(a.snap)n.contains(s)?(u=F.relativePath(n,s),r=r.addWrite(u,a.snap)):s.contains(n)&&(u=F.relativePath(s,n),r=r.addWrite(F.Empty,a.snap.getChild(u)));else{if(!a.children)throw i.assertionError("WriteRecord should have .snap or .children");if(n.contains(s))u=F.relativePath(n,s),r=r.addWrites(u,a.children);else if(s.contains(n))if((u=F.relativePath(s,n)).isEmpty())r=r.addWrites(F.Empty,a.children);else{var c=i.safeGet(a.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(F.Empty,l)}}}}}return r},t}(),Ee=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Ce=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=ie.Empty,this.pendingWriteTree_=new we,this.tagToQueryMap_={},this.queryToTagMap_={}}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ae(ee.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ie.fromObject(e);return this.applyOperationToSyncPoints_(new se(ee.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=ie.Empty;return null!=n.snap?r=r.set(F.Empty,!0):i.forEach(n.children,function(t,e){r=r.set(new F(t),e)}),this.applyOperationToSyncPoints_(new ne(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ae(ee.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=ie.fromObject(e);return this.applyOperationToSyncPoints_(new se(ee.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new oe(ee.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=F.relativePath(a,e),c=new ae(ee.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=F.relativePath(a,e),c=ie.fromObject(n),l=new se(ee.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=F.relativePath(o,e),u=new oe(ee.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,o=null,a=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=F.relativePath(t,r);o=o||e.getCompleteServerCache(n),a=a||e.hasCompleteView()});var s,u=this.syncPointTree_.get(r);(u?(a=a||u.hasCompleteView(),o=o||u.getCompleteServerCache(F.Empty)):(u=new ye,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=o)?s=!0:(s=!1,o=Nt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(F.Empty);n&&(o=o.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);i.assert(!(l in this.queryToTagMap_),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap_[l]=h,this.tagToQueryMap_["_"+h]=l}var d=this.pendingWriteTree_.childWrites(r),f=u.addEventRegistration(e,n,d,o,s);if(!c&&!a){var p=u.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var d=this.syncPointTree_.subtree(o);if(!d.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(d),p=0;p<f.length;++p){var _=f[p],g=_.getQuery(),v=this.createListenerForView_(_);this.listenProvider_.startListening(t.queryForListening_(g),this.tagForQuery_(g),v.hashFn,v.onComplete)}}if(!h&&c.length>0&&!r)if(l){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else c.forEach(function(e){var n=i.queryToTagMap_[t.makeQueryKey_(e)];i.listenProvider_.stopListening(t.queryForListening_(e),n)});this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=F.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),i.forEach(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+o]}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,o=this.tagForQuery_(e),a=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),o,a.hashFn,a.onComplete),u=this.syncPointTree_.subtree(r);if(o)i.assert(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),i.forEach(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Nt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==t?n="Client doesn't have permission to access the desired data.":"unavailable"==t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return i.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new F(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap_["_"+t]},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return i.safeGet(this.queryToTagMap_,n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);i.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(F.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(F.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(F.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(F.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(F.Empty));var a=[];return e.children.inorderTraversal(function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))}),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),Ae=function(){function t(){this.rootNode_=Nt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Pe=function(){function t(t){this.app_=t}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?(b("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(t){this.app_.INTERNAL.addAuthTokenListener(t)},t.prototype.removeTokenChangeListener=function(t){this.app_.INTERNAL.removeAuthTokenListener(t)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',A(t)},t}(),Te=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),i.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return i.deepCopy(this.counters_)},t}(),ke=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Te),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Ie=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=i.clone(t);return this.last_&&i.forEach(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Se=1e4,De=3e4,Oe=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ie(t);var n=Se+(De-Se)*Math.random();B(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;i.forEach(e,function(e,o){o>0&&i.contains(t.statsToReport_,e)&&(n[e]=o,r=!0)}),r&&this.server_.reportStats(n),B(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Re=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Me(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Me=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();v&&b("event: "+e.toString()),U(n)}}},t.prototype.getPath=function(){return this.path_},t}(),xe=function(){function t(t){this.allowedEvents_=t,this.listeners_={},i.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=this.listeners_[t].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){i.assert(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),Ne=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return a.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return i.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(xe),Le=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||i.isMobileCordova()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return a.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return i.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(xe),Ue=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&U(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),je="pLPCommand",Be="pRTLPCB",Fe=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=ke.getCollection(e),this.urlFn=function(t){return e.connectionURL(V,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ue(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(i.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new We(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1],o=t[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==r)n.id=i,n.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(i,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],i=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,i)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),!i.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI)&&!i.isNodeSdk()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=i.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=i.base64Encode(e),r=R(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!i.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=i.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),We=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Xt,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,i.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window[je+this.uniqueCallbackIdentifier]=e,window[Be+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(t){b("frame writing exception"),t.stack&&b(t.stack),b(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||b("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var e=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))),i.isNodeSdk()&&this.myID){var n={disconn:"t"};n.id=this.myID,n.pw=this.myPW;var r=this.urlFn(n);t.nodeRestRequest(r)}var o=this.onDisconnect;o&&(this.onDisconnect=null,o())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e,1);var r=function(){n.outstandingRequests.remove(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;i.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){b("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}},Math.floor(1))},t}(),Ve=null;"undefined"!=typeof MozWebSocket?Ve=MozWebSocket:"undefined"!=typeof WebSocket&&(Ve=WebSocket);var Ge=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=ke.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!i.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(i.isNodeSdk()){var o=i.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",a={headers:{"User-Agent":"Firebase/5/"+s.SDK_VERSION+"/"+r.platform+"/"+o}},u=r.env,c=0==this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;c&&(a.proxy={origin:c}),this.mySock=new Ve(this.connURL,[],a)}else this.mySock=new Ve(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var l=t.message||t.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ve&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length==this.totalFrames){var e=this.frames.join("");this.frames=null;var n=i.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(i.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=i.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Ke=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Fe,Ge]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n=Ge&&Ge.isAvailable(),r=n&&!Ge.previouslyFailed();if(e.webSocketOnly&&(n||A("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ge];else{var i=this.transports_=[];M(t.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&i.push(e)})}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Ye=function(){function t(t,e,n,r,i,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Ke(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=B(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!=e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=D("t",t),n=D("d",t);if("c"==e)this.onSecondaryControl_(n);else{if("d"!=e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=D("t",t),n=D("d",t);"c"==e?this.onControl_(n):"d"==e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=D("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&A("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),B(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):B(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),He=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ze=1e3,qe=3e5,Xe=function(t){function e(n,r,o,a,s,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.onDataUpdate_=r,c.onConnectStatus_=o,c.onServerInfoUpdate_=a,c.authTokenProvider_=s,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=w("p:"+c.id+":"),c.interruptReasons_={},c.listens_={},c.outstandingPuts_=[],c.outstandingPutCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=ze,c.maxReconnectDelay_=qe,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!i.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),Ne.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&Le.getInstance().on("online",c.onOnline_,c),c}return a.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r:r,a:t,b:e};this.log_(i.stringify(o)),i.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var o=t.queryIdentifier(),a=t.path.toString();this.log_("Listen called for "+a+" "+o),this.listens_[a]=this.listens_[a]||{},i.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),i.assert(!this.listens_[a][o],"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens_[a][o]=s,this.connected_&&this.sendListen_(s)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens_[i]&&n.listens_[i][o])===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&i.contains(t,"w")){var n=i.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',o=e.path.toString();A("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||i.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=i.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),i.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+i.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+i.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;i.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ze,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ze,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ze),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,a=this,s=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,r())};this.realtime_={close:l,sendRequest:function(t){i.assert(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then(function(e){u?b("getToken() completed but was canceled"):(b("getToken() completed. Creating connection."),a.authToken_=e&&e.accessToken,c=new Ye(o,a.repoInfo_,t,n,r,function(t){A(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},s))}).then(null,function(t){a.log_("Failed to get token: "+t),u||(i.CONSTANTS.NODE_ADMIN&&A(t),l())})}},e.prototype.interrupt=function(t){b("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){b("Resuming connection for reason: "+t),delete this.interruptReasons_[t],i.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=ze,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return O(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new F(t).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][e],delete this.listens_[r][e],0===i.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},e.prototype.onAuthRevoked_=function(t,e){b("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t=this;this.tryAuth(),i.forEach(this.listens_,function(e,n){i.forEach(n,function(e,n){t.sendListen_(n)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";i.CONSTANTS.NODE_ADMIN?e="admin_node":i.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+s.SDK_VERSION.replace(/\./g,"-")]=1,i.isMobileCordova()?t["framework.cordova"]=1:i.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Le.getInstance().currentlyOnline();return i.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(He),Qe=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return a.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(i.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,o){var a=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",l,function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&a.onDataUpdate_(s,n,!1,r),i.safeGet(a.listens_,u)===c)&&o(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(o){var a=o&&o.accessToken;a&&(e.auth=a);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?"+i.querystring(e);r.log_("Sending REST request for "+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=i.jsonEval(u.responseText)}catch(t){A("Failed to parse JSON response for "+s+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&A("Got unsuccessful REST response for "+s+" Status: "+u.status),n(u.status);n=null}},u.open("GET",s,!0),u.send()})},e}(He),Ze=function(){function t(t,e,n){var r=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Re,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Qt,this.persistentConnection_=null;var o=new Pe(n);if(this.stats_=ke.getCollection(t),e||j())this.server_=new Qe(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var a=n.options.databaseAuthVariableOverride;if(void 0!==a&&null!==a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{i.stringify(a)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new Xe(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,a),this.server_=this.persistentConnection_}o.addTokenChangeListener(function(t){r.server_.refreshAuthToken(t)}),this.statsReporter_=ke.getOrCreateReporter(t,function(){return new Oe(r.stats_,r.server_)}),this.transactions_init_(),this.infoData_=new Ae,this.infoSyncTree_=new Ce({startListening:function(t,e,n,i){var o=[],a=r.infoData_.getNode(t.path);return a.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ce({startListening:function(t,e,n,i){return r.server_.listen(t,n,e,function(e,n){var o=i(e,n);r.eventQueue_.raiseEventsForChangedPath(t.path,o)}),[]},stopListening:function(t,e){r.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new F(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:this.serverTime()})},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var o=new F(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var a=[];if(r)if(n){var s=i.map(e,function(t){return jt(t)});a=this.serverSyncTree_.applyTaggedQueryMerge(o,s,r)}else{var u=jt(e);a=this.serverSyncTree_.applyTaggedQueryOverwrite(o,u,r)}else if(n){var c=i.map(e,function(t){return jt(t)});a=this.serverSyncTree_.applyServerMerge(o,c)}else{var l=jt(e);a=this.serverSyncTree_.applyServerOverwrite(o,l)}var h=o;a.length>0&&(h=this.rerunTransactions_(o)),this.eventQueue_.raiseEventsForChangedPath(h,a)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;M(t,function(t,n){e.updateInfo_(n,t)})},t.prototype.updateInfo_=function(t,e){var n=new F("/.info/"+t),r=jt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=jt(e,n),s=Jt(a,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(t,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(t.toString(),a.val(!0),function(e,n){var o="ok"===e;o||A("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)});var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var o=!0,a=this.generateServerValues(),s={};if(i.forEach(e,function(t,e){o=!1;var n=jt(e);s[t]=Jt(n,a)}),o)b("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserMerge(t,s,u);this.eventQueue_.queueEvents(c),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||A("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(u,!o),s=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(s,a),r.callOnCompleteCallback(n,e,i)}),i.forEach(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=[];(function(t,e){var n=new Qt;return t.forEachTree(new F(""),function(t,r){n.remember(t,Jt(r,e))}),n})(this.onDisconnect_,e).forEachTree(F.Empty,function(e,r){n=n.concat(t.serverSyncTree_.applyServerOverwrite(e,r));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new Qt,this.eventQueue_.raiseEventsForChangedPath(F.Empty,n)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=jt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=jt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(i.isEmpty(e))return b("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(o,a){"ok"===o&&i.forEach(e,function(e,n){var i=jt(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,o,a)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Ie(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);i.forEach(e,function(t,e){for(var r=t.length;r<n+2;r++)t+=" ";console.log(t+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),b.apply(void 0,[n].concat(t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&U(function(){if("ok"==e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new un(this))},enumerable:!0,configurable:!0}),t}(),Je=function(){function t(e){this.indexedFilter_=new he(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new ht(e,n))||(n=Nt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Nt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Nt.EMPTY_NODE);var i=this;return e.forEachChild(Ct,function(t,e){i.matches(new ht(t,e))||(r=r.updateImmediateChild(t,Nt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),$e=function(){function t(t){this.rangedFilter_=new Je(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new ht(e,n))||(n=Nt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Nt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Nt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Nt.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Nt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(t,e){return s(e,t)}}else a=this.index_.getCompare();var u=t;i.assert(u.numChildren()==this.limit_,"");var c=new ht(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name==e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:a(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(le.childChangedChange(e,n,d)),u.updateImmediateChild(e,n);null!=o&&o.trackChildChange(le.childRemovedChange(e,d));var _=u.updateImmediateChild(e,Nt.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=o&&o.trackChildChange(le.childAddedChange(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}return n.isEmpty()?t:h&&a(l,c)>=0?(null!=o&&(o.trackChildChange(le.childRemovedChange(l.name,l.node)),o.trackChildChange(le.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Nt.EMPTY_NODE)):t},t}(),tn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ct}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return i.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return i.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return i.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return i.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:k},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return i.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Ct&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==Ct},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new he(this.getIndex()):this.hasLimit()?new $e(this):new Je(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()?r:(this.index_===Ct?e=n.PRIORITY_INDEX:this.index_===Wt?e=n.VALUE_INDEX:this.index_===pt?e=n.KEY_INDEX:(i.assert(this.index_ instanceof Vt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=i.stringify(e),this.startSet_&&(r[n.START_AT]=i.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+i.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=i.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+i.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_),r)},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),en=function(t){function e(e,n){if(!(e instanceof Ze))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,tn.DEFAULT,!1)||this}return a.__extends(e,t),e.prototype.getKey=function(){return i.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return i.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof F||(null===this.path.getFront()?function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ot(t,e,n,r)}("Reference.child",1,t,!1):ot("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){i.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){i.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){i.validateArgCount("Reference.set",1,2,arguments.length),at("Reference.set",this.path),$("Reference.set",1,t,this.path,!1),i.validateCallback("Reference.set",2,e,!0);var n=new i.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(i.validateArgCount("Reference.update",1,2,arguments.length),at("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,A("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}et("Reference.update",1,t,this.path,!1),i.validateCallback("Reference.update",2,e,!0);var o=new i.Deferred;return this.repo.update(this.path,t,o.wrapCallback(e)),o.promise},e.prototype.setWithPriority=function(t,e,n){if(i.validateArgCount("Reference.setWithPriority",2,3,arguments.length),at("Reference.setWithPriority",this.path),$("Reference.setWithPriority",1,t,this.path,!1),nt("Reference.setWithPriority",2,e,!1),i.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new i.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return i.validateArgCount("Reference.remove",0,1,arguments.length),at("Reference.remove",this.path),i.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(i.validateArgCount("Reference.transaction",1,3,arguments.length),at("Reference.transaction",this.path),i.validateCallback("Reference.transaction",1,t,!1),i.validateCallback("Reference.transaction",2,e,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(i.errorPrefix(t,e,r)+"must be a boolean.")}("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new i.Deferred;"function"==typeof e&&r.promise.catch(function(){});return this.repo.startTransaction(this.path,t,function(t,n,i){t?r.reject(t):r.resolve(new ct(n,i)),"function"==typeof e&&e(t,n,i)},n),r.promise},e.prototype.setPriority=function(t,e){i.validateArgCount("Reference.setPriority",1,2,arguments.length),at("Reference.setPriority",this.path),nt("Reference.setPriority",1,t,!1),i.validateCallback("Reference.setPriority",2,e,!0);var n=new i.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){i.validateArgCount("Reference.push",0,2,arguments.length),at("Reference.push",this.path),$("Reference.push",1,t,this.path,!0),i.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),o=lt(r),a=this.child(o),s=this.child(o);return n=null!=t?a.set(t,e).then(function(){return s}):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),a},e.prototype.onDisconnect=function(){return at("Reference.onDisconnect",this.path),new ut(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(qt);qt.__referenceConstructor=en,ye.__referenceConstructor=en;var nn,rn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),on=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new rn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n,r=e instanceof F?e:new F(e),o=this;null!==(n=r.getFront());){o=new t(n,o,i.safeGet(o.node_.children,n)||new rn),r=r.popFront()}return o},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){i.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;i.forEach(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new F(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=i.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(nn||(nn={})),Ze.MAX_TRANSACTION_RETRIES_=25,Ze.prototype.transactions_init_=function(){this.transactionQueueTree_=new on},Ze.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var o=function(){},a=new en(this,t);a.on("value",o);var s={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){a.off("value",o)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var l=new Gt(s.currentInputSnapshot,new en(this,s.path),Ct);s.onComplete(null,!1,l)}}else{tt("transaction failed: Data returned ",c,s.path),s.status=nn.RUN;var h=this.transactionQueueTree_.subTree(t),d=h.getValue()||[];d.push(s),h.setValue(d);var f=void 0;if("object"==typeof c&&null!==c&&i.contains(c,".priority"))f=i.safeGet(c,".priority"),i.assert(J(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||Nt.EMPTY_NODE).getPriority().val();f=f;var _=this.generateServerValues(),g=jt(c,f),v=Jt(g,_);s.currentOutputSnapshotRaw=g,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,v,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},Ze.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Nt.EMPTY_NODE},Ze.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);i.assert(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===nn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},Ze.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),o=this.getLatestState_(t,r),a=o,s=o.hash(),u=0;u<e.length;u++){var c=e[u];i.assert(c.status===nn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=nn.SENT,c.retryCount++;var l=F.relativePath(t,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),d=t;this.server_.put(d.toString(),h,function(r){n.log_("transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=nn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new en(n,e[a].path),c=new Gt(s,u,Ct);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i);for(a=0;a<o.length;a++)U(o[a])}else{if("datastale"===r)for(a=0;a<e.length;a++)e[a].status===nn.SENT_NEEDS_ABORT?e[a].status=nn.NEEDS_ABORT:e[a].status=nn.RUN;else{A("transaction at "+d.toString()+" failed: "+r);for(a=0;a<e.length;a++)e[a].status=nn.NEEDS_ABORT,e[a].abortReason=r}n.rerunTransactions_(t)}},s)},Ze.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Ze.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],o=t.filter(function(t){return t.status===nn.RUN}).map(function(t){return t.currentWriteId}),a=0;a<t.length;a++){var s=t[a],u=F.relativePath(e,s.path),c=!1,l=void 0;if(i.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===nn.NEEDS_ABORT)c=!0,l=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===nn.RUN)if(s.retryCount>=Ze.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,o);s.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){tt("transaction failed: Data returned ",d,s.path);var f=jt(d);"object"==typeof d&&null!=d&&i.contains(d,".priority")||(f=f.updatePriority(h.getPriority()));var p=s.currentWriteId,_=this.generateServerValues(),g=Jt(f,_);s.currentOutputSnapshotRaw=f,s.currentOutputSnapshotResolved=g,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,g,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[a].status=nn.COMPLETED,function(t){setTimeout(t,Math.floor(0))}(t[a].unwatcher),t[a].onComplete))if("nodata"===l){var v=new en(this,t[a].path),m=t[a].currentInputSnapshot,y=new Gt(m,v,Ct);n.push(t[a].onComplete.bind(null,null,!1,y))}else n.push(t[a].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(a=0;a<n.length;a++)U(n[a]);this.sendReadyTransactions_()}},Ze.prototype.getAncestorTransactionNode_=function(t){for(var e,n=this.transactionQueueTree_;null!==(e=t.getFront())&&null===n.getValue();)n=n.subTree(e),t=t.popFront();return n},Ze.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},Ze.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},Ze.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==nn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},Ze.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},Ze.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],o=-1,a=0;a<e.length;a++)if(e[a].status===nn.SENT_NEEDS_ABORT);else if(e[a].status===nn.SENT)i.assert(o===a-1,"All SENT items should be at beginning of queue."),o=a,e[a].status=nn.SENT_NEEDS_ABORT,e[a].abortReason="set";else if(i.assert(e[a].status===nn.RUN,"Unexpected transaction status in abort"),e[a].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[a].currentWriteId,!0)),e[a].onComplete){n.push(e[a].onComplete.bind(null,new Error("set"),!1,null))}-1===o?t.setValue(null):e.length=o+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(a=0;a<n.length;a++)U(n[a])}};var an,sn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return an||(an=new t),an},t.prototype.interrupt=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].interrupt()},t.prototype.resume=function(){for(var t in this.repos_)for(var e in this.repos_[t])this.repos_[t][e].resume()},t.prototype.databaseFromApp=function(t,e){var n=e||t.options.databaseURL;void 0===n&&C("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=H(n),i=r.repoInfo;return st("Invalid Firebase Database URL",1,r),r.path.isEmpty()||C("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,t).database},t.prototype.deleteRepo=function(t){var e=i.safeGet(this.repos_,t.app.name);e&&i.safeGet(e,t.repoInfo_.toURLString())===t||C("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e){var n=i.safeGet(this.repos_,e.name);n||(n={},this.repos_[e.name]=n);var r=i.safeGet(n,t.toURLString());return r&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new Ze(t,this.useRestClient_,e),n[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),un=function(){function t(t){this.repo_=t,t instanceof Ze||C("Don't call new Database() directly - please use firebase.database()."),this.root_=new en(t,F.Empty),this.INTERNAL=new cn(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),i.validateArgCount("database.ref",0,1,arguments.length),t instanceof en?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),i.validateArgCount(e,1,1,arguments.length);var n=H(t);st(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&C(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&C("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){i.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){i.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),cn=function(){function t(t){this.database=t}return t.prototype.delete=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return this.database.checkDeleted_("delete"),sn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},t}(),ln=Object.freeze({forceLongPolling:function(){Ge.forceDisallow(),Fe.forceAllow()},forceWebSockets:function(){Fe.forceDisallow()},isWebSocketsAvailable:function(){return Ge.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),hn=Xe;Xe.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Xe.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var dn=Ye,fn=G,pn=Object.freeze({DataConnection:hn,RealTimeConnection:dn,hijackHash:function(t){var e=Xe.prototype.put;return Xe.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Xe.prototype.put=e}},ConnectionTarget:fn,queryIdentifier:function(t){return t.queryIdentifier()},listens:function(t){return t.repo.persistentConnection_.listens_},forceRestClient:function(t){sn.getInstance().forceRestClient(t)}}),_n=un.ServerValue;function gn(e){var n=e.INTERNAL.registerService("database",function(t,e,n){return sn.getInstance().databaseFromApp(t,n)},{Reference:en,Query:qt,Database:un,enableLogging:y,INTERNAL:ln,ServerValue:_n,TEST_ACCESS:pn},null,!0);i.isNodeSdk()&&(t.exports=n)}gn(s),e.registerDatabase=gn,e.Database=un,e.Query=qt,e.Reference=en,e.enableLogging=y,e.ServerValue=_n,e.DataSnapshot=Gt,e.OnDisconnect=ut}).call(e,n(24))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"setLogLevel",function(){return u}),n.d(e,"Logger",function(){return s}),n.d(e,"LogLevel",function(){return r});var r,i=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(r||(r={}));var o=r.INFO,a=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case r.DEBUG:case r.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case r.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case r.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;case r.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},s=function(){function t(t){this.name=t,this._logLevel=o,this._logHandler=a,i.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in r))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,r.ERROR].concat(t))},t}();function u(t){i.forEach(function(e){e.logLevel=t})}},function(t,e,n){n(61)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"registerMessaging",function(){return O});var r,i,o,a=n(16),s=(n.n(a),n(17)),u=n(7),c={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",TOKEN_UNSUBSCRIBE_FAILED:"token-unsubscribe-failed",TOKEN_UPDATE_FAILED:"token-update-failed",TOKEN_UPDATE_NO_TOKEN:"token-update-no-token",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key",INVALID_PUBLIC_VAPID_KEY:"invalid-public-vapid-key",USE_PUBLIC_KEY_BEFORE_GET_TOKEN:"use-public-key-before-get-token",PUBLIC_KEY_DECRYPTION_FAILED:"public-vapid-key-decryption-failed"},l=((r={})[c.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",r[c.AVAILABLE_IN_SW]="This method is available in a service worker context.",r[c.SHOULD_BE_INHERITED]="This method should be overriden by extended classes.",r[c.BAD_SENDER_ID]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",r[c.PERMISSION_DEFAULT]="The required permissions were not granted and dismissed instead.",r[c.PERMISSION_BLOCKED]="The required permissions were not granted and blocked instead.",r[c.UNSUPPORTED_BROWSER]="This browser doesn't support the API's required to use the firebase SDK.",r[c.NOTIFICATIONS_BLOCKED]="Notifications have been blocked.",r[c.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",r[c.SW_REGISTRATION_EXPECTED]="A service worker registration was the expected input.",r[c.GET_SUBSCRIPTION_FAILED]="There was an error when trying to get any existing Push Subscriptions.",r[c.INVALID_SAVED_TOKEN]="Unable to access details of the saved token.",r[c.SW_REG_REDUNDANT]="The service worker being used for push was made redundant.",r[c.TOKEN_SUBSCRIBE_FAILED]="A problem occured while subscribing the user to FCM: {$message}",r[c.TOKEN_SUBSCRIBE_NO_TOKEN]="FCM returned no token when subscribing the user to push.",r[c.TOKEN_SUBSCRIBE_NO_PUSH_SET]="FCM returned an invalid response when getting an FCM token.",r[c.TOKEN_UNSUBSCRIBE_FAILED]="A problem occured while unsubscribing the user from FCM: {$message}",r[c.TOKEN_UPDATE_FAILED]="A problem occured while updating the user from FCM: {$message}",r[c.TOKEN_UPDATE_NO_TOKEN]="FCM returned no token when updating the user to push.",r[c.USE_SW_BEFORE_GET_TOKEN]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r[c.INVALID_DELETE_TOKEN]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",r[c.DELETE_TOKEN_NOT_FOUND]="The deletion attempt for token could not be performed as the token was not found.",r[c.DELETE_SCOPE_NOT_FOUND]="The deletion attempt for service worker scope could not be performed as the scope was not found.",r[c.BG_HANDLER_FUNCTION_EXPECTED]="The input to setBackgroundMessageHandler() must be a function.",r[c.NO_WINDOW_CLIENT_TO_MSG]="An attempt was made to message a non-existant window client.",r[c.UNABLE_TO_RESUBSCRIBE]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",r[c.NO_FCM_TOKEN_FOR_RESUBSCRIBE]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",r[c.FAILED_TO_DELETE_TOKEN]="Unable to delete the currently saved token.",r[c.NO_SW_IN_REG]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",r[c.INCORRECT_GCM_SENDER_ID]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",r[c.BAD_SCOPE]="The service worker scope must be a string with at least one character.",r[c.BAD_VAPID_KEY]="The public VAPID key is not a Uint8Array with 65 bytes.",r[c.BAD_SUBSCRIPTION]="The subscription must be a valid PushSubscription.",r[c.BAD_TOKEN]="The FCM Token used for storage / lookup was not a valid token string.",r[c.BAD_PUSH_SET]="The FCM push set used for storage / lookup was not not a valid push set string.",r[c.FAILED_DELETE_VAPID_KEY]="The VAPID key could not be deleted.",r[c.INVALID_PUBLIC_VAPID_KEY]="The public VAPID key must be a string.",r[c.PUBLIC_KEY_DECRYPTION_FAILED]="The public VAPID key did not equal 65 bytes when decrypted.",r),h=new a.ErrorFactory("messaging","Messaging",l),d=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),f="https://fcm.googleapis.com";function p(t,e){if(null==t||null==e)return!1;if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(var n=new DataView(t),r=new DataView(e),i=0;i<t.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function _(t){return function(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(null,e))}(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}!function(t){t.TYPE_OF_MSG="firebase-messaging-msg-type",t.DATA="firebase-messaging-msg-data"}(i||(i={})),function(t){t.PUSH_MSG_RECEIVED="push-msg-received",t.NOTIFICATION_CLICKED="notification-clicked"}(o||(o={}));var g=function(){function t(){}return t.prototype.getToken=function(t,e,n){return Object(s.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,u,l,p,g;return Object(s.__generator)(this,function(s){switch(s.label){case 0:r=_(e.getKey("p256dh")),i=_(e.getKey("auth")),o="authorized_entity="+t+"&endpoint="+e.endpoint+"&encryption_key="+r+"&encryption_auth="+i,n!==d&&(a=_(n),o+="&application_pub_key="+a),(u=new Headers).append("Content-Type","application/x-www-form-urlencoded"),l={method:"POST",headers:u,body:o},s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch(f+"/fcm/connect/subscribe",l)];case 2:return[4,s.sent().json()];case 3:return p=s.sent(),[3,5];case 4:throw s.sent(),h.create(c.TOKEN_SUBSCRIBE_FAILED);case 5:if(p.error)throw g=p.error.message,h.create(c.TOKEN_SUBSCRIBE_FAILED,{message:g});if(!p.token)throw h.create(c.TOKEN_SUBSCRIBE_NO_TOKEN);if(!p.pushSet)throw h.create(c.TOKEN_SUBSCRIBE_NO_PUSH_SET);return[2,{token:p.token,pushSet:p.pushSet}]}})})},t.prototype.updateToken=function(t,e,n,r,i){return Object(s.__awaiter)(this,void 0,void 0,function(){var o,a,u,l,p,g,v,m;return Object(s.__generator)(this,function(s){switch(s.label){case 0:o=_(r.getKey("p256dh")),a=_(r.getKey("auth")),u="push_set="+n+"&token="+e+"&authorized_entity="+t+"&endpoint="+r.endpoint+"&encryption_key="+o+"&encryption_auth="+a,i!==d&&(l=_(i),u+="&application_pub_key="+l),(p=new Headers).append("Content-Type","application/x-www-form-urlencoded"),g={method:"POST",headers:p,body:u},s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch(f+"/fcm/connect/subscribe",g)];case 2:return[4,s.sent().json()];case 3:return v=s.sent(),[3,5];case 4:throw s.sent(),h.create(c.TOKEN_UPDATE_FAILED);case 5:if(v.error)throw m=v.error.message,h.create(c.TOKEN_UPDATE_FAILED,{message:m});if(!v.token)throw h.create(c.TOKEN_UPDATE_NO_TOKEN);return[2,v.token]}})})},t.prototype.deleteToken=function(t,e,n){return Object(s.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,u;return Object(s.__generator)(this,function(s){switch(s.label){case 0:r="authorized_entity="+t+"&token="+e+"&pushSet="+n,(i=new Headers).append("Content-Type","application/x-www-form-urlencoded"),o={method:"POST",headers:i,body:r},s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch(f+"/fcm/connect/unsubscribe",o)];case 2:return[4,s.sent().json()];case 3:if((a=s.sent()).error)throw u=a.error.message,h.create(c.TOKEN_UNSUBSCRIBE_FAILED,{message:u});return[3,5];case 4:throw s.sent(),h.create(c.TOKEN_UNSUBSCRIBE_FAILED);case 5:return[2]}})})},t}();function v(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var m="undefined",y="fcm_token_object_Store";function b(){var t=indexedDB.open(m);t.onerror=function(t){},t.onsuccess=function(e){!function(t){if(t.objectStoreNames.contains(y)){var e=t.transaction(y).objectStore(y),n=new g,r=e.openCursor();r.onerror=function(t){console.warn("Unable to cleanup old IDB.",t)},r.onsuccess=function(){var e=r.result;if(e){var i=e.value;n.deleteToken(i.fcmSenderId,i.fcmToken,i.fcmPushSet),e.continue()}else t.close(),indexedDB.deleteDatabase(m)}}}(t.result)}}var w=function(){function t(){this.dbPromise=null}return t.prototype.get=function(t){return this.createTransaction(function(e){return e.get(t)})},t.prototype.getIndex=function(t,e){return this.createTransaction(function(n){return n.index(t).get(e)})},t.prototype.put=function(t){return this.createTransaction(function(e){return e.put(t)},"readwrite")},t.prototype.delete=function(t){return this.createTransaction(function(e){return e.delete(t)},"readwrite")},t.prototype.closeDatabase=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(t){switch(t.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:t.sent().close(),this.dbPromise=null,t.label=2;case 2:return[2]}})})},t.prototype.createTransaction=function(t,e){return Object(s.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(s.__generator)(this,function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),r=n.transaction(this.objectStoreName,e),i=r.objectStore(this.objectStoreName),[4,function(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}(t(i))];case 2:return o=a.sent(),[2,new Promise(function(t,e){r.oncomplete=function(){t(o)},r.onerror=function(){e(r.error)}})]}})})},t.prototype.getDb=function(){var t=this;return this.dbPromise||(this.dbPromise=new Promise(function(e,n){var r=indexedDB.open(t.dbName,t.dbVersion);r.onsuccess=function(){e(r.result)},r.onerror=function(){t.dbPromise=null,n(r.error)},r.onupgradeneeded=function(e){return t.onDbUpgrade(r,e)}})),this.dbPromise},t}();var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_token_details_db",e.dbVersion=3,e.objectStoreName="fcm_token_object_Store",e}return Object(s.__extends)(e,t),e.prototype.onDbUpgrade=function(t,e){var n=t.result;switch(e.oldVersion){case 0:(r=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),r.createIndex("fcmToken","fcmToken",{unique:!0});case 1:b();case 2:var r,i=(r=t.transaction.objectStore(this.objectStoreName)).openCursor();i.onsuccess=function(){var t=i.result;if(t){var e=t.value,n=Object(s.__assign)({},e);e.createTime||(n.createTime=Date.now()),"string"==typeof e.vapidKey&&(n.vapidKey=v(e.vapidKey)),"string"==typeof e.auth&&(n.auth=v(e.auth).buffer),"string"==typeof e.auth&&(n.p256dh=v(e.p256dh).buffer),t.update(n),t.continue()}}}},e.prototype.getTokenDetailsFromToken=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(e){if(!t)throw h.create(c.BAD_TOKEN);return C({fcmToken:t}),[2,this.getIndex("fcmToken",t)]})})},e.prototype.getTokenDetailsFromSWScope=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(e){if(!t)throw h.create(c.BAD_SCOPE);return C({swScope:t}),[2,this.get(t)]})})},e.prototype.saveTokenDetails=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(e){if(!t.swScope)throw h.create(c.BAD_SCOPE);if(!t.vapidKey)throw h.create(c.BAD_VAPID_KEY);if(!t.endpoint||!t.auth||!t.p256dh)throw h.create(c.BAD_SUBSCRIPTION);if(!t.fcmSenderId)throw h.create(c.BAD_SENDER_ID);if(!t.fcmToken)throw h.create(c.BAD_TOKEN);if(!t.fcmPushSet)throw h.create(c.BAD_PUSH_SET);return C(t),[2,this.put(t)]})})},e.prototype.deleteToken=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(n){switch(n.label){case 0:return"string"!=typeof t||0===t.length?[2,Promise.reject(h.create(c.INVALID_DELETE_TOKEN))]:[4,this.getTokenDetailsFromToken(t)];case 1:if(!(e=n.sent()))throw h.create(c.DELETE_TOKEN_NOT_FOUND);return[4,this.delete(e.swScope)];case 2:return n.sent(),[2,e]}})})},e}(w);function C(t){if(t.fcmToken&&("string"!=typeof t.fcmToken||0===t.fcmToken.length))throw h.create(c.BAD_TOKEN);if(t.swScope&&("string"!=typeof t.swScope||0===t.swScope.length))throw h.create(c.BAD_SCOPE);if(t.vapidKey&&(!(t.vapidKey instanceof Uint8Array)||65!==t.vapidKey.length))throw h.create(c.BAD_VAPID_KEY);if(t.endpoint&&("string"!=typeof t.endpoint||0===t.endpoint.length))throw h.create(c.BAD_SUBSCRIPTION);if(t.auth&&!(t.auth instanceof ArrayBuffer))throw h.create(c.BAD_SUBSCRIPTION);if(t.p256dh&&!(t.p256dh instanceof ArrayBuffer))throw h.create(c.BAD_SUBSCRIPTION);if(t.fcmSenderId&&("string"!=typeof t.fcmSenderId||0===t.fcmSenderId.length))throw h.create(c.BAD_SENDER_ID);if(t.fcmPushSet&&("string"!=typeof t.fcmPushSet||0===t.fcmPushSet.length))throw h.create(c.BAD_PUSH_SET)}var A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dbName="fcm_vapid_details_db",e.dbVersion=1,e.objectStoreName="fcm_vapid_object_Store",e}return Object(s.__extends)(e,t),e.prototype.onDbUpgrade=function(t){t.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},e.prototype.getVapidFromSWScope=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(n){switch(n.label){case 0:if("string"!=typeof t||0===t.length)throw h.create(c.BAD_SCOPE);return[4,this.get(t)];case 1:return[2,(e=n.sent())?e.vapidKey:void 0]}})})},e.prototype.saveVapidDetails=function(t,e){return Object(s.__awaiter)(this,void 0,void 0,function(){var n;return Object(s.__generator)(this,function(r){if("string"!=typeof t||0===t.length)throw h.create(c.BAD_SCOPE);if(null===e||65!==e.length)throw h.create(c.BAD_VAPID_KEY);return n={swScope:t,vapidKey:e},[2,this.put(n)]})})},e.prototype.deleteVapidDetails=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(t)];case 1:if(!(e=n.sent()))throw h.create(c.DELETE_SCOPE_NOT_FOUND);return[4,this.delete(t)];case 2:return n.sent(),[2,e]}})})},e}(w),P="messagingSenderId",T=function(){function t(t){var e=this;if(!t.options[P]||"string"!=typeof t.options[P])throw h.create(c.BAD_SENDER_ID);this.messagingSenderId=t.options[P],this.tokenDetailsModel=new E,this.vapidDetailsModel=new A,this.iidModel=new g,this.app=t,this.INTERNAL={delete:function(){return e.delete()}}}return t.prototype.getToken=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:return"granted"!==(t=this.getNotificationPermission_())?"denied"===t?[2,Promise.reject(h.create(c.NOTIFICATIONS_BLOCKED))]:[2,Promise.resolve(null)]:[4,this.getSWRegistration_()];case 1:return e=o.sent(),[4,this.getPublicVapidKey_()];case 2:return n=o.sent(),[4,this.getPushSubscription(e,n)];case 3:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(e.scope)];case 4:return(i=o.sent())?[2,this.manageExistingToken(e,r,n,i)]:[2,this.getNewToken(e,r,n)]}})})},t.prototype.manageExistingToken=function(t,e,n,r){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(i){switch(i.label){case 0:return function(t,e,n){if(!p(e.buffer,n.vapidKey.buffer))return!1;var r=t.endpoint===n.endpoint,i=p(t.getKey("auth"),n.auth),o=p(t.getKey("p256dh"),n.p256dh);return r&&i&&o}(e,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(t,e,n,r)]:[4,this.deleteTokenFromDB(r.fcmToken)];case 1:return i.sent(),[2,this.getNewToken(t,e,n)]}})})},t.prototype.updateToken=function(t,e,n,r){return Object(s.__awaiter)(this,void 0,void 0,function(){var i,o,a;return Object(s.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,r.fcmToken,r.fcmPushSet,e,n)];case 1:return i=s.sent(),o={swScope:t.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:i,fcmPushSet:r.fcmPushSet,createTime:Date.now(),endpoint:e.endpoint,auth:e.getKey("auth"),p256dh:e.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(t.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}})})},t.prototype.getNewToken=function(t,e,n){return Object(s.__awaiter)(this,void 0,void 0,function(){var r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,e,n)];case 1:return r=o.sent(),i={swScope:t.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:r.token,fcmPushSet:r.pushSet,createTime:Date.now(),endpoint:e.endpoint,auth:e.getKey("auth"),p256dh:e.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(t.scope,n)];case 3:return o.sent(),[2,r.token]}})})},t.prototype.deleteToken=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(s.__generator)(this,function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(t)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return(e=r.sent())?[4,e.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}})})},t.prototype.deleteTokenFromDB=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e;return Object(s.__generator)(this,function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(t)];case 1:return e=n.sent(),[4,this.iidModel.deleteToken(e.fcmSenderId,e.fcmToken,e.fcmPushSet)];case 2:return n.sent(),[2]}})})},t.prototype.getPushSubscription=function(t,e){return t.pushManager.getSubscription().then(function(n){return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e})})},t.prototype.requestPermission=function(){throw h.create(c.AVAILABLE_IN_WINDOW)},t.prototype.useServiceWorker=function(t){throw h.create(c.AVAILABLE_IN_WINDOW)},t.prototype.usePublicVapidKey=function(t){throw h.create(c.AVAILABLE_IN_WINDOW)},t.prototype.onMessage=function(t,e,n){throw h.create(c.AVAILABLE_IN_WINDOW)},t.prototype.onTokenRefresh=function(t,e,n){throw h.create(c.AVAILABLE_IN_WINDOW)},t.prototype.setBackgroundMessageHandler=function(t){throw h.create(c.AVAILABLE_IN_SW)},t.prototype.delete=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return t.sent(),[2]}})})},t.prototype.getNotificationPermission_=function(){return Notification.permission},t.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},t.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},t.prototype.getIIDModel=function(){return this.iidModel},t}();var k=function(t){function e(e){var n=t.call(this,e)||this;return n.bgMessageHandler=null,self.addEventListener("push",function(t){n.onPush(t)}),self.addEventListener("pushsubscriptionchange",function(t){n.onSubChange(t)}),self.addEventListener("notificationclick",function(t){n.onNotificationClick(t)}),n}return Object(s.__extends)(e,t),e.prototype.onPush=function(t){t.waitUntil(this.onPush_(t))},e.prototype.onSubChange=function(t){t.waitUntil(this.onSubChange_(t))},e.prototype.onNotificationClick=function(t){t.waitUntil(this.onNotificationClick_(t))},e.prototype.onPush_=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:if(!t.data)return[2];try{e=t.data.json()}catch(t){return[2]}return[4,this.hasVisibleClients_()];case 1:return i.sent()?e.notification||this.bgMessageHandler?[2,this.sendMessageToWindowClients_(e)]:[2]:(n=this.getNotificationData_(e))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return[2,i.sent().showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:return i.sent(),[2];case 5:return[2]}})})},e.prototype.onSubChange_=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,e,n,r;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return t=i.sent(),[3,3];case 2:throw e=i.sent(),h.create(c.UNABLE_TO_RESUBSCRIBE,{message:e});case 3:return i.trys.push([3,5,,8]),[4,t.pushManager.getSubscription()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(t.scope)];case 6:if(!(r=i.sent()))throw n;return[4,this.deleteToken(r.fcmToken)];case 7:throw i.sent(),n;case 8:return[2]}})})},e.prototype.onNotificationClick_=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(s.__generator)(this,function(a){switch(a.label){case 0:return t.notification&&t.notification.data&&t.notification.data.FCM_MSG?(t.stopImmediatePropagation(),t.notification.close(),(e=t.notification.data.FCM_MSG).notification&&(n=e.notification.click_action)?[4,this.getWindowClient_(n)]:[2]):[2];case 1:return(r=a.sent())?[3,3]:[4,self.clients.openWindow(n)];case 2:return r=a.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=a.sent(),a.label=5;case 5:return r?(delete e.notification,i=S(o.NOTIFICATION_CLICKED,e),[2,this.attemptToMessageClient_(r,i)]):[2]}})})},e.prototype.getNotificationData_=function(t){if(t&&"object"==typeof t.notification){var e,n=Object(s.__assign)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}},e.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw h.create(c.BG_HANDLER_FUNCTION_EXPECTED);this.bgMessageHandler=t},e.prototype.getWindowClient_=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(s.__generator)(this,function(o){switch(o.label){case 0:return e=new URL(t,self.location.href).href,[4,I()];case 1:for(n=o.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===e){r=n[i];break}return[2,r]}})})},e.prototype.attemptToMessageClient_=function(t,e){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(n){if(!t)throw h.create(c.NO_WINDOW_CLIENT_TO_MSG);return t.postMessage(e),[2]})})},e.prototype.hasVisibleClients_=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(t){switch(t.label){case 0:return[4,I()];case 1:return[2,t.sent().some(function(t){return"visible"===t.visibilityState})]}})})},e.prototype.sendMessageToWindowClients_=function(t){return Object(s.__awaiter)(this,void 0,void 0,function(){var e,n,r=this;return Object(s.__generator)(this,function(i){switch(i.label){case 0:return[4,I()];case 1:return e=i.sent(),n=S(o.PUSH_MSG_RECEIVED,t),[4,Promise.all(e.map(function(t){return r.attemptToMessageClient_(t,n)}))];case 2:return i.sent(),[2]}})})},e.prototype.getSWRegistration_=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(t){return[2,self.registration]})})},e.prototype.getPublicVapidKey_=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){var t,e;return Object(s.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(t=n.sent()))throw h.create(c.SW_REGISTRATION_EXPECTED);return[4,this.getVapidDetailsModel().getVapidFromSWScope(t.scope)];case 2:return null==(e=n.sent())?[2,d]:[2,e]}})})},e}(T);function I(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function S(t,e){return(n={})[i.TYPE_OF_MSG]=t,n[i.DATA]=e,n;var n}var D=function(t){function e(e){var n=t.call(this,e)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.manifestCheckPromise=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=Object(a.createSubscribe)(function(t){n.messageObserver=t}),n.onTokenRefreshInternal=Object(a.createSubscribe)(function(t){n.tokenRefreshObserver=t}),n.setupSWMessageListener_(),n}return Object(s.__extends)(e,t),e.prototype.getToken=function(){var e=this;return this.isSupported_()?this.manifestCheck_().then(function(){return t.prototype.getToken.call(e)}):Promise.reject(h.create(c.UNSUPPORTED_BROWSER))},e.prototype.manifestCheck_=function(){if(this.manifestCheckPromise)return this.manifestCheckPromise;var t=document.querySelector('link[rel="manifest"]');return this.manifestCheckPromise=t?fetch(t.href).then(function(t){return t.json()}).catch(function(){}).then(function(t){if(t&&t.gcm_sender_id&&"103953800507"!==t.gcm_sender_id)throw h.create(c.INCORRECT_GCM_SENDER_ID)}):Promise.resolve(),this.manifestCheckPromise},e.prototype.requestPermission=function(){return Object(s.__awaiter)(this,void 0,void 0,function(){return Object(s.__generator)(this,function(t){return"granted"===Notification.permission?[2]:[2,new Promise(function(t,e){var n=function(n){return"granted"===n?t():e("denied"===n?h.create(c.PERMISSION_BLOCKED):h.create(c.PERMISSION_DEFAULT))},r=Notification.requestPermission(n);r&&r.then(n)})]})})},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw h.create(c.SW_REGISTRATION_EXPECTED);if(null!=this.registrationToUse)throw h.create(c.USE_SW_BEFORE_GET_TOKEN);this.registrationToUse=t},e.prototype.usePublicVapidKey=function(t){if("string"!=typeof t)throw h.create(c.INVALID_PUBLIC_VAPID_KEY);if(null!=this.publicVapidKeyToUse)throw h.create(c.USE_PUBLIC_KEY_BEFORE_GET_TOKEN);var e=v(t);if(65!==e.length)throw h.create(c.PUBLIC_KEY_DECRYPTION_FAILED);this.publicVapidKeyToUse=e},e.prototype.onMessage=function(t,e,n){return"function"==typeof t?this.onMessageInternal(t,e,n):this.onMessageInternal(t)},e.prototype.onTokenRefresh=function(t,e,n){return"function"==typeof t?this.onTokenRefreshInternal(t,e,n):this.onTokenRefreshInternal(t)},e.prototype.waitForRegistrationToActivate_=function(t){var e=t.installing||t.waiting||t.active;return new Promise(function(n,r){if(e)if("activated"!==e.state)if("redundant"!==e.state){var i=function(){if("activated"===e.state)n(t);else{if("redundant"!==e.state)return;r(h.create(c.SW_REG_REDUNDANT))}e.removeEventListener("statechange",i)};e.addEventListener("statechange",i)}else r(h.create(c.SW_REG_REDUNDANT));else n(t);else r(h.create(c.NO_SW_IN_REG))})},e.prototype.getSWRegistration_=function(){var t=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch(function(t){throw h.create(c.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:t.message})}).then(function(e){return t.waitForRegistrationToActivate_(e).then(function(){return t.registrationToUse=e,e.update(),e})}))},e.prototype.getPublicVapidKey_=function(){return this.publicVapidKeyToUse?Promise.resolve(this.publicVapidKeyToUse):Promise.resolve(d)},e.prototype.setupSWMessageListener_=function(){var t=this;"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(e){if(e.data&&e.data[i.TYPE_OF_MSG]){var n=e.data;switch(n[i.TYPE_OF_MSG]){case o.PUSH_MSG_RECEIVED:case o.NOTIFICATION_CLICKED:var r=n[i.DATA];t.messageObserver&&t.messageObserver.next(r)}}},!1)},e.prototype.isSupported_=function(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")},e}(T);function O(t){var e={Messaging:D};t.INTERNAL.registerService("messaging",function(t){return self&&"ServiceWorkerGlobalScope"in self?new k(t):new D(t)},e)}O(u.default)},function(t,e,n){n(63)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"registerStorage",function(){return Vt});var r=n(7),i="https://firebasestorage.googleapis.com",o="https://firebasestorage.googleapis.com",a="/v0",s="/v0",u=12e4,c=6e4,l=-9007199254740991,h=function(){function t(t,e){this.code_=f(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return f(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),d={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function f(t){return"storage/"+t}function p(){return new h(d.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function _(){return new h(d.CANCELED,"User canceled the upload/download.")}function g(){return new h(d.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function v(t,e,n){return new h(d.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function m(){return new h(d.APP_DELETED,"The Firebase app was deleted.")}function y(t,e){return new h(d.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function b(t){throw new h(d.INTERNAL_ERROR,"Internal error: "+t)}var w={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function E(t){switch(t){case w.RAW:case w.BASE64:case w.BASE64URL:case w.DATA_URL:return;default:throw"Expected one of the event types: ["+w.RAW+", "+w.BASE64+", "+w.BASE64URL+", "+w.DATA_URL+"]."}}var C=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function A(t,e){switch(t){case w.RAW:return new C(P(e));case w.BASE64:case w.BASE64URL:return new C(T(t,e));case w.DATA_URL:return new C(function(t){var e=new k(t);return e.base64?T(w.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw y(w.DATA_URL,"Malformed data URL.")}return P(e)}(e.rest)}(e),function(t){return new k(t).contentType}(e))}throw p()}function P(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function T(t,e){switch(t){case w.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw y(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case w.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw y(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw y(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var k=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw y(w.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=function(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)}}();var I,S={STATE_CHANGED:"state_changed"},D={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},O={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function R(t){switch(t){case D.RUNNING:case D.PAUSING:case D.CANCELING:return O.RUNNING;case D.PAUSED:return O.PAUSED;case D.SUCCESS:return O.SUCCESS;case D.CANCELED:return O.CANCELED;case D.ERROR:default:return O.ERROR}}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function x(t,e){for(var n in t)M(t,n)&&e(n,t[n])}function N(t){if(null==t)return{};var e={};return x(t,function(t,n){e[t]=n}),e}function L(t){return new Promise(t)}function U(t){return Promise.resolve(t)}function j(t){return null!=t}function B(t){return void 0!==t}function F(t){return"function"==typeof t}function W(t){return"object"==typeof t}function V(t){return W(t)&&null!==t}function G(t){return"string"==typeof t||t instanceof String}function K(t){return Y()&&t instanceof Blob}function Y(){return"undefined"!=typeof Blob}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(I||(I={}));var H=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=I.NO_ERROR,this.sendPromise_=L(function(e,n){t.xhr_.addEventListener("abort",function(n){t.errorCode_=I.ABORT,e(t)}),t.xhr_.addEventListener("error",function(n){t.errorCode_=I.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(n){e(t)})})}return t.prototype.send=function(t,e,n,r){var i=this;if(this.sent_)throw b("cannot .send() more than once");(this.sent_=!0,this.xhr_.open(e,t,!0),j(r))&&x(r,function(t,e){i.xhr_.setRequestHeader(t,e.toString())});return j(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw b("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw b("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw b("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){j(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){j(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),z=function(){function t(){}return t.prototype.createXhrIo=function(){return new H},t}();function q(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return W(t)&&!Array.isArray(t)}(e)?e:null}var X=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw function(t){return new h(d.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(e)},t.makeFromUrl=function(e){var n=null;for(var r=[{regex:new RegExp("^gs://([A-Za-z0-9.\\-]+)(/(.*))?$","i"),indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],i=0;i<r.length;i++){var o=r[i],a=o.regex.exec(e);if(a){var s=a[o.indices.bucket],u=a[o.indices.path];u||(u=""),n=new t(s,u),o.postModify(n);break}}if(null==n)throw function(t){return new h(d.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return n},t}();function Q(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Z(t){return i+a+t}function J(t){return i+s+t}function $(t){var e=encodeURIComponent,n="?";return x(t,function(t,r){var i=e(t)+"="+e(r);n=n+i+"&"}),n=n.slice(0,-1)}function tt(t,e){return e}var et=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||tt}}(),nt=null;function rt(){if(nt)return nt;var t=[];t.push(new et("bucket")),t.push(new et("generation")),t.push(new et("metageneration")),t.push(new et("name","fullPath",!0));var e=new et("name");e.xform=function(t,e){return function(t){return!G(t)||t.length<2?t:Q(t=t)}(e)},t.push(e);var n=new et("size");return n.xform=function(t,e){return j(e)?+e:e},t.push(n),t.push(new et("timeCreated")),t.push(new et("updated")),t.push(new et("md5Hash",null,!0)),t.push(new et("cacheControl",null,!0)),t.push(new et("contentDisposition",null,!0)),t.push(new et("contentEncoding",null,!0)),t.push(new et("contentLanguage",null,!0)),t.push(new et("contentType",null,!0)),t.push(new et("metadata","customMetadata",!0)),t.push(new et("downloadTokens","downloadURLs",!1,function(t,e){if(!(G(e)&&e.length>0))return[];var n=encodeURIComponent;return e.split(",").map(function(e){var r=t.bucket,i=t.fullPath;return function(t){return o+a+t}("/b/"+n(r)+"/o/"+n(i))+$({alt:"media",token:e})})})),nt=t}function it(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new X(n,r);return e.makeStorageReference(i)}})}(r,t),r}function ot(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function at(t){if(!(t&&W(t)))throw"Expected Metadata object.";for(var e in t){var n=t[e];if("customMetadata"===e){if(!W(n))throw"Expected object for 'customMetadata' mapping."}else if(V(n))throw"Mapping for '"+e+"' cannot be an object."}}function st(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}if(!(r<=n.length&&n.length<=i))throw function(t,e,n,r){var i,o;return t===e?(i=t,o=1===t?"argument":"arguments"):(i="between "+t+" and "+e,o="arguments"),new h(d.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}(r,i,t,n.length);for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(e){throw e instanceof Error?v(o,t,e.message):v(o,t,e)}}var ut=function(){return function(t,e){var n=this;this.validator=function(e){n.optional&&!B(e)||t(e)},this.optional=!!e}}();function ct(t,e){function n(t){if(!G(t))throw"Expected string."}var r;return r=t?function(t,e){return function(n){t(n),e(n)}}(n,t):n,new ut(r,e)}function lt(t){return new ut(at,t)}function ht(){return new ut(function(t){if(!(function(t){return"number"==typeof t||t instanceof Number}(t)&&t>=0))throw"Expected a number 0 or greater."})}function dt(t,e){return new ut(function(e){if(!(null===e||j(e)&&e instanceof Object))throw"Expected an Object.";void 0!==t&&null!==t&&t(e)},e)}function ft(t){return new ut(function(t){if(null!==t&&!F(t))throw"Expected a Function."},t)}function pt(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}var _t=function(){function t(t,e){var n=0,r="";K(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(K(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Y()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=pt();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Y())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}.apply(null,r))}var i=e.map(function(t){return G(t)?A(w.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var a=new Uint8Array(o),s=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]}),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function gt(t,e){return-1!==t.indexOf(e)}var vt=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function mt(t){if(!t)throw p()}function yt(t,e){return function(n,r){var i=function(t,e,n){var r=q(e);return null===r?null:it(t,r,n)}(t,r,e);return mt(null!==i),i}}function bt(t){return function(e,n){var r;return(r=401===e.getStatus()?new h(d.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?function(t){return new h(d.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===e.getStatus()?function(t){return new h(d.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}(t.path):n).setServerResponseProp(n.serverResponseProp()),r}}function wt(t){var e=bt(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=function(t){return new h(d.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}(t.path)),i.setServerResponseProp(r.serverResponseProp()),i}}function Et(t,e,n){var r=Z(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new vt(r,"GET",yt(t,n),i);return o.errorHandler=wt(e),o}function Ct(t,e,n){var r=N(n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var At=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function Pt(t,e){var n;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){mt(!1)}return mt(gt(e||["active"],n)),n}function Tt(t,e,n,r,i,o,a,s){var u=new At(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new h(d.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var f=u.current,p=f+l,_={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},v=r.slice(f,p);if(null===v)throw g();var m=e.maxUploadRetryTime(),y=new vt(n,"POST",function(t,n){var i,a=Pt(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?yt(e,o)(t,n):null,new At(s,c,"final"===a,i)},m);return y.headers=_,y.body=v.uploadData(),y.progressCallback=s||null,y.errorHandler=bt(t),y}var kt=function(){return function(t,e,n){if(F(t)||j(e)||j(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}(),It=function(){function t(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}return Object.defineProperty(t.prototype,"downloadURL",{get:function(){if(null!==this.metadata){var t=this.metadata.downloadURLs;return null!=t&&null!=t[0]?t[0]:null}return null},enumerable:!0,configurable:!0}),t}();function St(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];U(!0).then(function(){t.apply(null,e)})}}var Dt=function(){function t(t,e,n,r,i,o){void 0===o&&(o=null);var a=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=D.RUNNING,this.errorHandler_=function(t){a.request_=null,a.chunkMultiplier_=1,t.codeEquals(d.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=t,a.transition_(D.ERROR))},this.metadataErrorHandler_=function(t){a.request_=null,t.codeEquals(d.CANCELED)?a.completeTransitions_():(a.error_=t,a.transition_(D.ERROR))},this.promise_=L(function(t,e){a.resolve_=t,a.reject_=e,a.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n,r){t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===D.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then(function(n){switch(e.state_){case D.RUNNING:t(n);break;case D.CANCELING:e.transition_(D.CANCELED);break;case D.PAUSING:e.transition_(D.PAUSED)}})},t.prototype.createResumable_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=Ct(e,r,i),s={name:a.fullPath},u=J(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=ot(a,n),h=t.maxUploadRetryTime(),d=new vt(u,"POST",function(t,e){var n;Pt(t);try{n=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){mt(!1)}return mt(G(n)),n},h);return d.urlParams=s,d.headers=c,d.body=l,d.errorHandler=bt(e),d}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()},t.errorHandler_)})},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_(function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime(),o=new vt(n,"POST",function(t,e){var n,i=Pt(t,["active","final"]);try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){mt(!1)}var o=parseInt(n,10);return mt(!isNaN(o)),new At(o,r.size(),"final"===i)},i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=bt(e),o}(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then(function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()},t.errorHandler_)})},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new At(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(i){var o;try{o=Tt(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_(D.ERROR)}var a=t.authWrapper_.makeRequest(o,i);t.request_=a,a.getPromise().then(function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(D.SUCCESS)):t.completeTransitions_()},t.errorHandler_)})},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_(function(e){var n=Et(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.transition_(D.SUCCESS)},t.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=Ct(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ot(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=_t.getBlob(c,r,l);if(null===h)throw g();var d={name:u.fullPath},f=J(o),p=t.maxUploadRetryTime(),_=new vt(f,"POST",yt(t,n),p);return _.urlParams=d,_.headers=a,_.body=h.uploadData(),_.errorHandler=bt(e),_}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(D.SUCCESS)},t.errorHandler_)})},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case D.CANCELING:case D.PAUSING:this.state_=t,null!==this.request_&&this.request_.cancel();break;case D.RUNNING:var e=this.state_===D.PAUSED;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case D.PAUSED:this.state_=t,this.notifyObservers_();break;case D.CANCELED:this.error_=_(),this.state_=t,this.notifyObservers_();break;case D.ERROR:case D.SUCCESS:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case D.PAUSING:this.transition_(D.PAUSED);break;case D.CANCELING:this.transition_(D.CANCELED);break;case D.RUNNING:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=R(this.state_);return new It(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){void 0===e&&(e=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0);var i="Expected a function or an Object with one of `next`, `error`, `complete` properties.",o=ft(!0).validator,a=dt(null,!0).validator;function s(t){try{return void o(t)}catch(t){}try{if(a(t),!(B(t.next)||B(t.error)||B(t.complete)))throw"";return}catch(t){throw i}}st("on",[ct(function(e){if(t!==S.STATE_CHANGED)throw"Expected one of the event types: ["+S.STATE_CHANGED+"]."}),dt(s,!0),ft(!0),ft(!0)],arguments);var u=this;function c(t){return function(e,n,i){null!==t&&st("on",t,arguments);var o=new kt(e,n,r);return u.addObserver_(o),function(){u.removeObserver_(o)}}}var l=[dt(function(t){if(null===t)throw i;s(t)}),ft(!0),ft(!0)];return!(B(e)||B(n)||B(r))?c(l):c(null)(e,n,r)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){!function(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}(this.observers_,t)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),function(t){return Array.prototype.slice.call(t)}(this.observers_).forEach(function(e){t.notifyObserver_(e)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(R(this.state_)){case O.SUCCESS:St(this.resolve_.bind(null,this.snapshot))();break;case O.CANCELED:case O.ERROR:St(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(R(this.state_)){case O.RUNNING:case O.PAUSED:null!==t.next&&St(t.next.bind(t,this.snapshot))();break;case O.SUCCESS:null!==t.complete&&St(t.complete.bind(t))();break;case O.CANCELED:case O.ERROR:null!==t.error&&St(t.error.bind(t,this.error_))();break;default:null!==t.error&&St(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){st("resume",[],arguments);var t=this.state_===D.PAUSED||this.state_===D.PAUSING;return t&&this.transition_(D.RUNNING),t},t.prototype.pause=function(){st("pause",[],arguments);var t=this.state_===D.RUNNING;return t&&this.transition_(D.PAUSING),t},t.prototype.cancel=function(){st("cancel",[],arguments);var t=this.state_===D.RUNNING||this.state_===D.PAUSING;return t&&this.transition_(D.CANCELING),t},t}(),Ot=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof X?e:X.makeFromUrl(e)}return t.prototype.toString=function(){return st("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return rt()},t.prototype.child=function(t){st("child",[ct()],arguments);var e=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(this.location.path,t),n=new X(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0==t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new X(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new X(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Q(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),st("put",[new ut(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Y()&&t instanceof Blob))throw"Expected Blob or File."}),lt(!0)],arguments),this.throwIfRoot_("put"),new Dt(this,this.authWrapper,this.location,this.mappings(),new _t(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=w.RAW),st("putString",[ct(),ct(E,!0),lt(!0)],arguments),this.throwIfRoot_("putString");var r=A(e,t),i=N(n);return!j(i.contentType)&&j(r.contentType)&&(i.contentType=r.contentType),new Dt(this,this.authWrapper,this.location,this.mappings(),new _t(r.data,!0),i)},t.prototype.delete=function(){st("delete",[],arguments),this.throwIfRoot_("delete");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=function(t,e){var n=Z(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new vt(n,"DELETE",function(t,e){},r);return i.successCodes=[200,204],i.errorHandler=wt(e),i}(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.getMetadata=function(){st("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var t=this;return this.authWrapper.getAuthToken().then(function(e){var n=Et(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.updateMetadata=function(t){st("updateMetadata",[lt()],arguments),this.throwIfRoot_("updateMetadata");var e=this;return this.authWrapper.getAuthToken().then(function(n){var r=function(t,e,n,r){var i=Z(e.fullServerUrl()),o=ot(n,r),a=t.maxOperationRetryTime(),s=new vt(i,"PATCH",yt(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=wt(e),s}(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.getDownloadURL=function(){return st("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.getMetadata().then(function(t){var e=t.downloadURLs[0];if(j(e))return e;throw new h(d.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")})},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new h(d.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),Rt=function(){function t(t){this.promise_=function(t){return Promise.reject(t)}(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){void 0===t&&(t=!1)},t}(),Mt=function(){function t(){this.map_={},this.id_=l}return t.prototype.addRequest=function(t){var e=this.id_;this.id_++,this.map_[e]=t;var n=this;function r(){delete n.map_[e]}t.getPromise().then(r,r)},t.prototype.clear=function(){x(this.map_,function(t,e){e&&e.cancel(!0)}),this.map_={}},t}(),xt=function(){function t(e,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var a=this.app_.options;j(a)&&(this.bucket_=t.extractBucket_(a))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=u,this.maxUploadRetryTime_=c,this.requestMap_=new Mt}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:X.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){return null!==this.app_&&j(this.app_.INTERNAL)&&j(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(t){return null!==t?t.accessToken:null},function(t){return null}):U(null)},t.prototype.bucket=function(){if(this.deleted_)throw m();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new Rt(m());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}();var Nt=function(){function t(t,e,n,r,i,o,a,s,u,c,l){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l;var h=this;this.promise_=L(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());B(s)?i(s):i()}catch(t){o(t)}else null!==a?((r=p()).setServerResponseProp(a.getResponseText()),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?m():_()):o(r=new h(d.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Lt(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){u||(u=!0,e.apply(null,arguments))}function l(e){i=setTimeout(function(){i=null,t(h,s())},e)}function h(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];u||(t?c.apply(null,arguments):s()||o?c.apply(null,arguments):(r<64&&(r*=2),1===a?(a=2,e=0):e=1e3*(r+Math.random()),l(e)))}var d=!1;function f(t){d||(d=!0,u||(null!==i?(t||(a=2),clearTimeout(i),l(0)):t||(a=1)))}return l(0),setTimeout(function(){o=!0,f(!0)},n),f}(function(e,n){if(n)e(!1,new Lt(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===I.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=gt(t.successCodes_,o);e(!0,new Lt(a,n))}else{var s=n.getErrorCode()===I.ABORT;e(!1,new Lt(!1,null,s))}})}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}},e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=gt([408,429],t),r=gt(this.additionalRetryCodes_,t);return e||n||r},t}(),Lt=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Ut(t,e,n){var i=$(t.urlParams),o=t.url+i,a=N(t.headers);return function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,e),function(t){var e=void 0!==r.default?r.default.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(a),new Nt(o,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}var jt=function(){function t(t,e,n){if(this.bucket_=null,this.authWrapper_=new xt(t,function(t,e){return new Ot(t,e)},Ut,this,e),this.app_=t,null!=n)this.bucket_=X.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new X(r,""))}this.internals_=new Bt(this)}return t.prototype.ref=function(t){if(st("ref",[ct(function(t){if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new Ot(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},t.prototype.refFromURL=function(t){return st("refFromURL",[ct(function(t){if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{X.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new Ot(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){st("setMaxUploadRetryTime",[ht()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){st("setMaxOperationRetryTime",[ht()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Bt=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),U(void 0)},t}(),Ft="storage";function Wt(t,e,n){return new jt(t,new z,n)}function Vt(t){var e={TaskState:O,TaskEvent:S,StringFormat:w,Storage:jt,Reference:Ot};t.INTERNAL.registerService(Ft,Wt,e,void 0,!0)}Vt(r.default)}])});